{"version":3,"file":"LinkedinPopupCallback-1tLGswgH.js","sources":["../../src/pages/auth/LinkedinPopupCallback.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { CheckCircle, AlertCircle, Loader2, Linkedin } from 'lucide-react';\n\nconst LinkedinPopupCallback: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\n  const [message, setMessage] = useState('Processing LinkedIn authentication...');\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const success = searchParams.get('success');\n        const email = searchParams.get('email');\n        const error = searchParams.get('error');\n\n        console.log('ðŸ” LinkedinPopupCallback params:', { success, email, error });\n\n        // Helper function to notify parent window\n        const notifyParent = (messageData: any) => {\n          let messageSent = false;\n\n          if (window.opener && !window.opener.closed) {\n            try {\n              window.opener.postMessage(messageData, '*');\n              messageSent = true;\n            } catch (e) {\n              console.log('âš ï¸ window.opener.postMessage failed:', e);\n            }\n          }\n\n          try {\n            const channel = new BroadcastChannel('linkedin_oauth_channel');\n            channel.postMessage(messageData);\n            channel.close();\n            messageSent = true;\n          } catch (e) {\n            console.log('âš ï¸ BroadcastChannel failed:', e);\n          }\n\n          try {\n            localStorage.setItem('linkedin_oauth_result', JSON.stringify({\n              ...messageData,\n              timestamp: Date.now()\n            }));\n            messageSent = true;\n          } catch (e) {\n            console.log('âš ï¸ localStorage failed:', e);\n          }\n\n          return messageSent;\n        };\n\n        if (success === 'true') {\n          setStatus('success');\n          setMessage('LinkedIn account connected successfully!');\n\n          const messageData = {\n            type: 'LINKEDIN_AUTH_SUCCESS',\n            data: {\n              email: email ? decodeURIComponent(email) : null,\n              isConnected: true\n            }\n          };\n\n          notifyParent(messageData);\n\n          setTimeout(() => {\n            window.close();\n          }, 2000);\n        } else if (error) {\n          setStatus('error');\n          setMessage(`Authentication failed: ${decodeURIComponent(error)}`);\n\n          const messageData = {\n            type: 'LINKEDIN_AUTH_ERROR',\n            message: decodeURIComponent(error)\n          };\n\n          notifyParent(messageData);\n\n          setTimeout(() => {\n            window.close();\n          }, 3000);\n        } else {\n          setStatus('error');\n          setMessage('Invalid callback parameters');\n          setTimeout(() => {\n            window.close();\n          }, 3000);\n        }\n      } catch (error) {\n        console.error('Error handling LinkedIn callback:', error);\n        setStatus('error');\n        setMessage('An unexpected error occurred');\n        setTimeout(() => {\n          window.close();\n        }, 3000);\n      }\n    };\n\n    handleCallback();\n  }, [searchParams]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6\">\n        {status === 'loading' && (\n          <div className=\"text-center space-y-4\">\n            <div className=\"flex justify-center\">\n              <div className=\"relative\">\n                <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <Linkedin className=\"h-8 w-8 text-blue-600\" />\n                </div>\n                <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\n                  <Loader2 className=\"h-3 w-3 text-white animate-spin\" />\n                </div>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Processing Authentication\n              </h3>\n              <p className=\"text-sm text-gray-600\">\n                {message}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {status === 'success' && (\n          <div className=\"text-center space-y-4\">\n            <div className=\"flex justify-center\">\n              <CheckCircle className=\"h-16 w-16 text-green-600\" />\n            </div>\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-semibold text-green-900\">\n                Successfully Connected!\n              </h3>\n              <p className=\"text-sm text-green-700\">\n                {message}\n              </p>\n              <p className=\"text-xs text-gray-500\">\n                This window will close automatically...\n              </p>\n            </div>\n          </div>\n        )}\n\n        {status === 'error' && (\n          <div className=\"text-center space-y-4\">\n            <div className=\"flex justify-center\">\n              <AlertCircle className=\"h-16 w-16 text-red-600\" />\n            </div>\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-semibold text-red-900\">\n                Connection Failed\n              </h3>\n              <p className=\"text-sm text-red-700\">\n                {message}\n              </p>\n              <p className=\"text-xs text-gray-500\">\n                This window will close automatically...\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LinkedinPopupCallback;\n"],"names":["LinkedinPopupCallback","searchParams","useSearchParams","status","setStatus","useState","message","setMessage","useEffect","success","email","error","notifyParent","messageData","messageSent","e","channel","jsxs","jsx","Linkedin","Loader2","CheckCircle","AlertCircle"],"mappings":"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"}