import{r as n}from"./vendor-D6QveUxv.js";import{u as w,j as u}from"./index-9NRFi5uV.js";const v=()=>{const{user:e,isLoggedIn:a}=w(),[f,m]=n.useState([]),[t,d]=n.useState(null),[p,g]=n.useState([]),[R,c]=n.useState(!0),[S,h]=n.useState(null),P=async()=>{var s,r;if(!(e!=null&&e.role_id)||!a){m([]),d(null),g([]),c(!1);return}try{c(!0),h(null);const[o,A,y]=await Promise.all([u.get(`/api/roles/${e.role_id}`),u.get(`/api/permissions/user/${e.id}/detailed`),u.get("/api/page-permissions/accessible/me")]);o.data&&d(o.data),A.data.success&&m(A.data.data||[]),y.data.success&&g(y.data.data||[])}catch(o){console.error("Error fetching permissions:",o),h(((r=(s=o.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to load permissions")}finally{c(!1)}};n.useEffect(()=>{P()},[e==null?void 0:e.role_id,e==null?void 0:e.id,a]);const l=s=>!e||!a?!1:i?!0:f.some(r=>r.name===s),_=s=>!e||!a?!1:i?!0:s.some(r=>l(r)),E=s=>!e||!a?!1:i?!0:s.every(r=>l(r)),b=s=>t?t.name===s:!1,x=s=>t?s.includes(t.name):!1,i=(t==null?void 0:t.name)==="super_admin"||(e==null?void 0:e.role_id)===1;return{hasPermission:l,hasAnyPermission:_,hasAllPermissions:E,hasRole:b,hasAnyRole:x,isSuperAdmin:i,canAccessPage:s=>!e||!a?!1:i?!0:p.some(r=>r.page_path===s),permissions:f,role:t,accessiblePages:p,loading:R,error:S,refresh:async()=>{await P()}}};export{v as u};
//# sourceMappingURL=usePermissions-AmklbSAW.js.map
