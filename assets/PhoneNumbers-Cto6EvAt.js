import{j as e,bu as k,S as Pe,a3 as Z,ci as Ae,bG as me,bc as _e,cj as Se,bq as we,a1 as Ie,az as Ue,ck as Fe,av as qe,aw as ke}from"./ui-D0JisYOU.js";import{r as v,R as xe}from"./vendor-D6QveUxv.js";import{u as je,b as U,c as H}from"./query-CXvbhbrr.js";import{t as f,j as $,C as A,k as I,l as B,n as K,o as le,v as t,B as u,y as G,z as Y,A as W,E as J,F as X,S as ne,p as ae,q as ie,r as re,s as E,H as De,L as Q,I as se}from"./index-D9y2aYC5.js";import{T as O,a as R,b,c as r,d as V,e as i}from"./table-C43Cr3JT.js";import{P as Le}from"./Page-CMDChCTT.js";import{C as Me}from"./CreatePhoneNumberForm-DJRnPpyb.js";import{a as Te,b as Ee,u as Be,g as Ke,s as Oe,d as Re,e as Ve,f as ze}from"./phoneNumberService-Bcbb38rL.js";import{g as Qe}from"./userService-BZrhz2-Z.js";import{u as ge}from"./usePermissions-l31Jn2hQ.js";import{a as He}from"./agentService-BksjFfeh.js";import"./router-jXXg-8rg.js";import"./scroll-area-DyZFf7r4.js";import"./index-BZw056XW.js";import"./CreditGuard-DCNDFZ-T.js";const $e=()=>{const[o,x]=v.useState(null),[y,D]=v.useState(""),[p,_]=v.useState(!1),S=je(),{data:d,isLoading:z,error:L}=U({queryKey:["admin-vapi-phone-numbers"],queryFn:()=>Te(),retry:1}),{data:j,isLoading:F}=U({queryKey:["all-users"],queryFn:()=>Qe(),retry:1}),g=H({mutationFn:({phoneNumberId:n,userId:h,vapiId:m})=>m?$.post(`/api/phone-numbers/${m}/assign`,{user_id:h,vapi_id:m}):Ee(n,h),onSuccess:()=>{S.invalidateQueries({queryKey:["admin-vapi-phone-numbers"]}),S.invalidateQueries({queryKey:["admin-phone-numbers"]}),f.success("Phone number assigned successfully!"),_(!1),x(null),D("")},onError:n=>{var h,m;f.error("Failed to assign phone number: "+(((m=(h=n.response)==null?void 0:h.data)==null?void 0:m.message)||n.message))}}),C=H({mutationFn:n=>Be(n),onSuccess:()=>{S.invalidateQueries({queryKey:["admin-vapi-phone-numbers"]}),S.invalidateQueries({queryKey:["admin-phone-numbers"]}),f.success("Phone number unassigned successfully!")},onError:n=>{var h,m;f.error("Failed to unassign phone number: "+(((m=(h=n.response)==null?void 0:h.data)==null?void 0:m.message)||n.message))}}),w=n=>{x(n),_(!0)},M=()=>{if(!o||!y){f.error("Please select a user to assign the phone number to.");return}g.mutate({phoneNumberId:o.local_id||o.id,userId:y,vapiId:o.vapi_id||o.id})},c=n=>{if(!n.local_id){f.error("Cannot unassign phone number that is not in local database.");return}window.confirm(`Are you sure you want to unassign phone number ${n.number}?`)&&C.mutate(n.local_id)},q=(d==null?void 0:d.data)||[],P=(j==null?void 0:j.data)||[];return z?e.jsx(A,{children:e.jsx(I,{className:"flex items-center justify-center h-32",children:e.jsx(k,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(A,{children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}),e.jsx(K,{children:"Super Admin - Phone Number Management"})]}),e.jsx(le,{children:"Manage phone number assignments for all users. Shows all VAPI phone numbers including Twilio numbers. Assign any available phone number to specific users to control access."}),(d==null?void 0:d.debug_info)&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Total VAPI Numbers:"}),e.jsx("div",{className:"text-blue-700",children:d.debug_info.total_vapi_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-900",children:"Assigned:"}),e.jsx("div",{className:"text-green-700",children:d.debug_info.assigned_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-orange-900",children:"Available:"}),e.jsx("div",{className:"text-orange-700",children:d.debug_info.unassigned_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-900",children:"In Local DB:"}),e.jsx("div",{className:"text-purple-700",children:d.debug_info.in_local_db})]})]})})]}),e.jsx(I,{children:q.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No phone numbers found"}),e.jsx("p",{className:"text-muted-foreground",children:"No phone numbers are available for assignment."})]}):e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Phone Number"}),e.jsx(r,{children:"Provider"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Assigned User"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(V,{children:q.map(n=>{var h;return e.jsxs(b,{children:[e.jsx(i,{className:"font-mono",children:n.number||"Unknown"}),e.jsx(i,{children:e.jsx(t,{variant:"outline",className:n.provider==="vapi"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700",children:((h=n.provider)==null?void 0:h.toUpperCase())||"VAPI"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[n.is_assigned?e.jsx(t,{variant:"default",className:"bg-green-100 text-green-800",children:"Assigned"}):e.jsx(t,{variant:"outline",className:"text-orange-600",children:"Available"}),n.is_in_local_db?e.jsx(t,{variant:"secondary",className:"text-xs",children:"In DB"}):e.jsx(t,{variant:"outline",className:"text-xs text-blue-600",children:"VAPI Only"})]})}),e.jsx(i,{children:n.user_name?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:n.user_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n.user_email})]}):e.jsx(t,{variant:"outline",className:"text-orange-600",children:"Unassigned"})}),e.jsx(i,{children:e.jsx("div",{className:"flex gap-2",children:n.is_assigned?e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>c(n),disabled:C.isPending||!n.is_in_local_db,title:n.is_in_local_db?"":"Cannot unassign phone number not in local database",children:[e.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Unassign"]}):e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>w(n),disabled:g.isPending,children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Assign"]})})})]},n.id)})})]})})]}),e.jsx(G,{open:p,onOpenChange:_,children:e.jsxs(Y,{children:[e.jsxs(W,{children:[e.jsx(J,{children:"Assign Phone Number"}),e.jsxs(X,{children:["Assign phone number ",o==null?void 0:o.number," to a user. Only the assigned user will be able to see and use this phone number."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select User"}),e.jsxs(ne,{value:y,onValueChange:D,children:[e.jsx(ae,{children:e.jsx(ie,{placeholder:"Choose a user to assign the phone number to"})}),e.jsx(re,{children:P.map(n=>e.jsx(E,{value:n.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[n.first_name||""," ",n.last_name||""]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.email})]})]})},n.id))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(u,{onClick:M,disabled:!y||g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Assigning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Assign Phone Number"]})})]})]})]})})]})},Ge=()=>{var F,g,C,w,M,c,q,P,n,h,m,T;const{isSuperAdmin:o}=ge(),{data:x,isLoading:y,refetch:D}=U({queryKey:["debug-assignments"],queryFn:async()=>(await $.get("/api/phone-numbers/debug/assignments")).data,retry:1}),{data:p,isLoading:_,refetch:S}=U({queryKey:["debug-user-numbers"],queryFn:async()=>(await $.get("/api/phone-numbers/debug/user-numbers")).data,retry:1}),{data:d,isLoading:z,refetch:L}=U({queryKey:["regular-phone-numbers"],queryFn:async()=>(await $.get("/api/phone-numbers")).data,retry:1}),j=()=>{D(),S(),L()};return y||_||z?e.jsx(A,{children:e.jsx(I,{className:"flex items-center justify-center h-32",children:e.jsx(k,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(A,{children:e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-orange-600"}),e.jsx(K,{children:"Phone Number Assignment Debug"})]}),e.jsx(u,{onClick:j,variant:"outline",size:"sm",children:"Refresh All"})]}),e.jsx(le,{children:"Debug information for phone number assignments. This helps identify why assigned phone numbers might not be showing up for users."})]})}),e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Current User Debug Info"]})}),e.jsx(I,{children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User ID:"})," ",(F=p.debug_info)==null?void 0:F.user_id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Is Super Admin:"})," ",(g=p.debug_info)!=null&&g.is_super_admin?"Yes":"No"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone Count:"})," ",(C=p.debug_info)==null?void 0:C.phone_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Is Super Admin (Hook):"})," ",o?"Yes":"No"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone Number IDs:"}),e.jsx("div",{className:"mt-2",children:((M=(w=p.debug_info)==null?void 0:w.phone_number_ids)==null?void 0:M.length)>0?p.debug_info.phone_number_ids.map(a=>e.jsx(t,{variant:"outline",className:"mr-2 mb-2",children:a},a)):e.jsx(t,{variant:"destructive",children:"No phone number IDs found"})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"User's Phone Numbers:"}),((c=p.data)==null?void 0:c.length)>0?e.jsxs(O,{className:"mt-2",children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"DB ID"}),e.jsx(r,{children:"Phone Number ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"User ID"})]})}),e.jsx(V,{children:p.data.map(a=>e.jsxs(b,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.phone_number_id||"N/A"}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.user_id})]},a.id))})]}):e.jsx(t,{variant:"destructive",className:"mt-2",children:"No phone numbers found for user"})]})]})})]}),o&&e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"All Phone Number Assignments"]})}),e.jsx(I,{children:x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Total:"})," ",(q=x.debug_info)==null?void 0:q.total_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned:"})," ",(P=x.debug_info)==null?void 0:P.assigned_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Unassigned:"})," ",(n=x.debug_info)==null?void 0:n.unassigned_count]})]}),((h=x.data)==null?void 0:h.length)>0?e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"DB ID"}),e.jsx(r,{children:"Phone Number ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Assigned User"}),e.jsx(r,{children:"User ID"})]})}),e.jsx(V,{children:x.data.map(a=>e.jsxs(b,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.phone_number_id||"N/A"}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.user_name?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.user_name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.user_email})]}):e.jsx(t,{variant:"outline",children:"Unassigned"})}),e.jsx(i,{children:a.user_id||"NULL"})]},a.id))})]}):e.jsx(t,{variant:"destructive",children:"No phone numbers found in database"})]})})]}),e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Regular Phone Numbers API Response"]})}),e.jsx(I,{children:d&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Success:"})," ",d.success?"Yes":"No"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Count:"})," ",((m=d.data)==null?void 0:m.length)||0]}),((T=d.data)==null?void 0:T.length)>0?e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Created By"})]})}),e.jsx(V,{children:d.data.map(a=>e.jsxs(b,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.status||"N/A"}),e.jsx(i,{children:a.created_by||a.user_name||"N/A"})]},a.id))})]}):e.jsx(t,{variant:"destructive",children:"No phone numbers returned by regular API"})]})})]})]})},os=()=>{var te,ce,oe,he;const[o,x]=v.useState({country:"US",limit:10}),[y,D]=v.useState(null),[p,_]=v.useState(!1),[S,d]=v.useState(!1),[z,L]=v.useState(!1),[j,F]=v.useState("user"),[g,C]=v.useState({friendlyName:"",assistantId:""}),w=je(),{isSuperAdmin:M}=ge(),{data:c,isLoading:q,error:P}=U({queryKey:["phoneNumbers"],queryFn:()=>Ke(),retry:1});xe.useEffect(()=>{var s;c&&(console.log("Phone numbers data received:",c),((s=c==null?void 0:c.data)==null?void 0:s.length)>0&&console.log("First phone number structure:",c.data[0]))},[c]),xe.useEffect(()=>{P&&console.error("Phone numbers fetch error:",P)},[P]);const{data:n,isLoading:h,refetch:m}=U({queryKey:["phoneNumbers","available",o],queryFn:()=>Oe(o),enabled:!1}),{data:T}=U({queryKey:["assistants"],queryFn:()=>He(1,""),retry:1}),a=H({mutationFn:Re,onSuccess:()=>{w.invalidateQueries({queryKey:["phoneNumbers"]}),f.success("Phone number purchased successfully")},onError:s=>{var l,N;f.error(((N=(l=s.response)==null?void 0:l.data)==null?void 0:N.message)||"Failed to purchase phone number")}}),ee=H({mutationFn:({id:s,data:l})=>Ve(s,l),onSuccess:()=>{w.invalidateQueries({queryKey:["phoneNumbers"]}),d(!1),f.success("Phone number updated successfully")},onError:s=>{var l,N;f.error(((N=(l=s.response)==null?void 0:l.data)==null?void 0:N.message)||"Failed to update phone number")}}),de=H({mutationFn:ze,onSuccess:()=>{w.invalidateQueries({queryKey:["phoneNumbers"]}),f.success("Phone number deleted successfully")},onError:s=>{var l,N;f.error(((N=(l=s.response)==null?void 0:l.data)==null?void 0:N.message)||"Failed to delete phone number")}}),be=()=>{m()},pe=s=>{a.mutate({number:s.number,friendlyName:s.friendlyName})},fe=s=>{D(s),C({friendlyName:s.friendlyName||"",assistantId:s.assistantId||"unassigned"}),d(!0)},Ne=()=>{y&&ee.mutate({id:y.id,data:{...g,assistantId:g.assistantId==="unassigned"?"":g.assistantId}})},ve=s=>{confirm("Are you sure you want to delete this phone number?")&&de.mutate(s)},ye=s=>{const l={active:"default",inactive:"secondary",pending:"outline"};return e.jsx(t,{variant:l[s]||"outline",children:s})},Ce=((te=T==null?void 0:T.data)==null?void 0:te.assistants)||[];return P?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Phone Numbers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your phone numbers and purchase new ones"})]}),e.jsx(A,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to connect to the backend API. Please ensure the backend server is running."}),e.jsx(u,{onClick:()=>window.location.reload(),children:"Retry Connection"})]})})})]}):e.jsx(Le,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Phone Numbers"}),e.jsx("p",{className:"text-muted-foreground",children:j==="admin"?"Manage phone number assignments for all users":"Get free AI CRUITMENT phone numbers."})]}),M&&e.jsxs("div",{className:"flex gap-2 mr-4",children:[e.jsx(u,{variant:j==="user"?"default":"outline",onClick:()=>F("user"),size:"sm",children:"User View"}),e.jsx(u,{variant:j==="admin"?"default":"outline",onClick:()=>F("admin"),size:"sm",children:"Admin Management"}),e.jsx(u,{variant:j==="debug"?"default":"outline",onClick:()=>F("debug"),size:"sm",children:"Debug"})]}),j==="user"&&e.jsxs(G,{open:z,onOpenChange:L,children:[e.jsx(De,{asChild:!0,children:e.jsxs(u,{children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Create Phone Number"]})}),e.jsxs(Y,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsx(J,{children:"Create New Phone Number"}),e.jsx(X,{children:"Get a free AI CRUITMENT phone number."})]}),e.jsx(Me,{onSuccess:()=>L(!1),onCancel:()=>L(!1)})]})]})]}),j==="admin"?e.jsx($e,{}):j==="debug"?e.jsx(Ge,{}):e.jsxs(e.Fragment,{children:[e.jsx(G,{open:p,onOpenChange:_,children:e.jsxs(Y,{className:"max-w-4xl",children:[e.jsxs(W,{children:[e.jsx(J,{children:"Search & Buy Phone Numbers"}),e.jsx(X,{children:"Search for available phone numbers to purchase"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"country",children:"Country"}),e.jsxs(ne,{value:o.country,onValueChange:s=>x(l=>({...l,country:s})),children:[e.jsx(ae,{children:e.jsx(ie,{})}),e.jsxs(re,{children:[e.jsx(E,{value:"US",children:"United States"}),e.jsx(E,{value:"CA",children:"Canada"}),e.jsx(E,{value:"GB",children:"United Kingdom"})]})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"areaCode",children:"Area Code"}),e.jsx(se,{id:"areaCode",value:o.areaCode||"",onChange:s=>x(l=>({...l,areaCode:s.target.value})),placeholder:"e.g., 415"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"contains",children:"Contains"}),e.jsx(se,{id:"contains",value:o.contains||"",onChange:s=>x(l=>({...l,contains:s.target.value})),placeholder:"e.g., 1234"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(u,{onClick:be,disabled:h,className:"w-full",children:[h?e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Search"]})})]}),n&&e.jsx("div",{className:"border rounded-lg",children:e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Location"}),e.jsx(r,{children:"Capabilities"}),e.jsx(r,{children:"Price/Month"}),e.jsx(r,{children:"Action"})]})}),e.jsx(V,{children:(ce=n.data)==null?void 0:ce.map(s=>{var l,N,ue;return e.jsxs(b,{children:[e.jsx(i,{className:"font-mono",children:s.number}),e.jsx(i,{children:s.locality&&s.region?`${s.locality}, ${s.region}`:s.locality||s.region||"Unknown Location"}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-1",children:[((l=s.capabilities)==null?void 0:l.voice)&&e.jsx(t,{variant:"outline",children:"Voice"}),((N=s.capabilities)==null?void 0:N.sms)&&e.jsx(t,{variant:"outline",children:"SMS"}),((ue=s.capabilities)==null?void 0:ue.mms)&&e.jsx(t,{variant:"outline",children:"MMS"}),!s.capabilities&&e.jsx(t,{variant:"outline",children:"Unknown"})]})}),e.jsx(i,{children:s.monthlyPrice!==void 0?`$${s.monthlyPrice}`:"Contact for pricing"}),e.jsx(i,{children:e.jsxs(u,{size:"sm",onClick:()=>pe(s),disabled:a.isPending,children:[a.isPending?e.jsx(k,{className:"h-3 w-3 mr-1 animate-spin"}):e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Buy"]})})]},s.number)})})]})})]})]})}),e.jsxs(A,{children:[e.jsxs(B,{children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Your Phone Numbers"]}),e.jsx(le,{children:"Manage your purchased phone numbers and their assignments"})]}),e.jsx(I,{children:q?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(k,{className:"h-8 w-8 animate-spin"})}):e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Created By"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Assigned Assistant"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(V,{children:((oe=c==null?void 0:c.data)==null?void 0:oe.length)===0?e.jsx(b,{children:e.jsx(i,{colSpan:6,className:"text-center text-muted-foreground",children:"No phone numbers found. Purchase your first number to get started."})}):(he=c==null?void 0:c.data)==null?void 0:he.map(s=>e.jsxs(b,{children:[e.jsx(i,{className:"font-mono",children:s.number||"Unknown"}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.created_by||s.user_name||"Unknown User"}),s.user_email&&e.jsx("span",{className:"text-xs text-muted-foreground",children:s.user_email})]})}),e.jsx(i,{children:ye(s.status||"inactive")}),e.jsx(i,{children:s.assistantId?e.jsx(t,{variant:"secondary",children:"Assigned"}):e.jsx(t,{variant:"outline",children:"Unassigned"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>fe(s),children:e.jsx(qe,{className:"h-3 w-3"})}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>ve(s.id),disabled:de.isPending,children:e.jsx(ke,{className:"h-3 w-3"})})]})})]},s.id))})]})})]}),e.jsx(G,{open:S,onOpenChange:d,children:e.jsxs(Y,{children:[e.jsxs(W,{children:[e.jsx(J,{children:"Edit Phone Number"}),e.jsx(X,{children:"Update the phone number settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"friendlyName",children:"Friendly Name"}),e.jsx(se,{id:"friendlyName",value:g.friendlyName,onChange:s=>C(l=>({...l,friendlyName:s.target.value})),placeholder:"Enter a friendly name..."})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"assistantId",children:"Assign to Assistant"}),e.jsxs(ne,{value:g.assistantId,onValueChange:s=>C(l=>({...l,assistantId:s})),children:[e.jsx(ae,{children:e.jsx(ie,{placeholder:"Select an assistant"})}),e.jsxs(re,{children:[e.jsx(E,{value:"unassigned",children:"Unassigned"}),Ce.map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs(u,{onClick:Ne,disabled:ee.isPending,className:"w-full",children:[ee.isPending&&e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Update Phone Number"]})]})]})})]})]})})};export{os as default};
//# sourceMappingURL=PhoneNumbers-Cto6EvAt.js.map
