{"version":3,"file":"PurchaseCreditsModal-OLd079GY.js","sources":["../../src/components/Credits/PurchaseCreditsModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Star, CreditCard, Check, Zap, Shield, Clock } from 'lucide-react';\nimport { toast } from 'sonner';\nimport axiosInstance from '@/api/axios/axiosInstance';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardNumberElement,\n  CardExpiryElement,\n  CardCvcElement,\n  useStripe,\n  useElements\n} from '@stripe/react-stripe-js';\n\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY).then(stripe => {\n  console.log('✅ Stripe loaded successfully:', !!stripe);\n  if (!stripe) {\n    console.error('❌ Failed to load Stripe');\n  }\n  return stripe;\n}).catch(error => {\n  console.error('❌ Error loading Stripe:', error);\n  return null;\n});\n\nconst PaymentForm = ({ selectedPackage, onSuccess, onCancel }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [processing, setProcessing] = useState(false);\n  const [clientSecret, setClientSecret] = useState('');\n  const [autoSubscriptionEnabled, setAutoSubscriptionEnabled] = useState(false);\n  const [autoSubscriptionPackage, setAutoSubscriptionPackage] = useState('professional');\n\n  useEffect(() => {\n    if (selectedPackage) {\n      createPaymentIntent();\n    }\n  }, [selectedPackage]);\n\n  const createPaymentIntent = async () => {\n    try {\n      const requestData = {\n        packageId: selectedPackage.package_id\n      };\n\n      // Add free trial and auto-subscription options if this is a free trial\n      if (selectedPackage.is_free_trial) {\n        requestData.isFreeTrial = true;\n        requestData.autoSubscriptionEnabled = autoSubscriptionEnabled;\n        requestData.autoSubscriptionPackage = autoSubscriptionPackage;\n      }\n\n      const response = await axiosInstance.post('/api/credits/purchase', requestData);\n      setClientSecret(response.data.data.client_secret);\n    } catch (error) {\n      console.error('Error creating payment intent:', error);\n      toast.error('Failed to initialize payment');\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements || !clientSecret) {\n      return;\n    }\n\n    setProcessing(true);\n\n    let result;\n\n    // Handle free trial (setup intent) vs regular payment (payment intent)\n    if (selectedPackage.is_free_trial) {\n      const cardElement = elements.getElement(CardNumberElement);\n\n      // First create the payment method\n      console.log('🔄 Creating payment method with card element');\n      const { error: pmError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n      });\n\n      if (pmError) {\n        console.error('❌ Payment method creation failed:', pmError);\n        toast.error(pmError.message || 'Card validation failed');\n        setProcessing(false);\n        return;\n      }\n\n      console.log('✅ Payment method created successfully:', paymentMethod.id);\n\n      // Then confirm the setup intent with the payment method ID\n      try {\n        console.log('🔄 Confirming setup intent with payment method:', paymentMethod.id);\n        result = await stripe.confirmSetup({\n          clientSecret,\n          confirmParams: {\n            payment_method: paymentMethod.id\n          },\n          redirect: 'if_required'\n        });\n        console.log('✅ Setup intent confirmation result:', result);\n      } catch (confirmError) {\n        console.error('❌ Setup intent confirmation failed:', confirmError);\n        toast.error('Payment setup failed. Please try again.');\n        setProcessing(false);\n        return;\n      }\n    } else {\n      result = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardNumberElement),\n        }\n      });\n    }\n\n    const { error, setupIntent, paymentIntent } = result;\n    const intent = setupIntent || paymentIntent;\n\n    if (error) {\n      console.error('Payment/Setup failed:', error);\n      toast.error(error.message || 'Payment failed');\n      setProcessing(false);\n    } else if (intent.status === 'succeeded') {\n      // Show immediate success message\n      const successMessage = selectedPackage.is_free_trial\n        ? `🎉 Free trial activated! ${selectedPackage.total_credits} credits added to your account.`\n        : `Payment successful! ${selectedPackage.total_credits} credits added to your account.`;\n\n      toast.success(successMessage);\n\n      // Wait a moment for webhook processing, then check payment status\n      setTimeout(async () => {\n        try {\n          await axiosInstance.get(`/api/credits/payment-status/${intent.id}`);\n          // Force refresh of credit balance\n          window.dispatchEvent(new CustomEvent('creditBalanceUpdate'));\n        } catch (error) {\n          console.warn('Payment status check failed:', error);\n        }\n      }, 2000);\n\n      onSuccess(paymentIntent);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Order Summary */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-100\">\n        <h3 className=\"text-base font-semibold text-gray-900 mb-3\">Order Summary</h3>\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-gray-700\">{selectedPackage.name}</span>\n            <span className=\"text-sm font-semibold text-gray-900\">${selectedPackage.price_dollars}</span>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm text-gray-700\">Credits</span>\n            <span className=\"text-sm font-semibold text-gray-900\">{selectedPackage.total_credits.toLocaleString()}</span>\n          </div>\n          <div className=\"border-t border-blue-200 pt-2\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-base font-semibold text-gray-900\">Total</span>\n              <span className=\"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                ${selectedPackage.price_dollars}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Payment Form */}\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Card Input Section */}\n        <div className=\"space-y-3\">\n          <label className=\"block text-base font-semibold text-gray-900\">\n            Payment Information\n          </label>\n\n          {/* Card Number */}\n          <div className=\"space-y-1.5\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Card Number\n            </label>\n            <div className=\"relative p-3 border-2 border-gray-200 rounded-lg focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100 transition-all bg-white shadow-sm\">\n              {/* Card Brand Icons */}\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex space-x-1.5\">\n                <img\n                  src=\"https://js.stripe.com/v3/fingerprinted/img/visa-729c05c240c4bdb47b03ac81d9945bfe.svg\"\n                  alt=\"Visa\"\n                  className=\"h-5 w-auto opacity-70\"\n                />\n                <img\n                  src=\"https://js.stripe.com/v3/fingerprinted/img/mastercard-4d8844094130711885b5e41b28c9848f.svg\"\n                  alt=\"Mastercard\"\n                  className=\"h-5 w-auto opacity-70\"\n                />\n              </div>\n              <CardNumberElement\n                options={{\n                  style: {\n                    base: {\n                      fontSize: '16px',\n                      color: '#1f2937',\n                      fontFamily: '\"Inter\", system-ui, sans-serif',\n                      fontWeight: '500',\n                      '::placeholder': {\n                        color: '#9CA3AF',\n                      },\n                      iconColor: '#6B7280',\n                    },\n                    invalid: {\n                      color: '#EF4444',\n                      iconColor: '#EF4444',\n                    },\n                  },\n                }}\n              />\n            </div>\n          </div>\n\n          {/* Expiry, CVC, and Postal Code */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n            {/* Expiry Date */}\n            <div className=\"space-y-1.5\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                MM / YY\n              </label>\n              <div className=\"p-3 border-2 border-gray-200 rounded-lg focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100 transition-all bg-white shadow-sm\">\n                <CardExpiryElement\n                  options={{\n                    style: {\n                      base: {\n                        fontSize: '14px',\n                        color: '#1f2937',\n                        fontFamily: '\"Inter\", system-ui, sans-serif',\n                        fontWeight: '500',\n                        '::placeholder': {\n                          color: '#9CA3AF',\n                        },\n                      },\n                      invalid: {\n                        color: '#EF4444',\n                      },\n                    },\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* CVC */}\n            <div className=\"space-y-1.5\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                CVC\n              </label>\n              <div className=\"p-3 border-2 border-gray-200 rounded-lg focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100 transition-all bg-white shadow-sm\">\n                <CardCvcElement\n                  options={{\n                    style: {\n                      base: {\n                        fontSize: '14px',\n                        color: '#1f2937',\n                        fontFamily: '\"Inter\", system-ui, sans-serif',\n                        fontWeight: '500',\n                        '::placeholder': {\n                          color: '#9CA3AF',\n                        },\n                      },\n                      invalid: {\n                        color: '#EF4444',\n                      },\n                    },\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Postal Code */}\n            <div className=\"space-y-1.5\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Postal Code\n              </label>\n              <div className=\"p-3 border-2 border-gray-200 rounded-lg focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-100 transition-all bg-white shadow-sm\">\n                <input\n                  type=\"text\"\n                  placeholder=\"12345\"\n                  className=\"w-full bg-transparent border-none outline-none text-gray-900 placeholder-gray-400 font-medium\"\n                  style={{\n                    fontSize: '14px',\n                    fontFamily: '\"Inter\", system-ui, sans-serif',\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Auto-Subscription Toggle (only for free trial) */}\n        {selectedPackage.is_free_trial && (\n          <div className=\"space-y-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n            <div className=\"flex items-start space-x-2\">\n              <input\n                type=\"checkbox\"\n                id=\"autoSubscription\"\n                checked={autoSubscriptionEnabled}\n                onChange={(e) => setAutoSubscriptionEnabled(e.target.checked)}\n                className=\"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n              />\n              <div className=\"flex-1\">\n                <label htmlFor=\"autoSubscription\" className=\"block text-sm font-semibold text-blue-900 cursor-pointer\">\n                  🔄 Auto-buy Professional Pack when credits expire <span className=\"text-red-500\">*</span>\n                </label>\n                <p className=\"text-xs text-blue-700 mt-0.5\">\n                  Automatically purchase Professional Pack ($45 for 500 credits) when your free trial credits run out.\n                  You can disable this anytime in your account settings.\n                </p>\n                {!autoSubscriptionEnabled && (\n                  <p className=\"text-xs text-red-600 mt-1 font-medium\">\n                    * This option is required to complete your free trial purchase.\n                  </p>\n                )}\n              </div>\n            </div>\n\n            {autoSubscriptionEnabled && (\n              <div className=\"ml-6 p-2 bg-white rounded-md border border-blue-200\">\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                  Auto-purchase package:\n                </label>\n                <select\n                  value={autoSubscriptionPackage}\n                  onChange={(e) => setAutoSubscriptionPackage(e.target.value)}\n                  className=\"w-full text-xs border border-gray-300 rounded px-2 py-1.5 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"professional\">Professional Pack - $45 (500 credits)</option>\n                  <option value=\"business\">Business Pack - $80 (1,000 credits)</option>\n                  <option value=\"enterprise\">Enterprise Pack - $180 (2,500 credits)</option>\n                </select>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Security Notice */}\n        <div className=\"flex items-center space-x-3 p-4 bg-green-50 rounded-xl border border-green-200\">\n          <Shield className=\"h-5 w-5 text-green-600 flex-shrink-0\" />\n          <p className=\"text-sm text-green-800\">\n            Your payment information is secured with 256-bit SSL encryption\n          </p>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex space-x-4 pt-2\">\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={onCancel}\n            disabled={processing}\n            className=\"flex-1 h-14 text-lg font-semibold border-2 hover:bg-primary hover:text-white\"\n          >\n            Back\n          </Button>\n          <Button\n            type=\"submit\"\n            disabled={!stripe || processing || (selectedPackage.is_free_trial && !autoSubscriptionEnabled)}\n            className=\"flex-1 h-14 text-lg font-semibold bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300\"\n          >\n            {processing ? (\n              <>\n                <div className=\"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin mr-3\"></div>\n                Processing...\n              </>\n            ) : (\n              <>\n                <CreditCard className=\"h-6 w-6 mr-3\" />\n                Complete Purchase\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nconst PurchaseCreditsModal = ({ isOpen, onClose, onSuccess }) => {\n  const [packages, setPackages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedPackage, setSelectedPackage] = useState(null);\n  const [showPayment, setShowPayment] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchPackages();\n    }\n  }, [isOpen]);\n\n  const fetchPackages = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get('/api/credits/packages');\n      setPackages(response.data.data);\n    } catch (error) {\n      console.error('Error fetching packages:', error);\n      toast.error('Failed to load credit packages');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePackageSelect = (pkg) => {\n    setSelectedPackage(pkg);\n    setShowPayment(true);\n  };\n\n  const handlePaymentSuccess = (paymentIntent) => {\n    setShowPayment(false);\n    setSelectedPackage(null);\n    onSuccess?.(paymentIntent);\n    onClose();\n  };\n\n  const handlePaymentCancel = () => {\n    setShowPayment(false);\n    setSelectedPackage(null);\n  };\n\n  const formatPrice = (cents) => {\n    return (cents / 100).toFixed(2);\n  };\n\n  if (showPayment && selectedPackage) {\n    return (\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-[1400px] max-h-[80vh] p-0 bg-white shadow-2xl\">\n          {/* Header */}\n          <div className=\"relative px-6 py-3 bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-200\">\n            <div className=\"flex items-center space-x-4\">\n              {/* Logo */}\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg\">\n                  <CreditCard className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n\n              {/* Title and Description */}\n              <div className=\"flex-1\">\n                <DialogTitle className=\"text-xl font-bold text-gray-900 mb-1\">\n                  Complete Your Purchase\n                </DialogTitle>\n                <DialogDescription className=\"text-sm text-gray-600 font-medium\">\n                  {selectedPackage.name} • {selectedPackage.total_credits.toLocaleString()} credits • ${selectedPackage.price_dollars}\n                </DialogDescription>\n              </div>\n            </div>\n          </div>\n\n          {/* Two Column Layout */}\n          <div className=\"flex min-h-[400px] max-h-[calc(80vh-80px)] overflow-hidden\">\n            {/* Left Column - Package Details */}\n            <div className=\"w-1/2 p-4 bg-gray-50 border-r border-gray-200 overflow-y-auto\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Details About Package</h3>\n\n              {/* Package Summary */}\n              <div className=\"space-y-3\">\n                <div className=\"bg-white rounded-lg p-4 shadow-sm border border-gray-200\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h4 className=\"text-base font-semibold text-gray-900\">{selectedPackage.name}</h4>\n                    <span className=\"text-xl font-bold text-blue-600\">${selectedPackage.price_dollars}</span>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between items-center py-1.5 border-b border-gray-100\">\n                      <span className=\"text-sm text-gray-600\">Credits</span>\n                      <span className=\"text-sm font-semibold text-gray-900\">{selectedPackage.total_credits.toLocaleString()}</span>\n                    </div>\n\n                    <div className=\"flex justify-between items-center py-1.5 border-b border-gray-100\">\n                      <span className=\"text-sm text-gray-600\">Price per Credit</span>\n                      <span className=\"text-sm font-semibold text-gray-900\">${(selectedPackage.price_dollars / selectedPackage.total_credits).toFixed(4)}</span>\n                    </div>\n\n                    <div className=\"flex justify-between items-center py-1.5 border-b border-gray-100\">\n                      <span className=\"text-sm text-gray-600\">Expires</span>\n                      <span className=\"text-sm font-semibold text-gray-900\">30 days from purchase</span>\n                    </div>\n\n                    <div className=\"flex justify-between items-center py-1.5 font-bold text-base\">\n                      <span className=\"text-gray-900\">Total</span>\n                      <span className=\"text-blue-600\">${selectedPackage.price_dollars}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Features */}\n                <div className=\"bg-white rounded-lg p-4 shadow-sm border border-gray-200\">\n                  <h5 className=\"text-sm font-semibold text-gray-900 mb-2\">What's Included</h5>\n                  <ul className=\"space-y-1.5 text-xs text-gray-600\">\n                    <li className=\"flex items-center\">\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full mr-2\"></div>\n                      AI-powered voice calls\n                    </li>\n                    <li className=\"flex items-center\">\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full mr-2\"></div>\n                      Advanced analytics\n                    </li>\n                    <li className=\"flex items-center\">\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full mr-2\"></div>\n                      24/7 support\n                    </li>\n                    <li className=\"flex items-center\">\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full mr-2\"></div>\n                      No setup fees\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            {/* Right Column - Card Details */}\n            <div className=\"w-1/2 p-4 bg-white overflow-y-auto\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Card Details</h3>\n\n              <Elements stripe={stripePromise}>\n                <PaymentForm\n                  selectedPackage={selectedPackage}\n                  onSuccess={handlePaymentSuccess}\n                  onCancel={handlePaymentCancel}\n                />\n              </Elements>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-[1400px] max-h-[80vh] overflow-hidden p-0 bg-gradient-to-br from-slate-50 to-white\">\n        {/* Header */}\n        <div className=\"relative px-4 pt-4 pb-3 bg-white border-b border-gray-100\">\n          <div className=\"flex items-center space-x-4\">\n            {/* Logo */}\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                <Zap className=\"h-6 w-6 text-white\" />\n              </div>\n            </div>\n\n            {/* Title and Description */}\n            <div className=\"flex-1\">\n              <DialogTitle className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-1\">\n                Choose Your Plan\n              </DialogTitle>\n              <DialogDescription className=\"text-sm text-gray-600\">\n                Unlock the full potential of our AI platform with flexible credit packages designed for every need\n              </DialogDescription>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-4 py-4 overflow-y-auto max-h-[calc(80vh-100px)]\">\n          {loading ? (\n            <div className=\"flex flex-col items-center justify-center py-16 space-y-4\">\n              <div className=\"relative\">\n                <div className=\"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600\"></div>\n              </div>\n              <p className=\"text-gray-600 font-medium\">Loading packages...</p>\n            </div>\n          ) : (\n            <>\n              {/* Packages Grid */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4\">\n                {packages.map((pkg) => (\n                  <div\n                    key={pkg.package_id}\n                    className={`relative group cursor-pointer pricing-card-hover ${\n                      pkg.is_popular\n                        ? 'transform scale-105 z-10'\n                        : ''\n                    }`}\n                    onClick={() => handlePackageSelect(pkg)}\n                  >\n                     \n                    {/* Popular Badge */}\n                    {!!pkg.is_popular && (\n                      <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 z-20\">\n                        <div className=\"bg-gradient-to-r from-orange-400 to-pink-500 text-white px-3 py-1.5 rounded-full text-xs font-semibold shadow-lg\">\n                         <Star className=\"h-3 w-3 inline mr-1\" />\n                          Most Popular\n                        </div>\n                      </div>\n                    )}\n\n                  \n\n                    <Card className={`h-full transition-all duration-300 ${\n                      pkg.is_popular\n                        ? 'gradient-border-popular popular-glow bg-white'\n                        : 'border-2 border-gray-200 hover:border-blue-300 hover:shadow-xl bg-white'\n                    }`}>\n                      <CardContent className=\"p-5 h-full flex flex-col\">\n                        {/* Package Header */}\n                        <div className=\"text-center mb-4\">\n                          <h4 className=\"text-lg font-bold text-gray-900 mb-1\">{pkg.name}</h4>\n                          <p className=\"text-gray-600 text-xs leading-relaxed\">{pkg.description}</p>\n                        </div>\n\n                        {/* Price */}\n                        <div className=\"text-center mb-4\">\n                          {pkg.is_free_trial ? (\n                            <div className=\"space-y-1\">\n                              <div className=\"flex items-baseline justify-center space-x-1\">\n                                <span className=\"text-3xl font-bold bg-gradient-to-r from-green-500 to-emerald-600 bg-clip-text text-transparent\">\n                                  FREE\n                                </span>\n                                <span className=\"text-green-600 text-sm\">🎉</span>\n                              </div>\n                              <div className=\"text-xs text-gray-500\">\n                                <span className=\"line-through\">${formatPrice(pkg.original_price_dollars * 100)}</span>\n                                <span className=\"ml-1 text-green-600 font-semibold\">One-time offer!</span>\n                              </div>\n                            </div>\n                          ) : (\n                            <div className=\"flex items-baseline justify-center space-x-1\">\n                              <span className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                                ${formatPrice(pkg.price_cents)}\n                              </span>\n                              <span className=\"text-gray-500 text-sm\">USD</span>\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Credits Info */}\n                        <div className=\"space-y-3 mb-5 flex-grow\">\n                          <div className=\"bg-gray-50 rounded-lg p-3 space-y-2\">\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-gray-700 text-sm font-medium\">Base Credits</span>\n                              <span className=\"text-lg font-bold text-gray-900\">\n                                {pkg.credits_amount.toLocaleString()}\n                              </span>\n                            </div>\n\n                            {pkg.bonus_credits > 0 && (\n                              <div className=\"flex items-center justify-between border-t border-gray-200 pt-2\">\n                                <span className=\"text-green-700 text-sm font-medium flex items-center\">\n                                  <Check className=\"h-3 w-3 mr-1\" />\n                                  Bonus Credits\n                                </span>\n                                <span className=\"text-lg font-bold text-green-600\">\n                                  +{pkg.bonus_credits.toLocaleString()}\n                                </span>\n                              </div>\n                            )}\n\n                            <div className=\"flex items-center justify-between border-t border-gray-200 pt-2\">\n                              <span className=\"text-gray-900 text-sm font-semibold\">Total Credits</span>\n                              <span className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                                {pkg.total_credits.toLocaleString()}\n                              </span>\n                            </div>\n                          </div>\n\n                          <div className=\"text-center\">\n                            {pkg.is_free_trial ? (\n                              <span className=\"text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full font-semibold\">\n                                🎉 FREE Trial • Card required for verification\n                              </span>\n                            ) : (\n                              <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full\">\n                                ${(pkg.price_cents / 100 / pkg.total_credits).toFixed(4)} per credit\n                              </span>\n                            )}\n                          </div>\n                        </div>\n\n                        {/* CTA Button */}\n                        <Button\n                          className={`w-full h-10 text-sm font-semibold transition-all duration-300 ${\n                            pkg.is_popular\n                              ? 'bg-gradient-to-r from-orange-500 to-pink-600 hover:from-orange-600 hover:to-pink-700 text-white shadow-lg hover:shadow-xl'\n                              : 'bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white hover:shadow-lg'\n                          }`}\n                        >\n                          Get Started\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  </div>\n                ))}\n              </div>\n\n              {/* Trust Indicators */}\n              <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n                  <div className=\"flex flex-col items-center space-y-1.5\">\n                    <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                      <Shield className=\"h-4 w-4 text-green-600\" />\n                    </div>\n                    <h4 className=\"text-sm font-semibold text-gray-900\">Secure Payment</h4>\n                    <p className=\"text-xs text-gray-600\">Protected by Stripe's enterprise-grade security</p>\n                  </div>\n\n                  <div className=\"flex flex-col items-center space-y-1.5\">\n                    <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                      <Zap className=\"h-4 w-4 text-blue-600\" />\n                    </div>\n                    <h4 className=\"text-sm font-semibold text-gray-900\">Instant Activation</h4>\n                    <p className=\"text-xs text-gray-600\">Credits added to your account immediately</p>\n                  </div>\n\n                  <div className=\"flex flex-col items-center space-y-1.5\">\n                    <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center\">\n                      <Clock className=\"h-4 w-4 text-purple-600\" />\n                    </div>\n                    <h4 className=\"text-sm font-semibold text-gray-900\">30-Day Validity</h4>\n                    <p className=\"text-xs text-gray-600\">Credits expire one month from purchase</p>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default PurchaseCreditsModal;\n"],"names":["stripePromise","loadStripe","stripe","error","PaymentForm","selectedPackage","onSuccess","onCancel","useStripe","elements","useElements","processing","setProcessing","useState","clientSecret","setClientSecret","autoSubscriptionEnabled","setAutoSubscriptionEnabled","autoSubscriptionPackage","setAutoSubscriptionPackage","useEffect","createPaymentIntent","requestData","response","axiosInstance","toast","handleSubmit","event","result","cardElement","CardNumberElement","pmError","paymentMethod","confirmError","setupIntent","paymentIntent","intent","successMessage","jsxs","jsx","CardExpiryElement","CardCvcElement","e","Shield","Button","Fragment","CreditCard","PurchaseCreditsModal","isOpen","onClose","packages","setPackages","loading","setLoading","setSelectedPackage","showPayment","setShowPayment","fetchPackages","handlePackageSelect","pkg","handlePaymentSuccess","handlePaymentCancel","formatPrice","cents","Dialog","DialogContent","DialogTitle","DialogDescription","Elements","Zap","Star","Card","CardContent","Check","Clock"],"mappings":"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"}