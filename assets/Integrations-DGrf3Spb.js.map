{"version":3,"file":"Integrations-DGrf3Spb.js","sources":["../../src/pages/Integrations/components/FacebookConnectedPages.jsx","../../src/pages/Integrations/Integrations.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ChevronDown, Edit, X, AlertTriangle } from 'lucide-react';\nimport axiosInstance from '@/api/axios/axiosInstance';\n\nconst FacebookConnectedPages = ({ isConnected, onDisconnect }) => {\n  const [selectedPage, setSelectedPage] = useState('');\n  const [pages, setPages] = useState([]);\n  const [forms, setForms] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showFieldMapping, setShowFieldMapping] = useState(false);\n  const [selectedForm, setSelectedForm] = useState(null);\n  const [fieldMappings, setFieldMappings] = useState({});\n\n  // CRM Fields available for mapping\n  const crmFields = [\n    { value: 'email', label: 'Email' },\n    { value: 'full_name', label: 'Full name' },\n    { value: 'first_name', label: 'First name' },\n    { value: 'last_name', label: 'Last name' },\n    { value: 'phone', label: 'Phone' },\n    { value: 'company', label: 'Company' },\n    { value: 'job_title', label: 'Job Title' },\n    { value: 'address', label: 'Address' },\n    { value: 'city', label: 'City' },\n    { value: 'state', label: 'State' },\n    { value: 'zip_code', label: 'Zip Code' },\n    { value: 'country', label: 'Country' }\n  ];\n\n  useEffect(() => {\n    if (isConnected) {\n      fetchPages();\n    }\n  }, [isConnected]);\n\n  useEffect(() => {\n    if (selectedPage) {\n      fetchForms(selectedPage);\n    }\n  }, [selectedPage]);\n\n  const fetchPages = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get('/api/facebook/pages/stored');\n\n      if (response.data.success) {\n        setPages(response.data.data || []);\n        if (response.data.data && response.data.data.length > 0) {\n          setSelectedPage(response.data.data[0].id);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching pages:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchForms = async (pageId) => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(`/api/facebook/forms/stored/${pageId}`);\n\n      if (response.data.success) {\n        setForms(response.data.data || []);\n      }\n    } catch (error) {\n      console.error('Error fetching forms:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditFields = (form) => {\n    setSelectedForm(form);\n    // Load existing field mappings for this form\n    setFieldMappings(form.field_mapping || {});\n    setShowFieldMapping(true);\n  };\n\n  const handleSaveFieldMapping = async () => {\n    try {\n      const response = await axiosInstance.put(`/api/facebook/forms/${selectedForm.id}/field-mapping`, {\n        field_mapping: fieldMappings\n      });\n\n      if (response.data.success) {\n        // Update the form in the local state\n        setForms(forms.map(form =>\n          form.id === selectedForm.id\n            ? { ...form, field_mapping: fieldMappings }\n            : form\n        ));\n        setShowFieldMapping(false);\n        setSelectedForm(null);\n      }\n    } catch (error) {\n      console.error('Error saving field mapping:', error);\n    }\n  };\n\n  const toggleFormStatus = async (formId, currentStatus) => {\n    try {\n      const newStatus = !currentStatus;\n      const response = await axiosInstance.put(`/api/facebook/forms/${formId}/toggle`, {\n        is_enabled: newStatus\n      });\n\n      if (response.data.success) {\n        setForms(forms.map(form =>\n          form.id === formId\n            ? { ...form, is_enabled: newStatus }\n            : form\n        ));\n      }\n    } catch (error) {\n      console.error('Error toggling form status:', error);\n    }\n  };\n\n  if (!isConnected) {\n    return null;\n  }\n\n  return (\n    <div className=\" rounded-lg border neo-card border-none \\ p-6\">\n      <div className=\"flex items-center  justify-between mb-6\">\n        <h2 className=\"text-xl font-semibold text-white\">Facebook Form Fields Mapping</h2>\n        <button\n          onClick={onDisconnect}\n          className=\"px-4 py-2 rounded-lg text-sm font-medium\n          bg-red-500/20 text-red-400\n          border border-red-500/30\n          hover:bg-red-500/30 hover:text-red-300\n          transition\"\n        >\n          Disconnect\n        </button>\n      </div>\n\n      {/* Page Selection */}\n      <div className=\"mb-6\">\n        <label className=\"block text-sm font-medium text-gray-500 mb-2\">\n          Select Page\n        </label>\n        <div className=\"relative\">\n          <select\n            value={selectedPage}\n            onChange={(e) => setSelectedPage(e.target.value)}\n            className=\"\n    w-full px-3 py-2 pr-10 rounded-lg\n    bg-white/5 text-white\n    border border-white/20\n    focus:outline-none\n    focus:ring-2 focus:ring-indigo-500/50\n    focus:border-indigo-500/50\n    appearance-none\n  \"\n          >\n            <option value=\"\" className=\"bg-[#0b0f2e] text-white\">Select a page...</option>\n            {pages.map((page) => (\n              <option key={page.id} value={page.id} className=\"bg-[#0b0f2e] text-white\">\n                {page.name}\n              </option> \n            ))}\n          </select>\n          <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-white/40 pointer-events-none\"  />\n        </div>\n      </div>\n\n      {/* Forms Table */}\n      {selectedPage && (\n        <div className=\"overflow-hidden\">\n          <div className=\"grid grid-cols-4 gap-4 px-4 py-3\n  bg-white/5\n  border-b border-white/10\n  rounded-lg\n  text-sm font-medium text-white/70\">\n            <div>Page Name</div>\n            <div>Form Name</div>\n            <div>Map Fields</div>\n            <div>Status</div>\n          </div>\n\n          {loading ? (\n            <div className=\"py-8 text-center text-gray-500\">\n              Loading forms...\n            </div>\n          ) : forms.length === 0 ? (\n            <div className=\"py-8 text-center text-gray-500\">\n              No forms found for this page\n            </div>\n          ) : (\n            forms.map((form) => {\n              const currentPage = pages.find(p => p.id === selectedPage);\n              return (\n                <div key={form.id} className=\"\n                grid grid-cols-4 gap-4 px-4 py-4 items-center\n                border-b border-white/5\n                text-white/80\n                hover:bg-white/5\n                transition\n              \">\n                  <div className=\"text-sm text-white\">\n                    {currentPage?.name || 'Unknown Page'}\n                  </div>\n                  <div className=\"text-sm text-white\">\n                    {form.form_name || form.name}\n                  </div>\n                  <div>\n                    <button\n                      onClick={() => handleEditFields(form)}\n                      className=\"\n    inline-flex items-center gap-1\n    px-3 py-1.5 text-sm\n    rounded-md\n    bg-indigo-500/20 text-indigo-300\n    border border-indigo-500/30\n    hover:bg-indigo-500/30\n    transition\"\n                    >\n                      <Edit className=\"h-3 w-3 mr-1\" />\n                      Edit Fields\n                    </button>\n                  </div>\n                  <div>\n                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={form.is_enabled || false}\n                        onChange={() => toggleFormStatus(form.id, form.is_enabled)}\n                        className=\"sr-only peer\"\n                      />\n                      <div className=\"\n  w-11 h-6 rounded-full\n  bg-white/10\n  peer-checked:bg-indigo-500/70\n  transition\n  relative\n\"></div>\n                    </label>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n      )}\n\n      {/* Field Mapping Modal */}\n      {showFieldMapping && selectedForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Map Fields</h3>\n              <button\n                onClick={() => setShowFieldMapping(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"h-5 w-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <p className=\"text-sm text-gray-600 mb-6\">\n                Map the fields in your form to the CRM fields. If you have any questions, we recommend checking out the{' '}\n                <a href=\"#\" className=\"text-blue-600 hover:underline\">support article by clicking here</a>.\n              </p>\n\n              <div className=\"grid grid-cols-2 gap-6 mb-6\">\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Form Fields</h4>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-3\">CRM Fields</h4>\n                </div>\n              </div>\n\n              {/* Form Fields Mapping */}\n              {selectedForm.questions && selectedForm.questions.length > 0 ? (\n                selectedForm.questions.map((question, index) => (\n                  <div key={index} className=\"grid grid-cols-2 gap-6 mb-4\">\n                    <div className=\"flex items-center\">\n                      <label className=\"text-sm text-gray-900\">\n                        {question.label}\n                        {question.type === 'EMAIL' && <span className=\"text-red-500 ml-1\">*</span>}\n                      </label>\n                    </div>\n                    <div>\n                      <select\n                        value={fieldMappings[question.key] || ''}\n                        onChange={(e) => setFieldMappings({\n                          ...fieldMappings,\n                          [question.key]: e.target.value\n                        })}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      >\n                        <option value=\"\">Select CRM field...</option>\n                        {crmFields.map((field) => (\n                          <option key={field.value} value={field.value}>\n                            {field.label}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  No form fields available for mapping\n                </div>\n              )}\n\n              <div className=\"flex items-center p-4 bg-orange-50 border border-orange-200 rounded-lg mb-6\">\n                <AlertTriangle className=\"h-5 w-5 text-orange-500 mr-3 flex-shrink-0\" />\n                <p className=\"text-sm text-orange-700\">\n                  Map any of the above mandatory fields to receive leads into your account successfully.\n                </p>\n              </div>\n\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={() => setShowFieldMapping(false)}\n                  className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveFieldMapping}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Confirm\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FacebookConnectedPages;\n","import React, { useState } from \"react\";\nimport Page from \"@/components/Page\";\nimport Header from \"@/components/Header\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Settings,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  RefreshCw,\n  ExternalLink,\n  Users,\n  FileText,\n  Zap\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport axiosInstance from \"@/api/axios/axiosInstance\";\n\nimport FacebookConnectedPages from './components/FacebookConnectedPages';\nimport GmailOAuthModal from '@/components/GmailOAuthModal';\n\nconst IntegrationCard = ({\n  description,\n  image,\n  isConnected,\n  onConnect,\n  onManage\n}) => {\n  return (\n    <Card className=\"w-full max-w-sm bg-white/5 backdrop-blur-md border border-white/10 rounded-lg shadow-sm hover:shadow-md hover:border-indigo-500/30 transition-all duration-200\">\n      <CardContent className=\"flex flex-col items-center text-center p-2 space-y-6\">\n        {/* Circular Logo Image */}\n        <div className=\"w-20 h-20 rounded-full overflow-hidden flex items-center justify-center bg-white/10 border-2 border-white/20\">\n          <img\n            src={image}\n            alt=\"Integration logo\"\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n\n        {/* Description */}\n        <p className=\"text-gray-300 text-sm leading-relaxed\">\n          {description}\n        </p>\n\n        {/* Action Button */}\n        <Button\n          onClick={isConnected ? onManage : onConnect}\n          className={`w-full py-3 rounded-md font-medium transition-colors duration-200 ${\n            isConnected\n              ? 'bg-red-500/80 hover:bg-red-600 text-white border-0'\n              : 'bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white border-0'\n          }`}\n        >\n          {isConnected ? 'Disconnect' : 'Connect'}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n};\n\nconst Integrations = () => {\n  const [facebookConnected, setFacebookConnected] = useState(false);\n  const [gmailConnected, setGmailConnected] = useState(false);\n  const [gmailProfile, setGmailProfile] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"integrations\");\n  const [showGmailModal, setShowGmailModal] = useState(false);\n\n  // Check Gmail connection status (using separate Integration Gmail API)\n  const checkGmailConnection = async () => {\n    try {\n      console.log('ðŸ” Checking Integration Gmail connection status...');\n      const response = await axiosInstance.get('/api/integration-gmail/auth/status');\n\n      if (response.data.success && response.data.data.isConnected) {\n        console.log('âœ… Integration Gmail is connected:', response.data.data.profile);\n        setGmailConnected(true);\n        setGmailProfile(response.data.data.profile);\n      } else {\n        console.log('âŒ Integration Gmail is not connected');\n        setGmailConnected(false);\n        setGmailProfile(null);\n      }\n    } catch (error) {\n      console.error('âŒ Error checking Integration Gmail connection:', error);\n      setGmailConnected(false);\n      setGmailProfile(null);\n    }\n  };\n\n  const checkFacebookConnection = async () => {\n    try {\n      console.log('ðŸ” Checking Facebook connection status...');\n\n      const response = await axiosInstance.get('/api/facebook/connection-status');\n\n      console.log('ðŸ“Š Facebook connection status response:', response.data);\n      console.log('ðŸ“Š Facebook connection data details:', JSON.stringify(response.data.data, null, 2));\n\n      if (response.data.success && response.data.data.connected) {\n        console.log('âœ… Facebook is connected, updating state to true');\n        setFacebookConnected(true);\n      } else {\n        console.log('âŒ Facebook is not connected, updating state to false');\n        console.log('ðŸ“Š credentials_count:', response.data.data?.credentials_count);\n        console.log('ðŸ“Š connected_pages_count:', response.data.data?.connected_pages_count);\n        setFacebookConnected(false);\n      }\n    } catch (error) {\n      console.error('âŒ Error checking Facebook connection:', error);\n      // Don't change state on error, just log it\n    }\n  };\n\n  // Check Facebook and Gmail connection status on component mount only\n  React.useEffect(() => {\n    checkFacebookConnection();\n    checkGmailConnection();\n    // Clear any stale localStorage results on mount\n    localStorage.removeItem('facebook_oauth_result');\n    localStorage.removeItem('gmail_oauth_result');\n  }, []);\n\n  // Handler for processing Facebook OAuth result\n  const handleFacebookOAuthResult = React.useCallback((data) => {\n    if (data.type === 'facebook_oauth_success') {\n      console.log('ðŸŽ‰ Facebook auth success received!', data);\n      setFacebookConnected(true);\n      console.log('âœ… setFacebookConnected(true) called - button should change now!');\n      toast.success('Facebook connected successfully!');\n      setActiveTab('facebook-pages');\n      console.log('âœ… Switched to facebook-pages tab');\n    }\n  }, []);\n\n  // Handler for processing Gmail OAuth result\n  const handleGmailOAuthResult = React.useCallback((data) => {\n    if (data.type === 'GMAIL_AUTH_SUCCESS') {\n      console.log('ðŸŽ‰ Gmail auth success received!', data);\n      setGmailConnected(true);\n      if (data.data) {\n        setGmailProfile({ email: data.data.email });\n      }\n      console.log('âœ… setGmailConnected(true) called - button should change now!');\n      toast.success(`Gmail connected successfully! (${data.data?.email || 'Connected'})`);\n      setShowGmailModal(false);\n    } else if (data.type === 'GMAIL_AUTH_ERROR') {\n      console.log('âŒ Gmail auth error received:', data);\n      toast.error(data.message || 'Failed to connect Gmail');\n      setShowGmailModal(false);\n    }\n  }, []);\n\n  // Listen for OAuth messages via multiple methods\n  React.useEffect(() => {\n    // Method 1: Listen for postMessage\n    const handleMessage = (event) => {\n      console.log('ðŸ”” Message received:', event.data, 'from origin:', event.origin);\n\n      if (!event.data || typeof event.data !== 'object') return;\n\n      if (event.data.type === 'facebook_oauth_success') {\n        handleFacebookOAuthResult(event.data);\n      } else if (event.data.type === 'GMAIL_AUTH_SUCCESS' || event.data.type === 'GMAIL_AUTH_ERROR') {\n        handleGmailOAuthResult(event.data);\n      }\n    };\n\n    // Method 2: Listen via BroadcastChannel for Facebook\n    let facebookChannel = null;\n    try {\n      facebookChannel = new BroadcastChannel('facebook_oauth_channel');\n      facebookChannel.onmessage = (event) => {\n        console.log('ðŸ” Received Facebook BroadcastChannel message:', event.data);\n        if (event.data && typeof event.data === 'object') {\n          handleFacebookOAuthResult(event.data);\n        }\n      };\n    } catch (e) {\n      console.log('âš ï¸ Facebook BroadcastChannel not supported');\n    }\n\n    // Method 3: Poll localStorage for Facebook results\n    const checkLocalStorage = () => {\n      try {\n        const fbResult = localStorage.getItem('facebook_oauth_result');\n        if (fbResult) {\n          const data = JSON.parse(fbResult);\n          if (data.timestamp && Date.now() - data.timestamp < 30000) {\n            console.log('ðŸ” Found Facebook localStorage result:', data);\n            localStorage.removeItem('facebook_oauth_result');\n            handleFacebookOAuthResult(data);\n          }\n        }\n      } catch (e) {\n        // Ignore parsing errors\n      }\n    };\n\n    const storageInterval = setInterval(checkLocalStorage, 500);\n\n    window.addEventListener('message', handleMessage);\n    console.log('âœ… Message listeners added for OAuth');\n\n    return () => {\n      window.removeEventListener('message', handleMessage);\n      if (facebookChannel) {\n        facebookChannel.close();\n      }\n      clearInterval(storageInterval);\n      console.log('ðŸ§¹ Message listeners removed');\n    };\n  }, [handleFacebookOAuthResult, handleGmailOAuthResult]);\n\n  const handleFacebookDisconnect = async () => {\n    try {\n      const response = await axiosInstance.delete('/api/facebook/disconnect');\n\n      if (response.data.success) {\n        setFacebookConnected(false);\n        setActiveTab('integrations');\n        toast.success('Facebook disconnected successfully');\n        console.log('Facebook disconnected successfully');\n      }\n    } catch (error) {\n      console.error('Error disconnecting Facebook:', error);\n      toast.error('Failed to disconnect Facebook');\n    }\n  };\n\n  // Auto-login function for testing (kept for backwards compatibility)\n  const performDemoLogin = async () => {\n    try {\n      const response = await fetch(`${import.meta.env.VITE_APP_BASE_URL}/api/auth/demo-login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: 'demo@example.com',\n          password: 'password'\n        })\n      });\n\n      const data = await response.json();\n      if (data.success && data.data.token) {\n        localStorage.setItem('token', data.data.token);\n        console.log('âœ… Demo login successful');\n        return data.data.token;\n      } else {\n        throw new Error('Demo login failed');\n      }\n    } catch (error) {\n      console.error('âŒ Demo login error:', error);\n      return null;\n    }\n  };\n\n  const handleFacebookConnect = async () => {\n    try {\n      console.log('ðŸ” Debug - Initiating Facebook OAuth...');\n\n      // Get OAuth URL from backend using axiosInstance (handles auth automatically)\n      const response = await axiosInstance.get('/api/auth/facebook/oauth-url');\n\n      console.log('ðŸ” Debug - Response data:', response.data);\n\n      if (response.data.success && response.data.data.authUrl) {\n        console.log('ðŸ” Debug - Opening OAuth URL:', response.data.data.authUrl);\n        window.open(response.data.data.authUrl, 'facebook-auth', 'width=600,height=600');\n      } else {\n        throw new Error(`Invalid OAuth URL response: ${response.data.message || 'No auth URL received'}`);\n      }\n    } catch (error) {\n      console.error('âŒ Error initiating Facebook OAuth:', error);\n\n      // Handle authentication errors\n      if (error.response?.status === 401 || error.response?.status === 403) {\n        alert('Your session has expired. Please log in again.');\n        window.location.href = '/#/login';\n        return;\n      }\n\n      alert(`Failed to start Facebook authentication: ${error.message}`);\n    }\n  };\n\n\n\n  // Gmail connect - open modal\n  const handleGmailConnect = () => {\n    console.log(\"ðŸ”„ Opening Gmail OAuth modal...\");\n    setShowGmailModal(true);\n  };\n\n  // Gmail disconnect (using separate Integration Gmail API)\n  const handleGmailDisconnect = async () => {\n    try {\n      console.log('ðŸ”„ Disconnecting Integration Gmail...');\n      const response = await axiosInstance.delete('/api/integration-gmail/auth/disconnect');\n\n      if (response.data.success) {\n        setGmailConnected(false);\n        setGmailProfile(null);\n        toast.success('Gmail disconnected successfully');\n        console.log('âœ… Integration Gmail disconnected successfully');\n      } else {\n        toast.error(response.data.message || 'Failed to disconnect Gmail');\n      }\n    } catch (error) {\n      console.error('âŒ Error disconnecting Integration Gmail:', error);\n      toast.error('Failed to disconnect Gmail');\n    }\n  };\n\n  // Gmail OAuth success callback\n  const handleGmailSuccess = (data) => {\n    console.log('ðŸŽ‰ Gmail OAuth success callback:', data);\n    setGmailConnected(true);\n    if (data?.email) {\n      setGmailProfile({ email: data.email });\n    }\n    setShowGmailModal(false);\n    // Re-check connection status from backend\n    setTimeout(() => {\n      checkGmailConnection();\n    }, 1000);\n  };\n\n  const integrations = [\n    {\n      description: \"Connect your location's Facebook Account\",\n      image: \"https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg\",\n      isConnected: facebookConnected,\n      onConnect: handleFacebookConnect,\n      onManage: handleFacebookDisconnect\n    },\n    {\n      description: gmailConnected && gmailProfile?.email\n        ? `Connected: ${gmailProfile.email}`\n        : \"Connect your location's Gmail Account\",\n      image: \"https://cdn-icons-png.flaticon.com/512/732/732200.png\",\n      isConnected: gmailConnected,\n      onConnect: handleGmailConnect,\n      onManage: handleGmailDisconnect\n    }\n  ];\n\n  return (\n    <Page className=\"app-shell-bg relative overflow-hidden\">\n      {/* Neon glow layer */}\n      <div aria-hidden className=\"absolute inset-0 pointer-events-none bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10\" />\n\n      <div className=\"relative z-10\">\n        <h4 className=\"text-2xl font-bold text-white mb-4\">Integrations</h4>\n\n        <div className=\"space-y-6\">\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full bg-transparent\">\n            <TabsList className=\"flex w-auto bg-transparent p-8\">\n              <TabsTrigger value=\"integrations\" className=\"flag-tab \">Integrations</TabsTrigger>\n              <TabsTrigger value=\"facebook-pages\" className=\"flag-tab\">Facebook Connected Pages</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"integrations\" className=\"space-y-10\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 \">\n                {integrations.map((integration, index) => (\n                  <IntegrationCard\n                    key={index}\n                    {...integration}\n                  />\n                ))}\n              </div>\n\n            </TabsContent>\n\n            <TabsContent value=\"facebook-pages\" className=\"space-y-6\">\n              <FacebookConnectedPages\n                isConnected={facebookConnected}\n                onDisconnect={handleFacebookDisconnect}\n              />\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Gmail OAuth Modal - uses separate Integration Gmail API */}\n        <GmailOAuthModal\n          isOpen={showGmailModal}\n          onClose={() => setShowGmailModal(false)}\n          onSuccess={handleGmailSuccess}\n          redirectPath=\"/integrations\"\n          useIntegrationApi={true}\n        />\n      </div>\n    </Page>\n  );\n};\n\nexport default Integrations;\n"],"names":["FacebookConnectedPages","isConnected","onDisconnect","selectedPage","setSelectedPage","useState","pages","setPages","forms","setForms","loading","setLoading","showFieldMapping","setShowFieldMapping","selectedForm","setSelectedForm","fieldMappings","setFieldMappings","crmFields","useEffect","fetchPages","fetchForms","response","axiosInstance","error","pageId","handleEditFields","form","handleSaveFieldMapping","toggleFormStatus","formId","currentStatus","newStatus","jsxs","jsx","e","page","ChevronDown","currentPage","p","Edit","X","question","index","field","AlertTriangle","IntegrationCard","description","image","onConnect","onManage","Card","CardContent","Button","Integrations","facebookConnected","setFacebookConnected","gmailConnected","setGmailConnected","gmailProfile","setGmailProfile","activeTab","setActiveTab","showGmailModal","setShowGmailModal","checkGmailConnection","checkFacebookConnection","_a","_b","React","handleFacebookOAuthResult","data","toast","handleGmailOAuthResult","handleMessage","event","facebookChannel","storageInterval","fbResult","handleFacebookDisconnect","handleFacebookConnect","handleGmailConnect","handleGmailDisconnect","handleGmailSuccess","integrations","Page","Tabs","TabsList","TabsTrigger","TabsContent","integration","GmailOAuthModal"],"mappings":"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"}