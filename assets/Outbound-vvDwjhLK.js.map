{"version":3,"file":"Outbound-vvDwjhLK.js","sources":["../../src/pages/Outbound/CampaignDetailsModal.tsx","../../src/pages/Outbound/Outbound.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Loader2, Phone, Users, Clock, CheckCircle, BarChart3, Download, Play, Eye } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\nimport {\n  getCampaignById,\n  getCampaignCalls,\n  type Campaign,\n  type CampaignCall\n} from \"@/api/services/outbound/campaignService\";\n\ninterface CampaignDetailsModalProps {\n  campaignId: string;\n  onClose: () => void;\n}\n\nexport function CampaignDetailsModal({ campaignId, onClose }: CampaignDetailsModalProps) {\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  // Fetch campaign details\n  const { data: campaignData, isLoading: campaignLoading } = useQuery({\n    queryKey: [\"campaign\", campaignId],\n    queryFn: () => getCampaignById(campaignId),\n    retry: 1,\n  });\n\n  // Fetch campaign calls\n  const { data: callsData, isLoading: callsLoading } = useQuery({\n    queryKey: [\"campaignCalls\", campaignId],\n    queryFn: () => getCampaignCalls(campaignId),\n    retry: 1,\n  });\n\n  const campaign: Campaign = campaignData?.data;\n  const calls: Record<string, CampaignCall> = callsData?.data || {};\n  const callsList = Object.values(calls);\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, { variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\", icon: React.ReactNode }> = {\n      scheduled: { variant: \"outline\", icon: <Clock className=\"h-3 w-3 mr-1\" /> },\n      \"in-progress\": { variant: \"default\", icon: <Play className=\"h-3 w-3 mr-1\" /> },\n      ended: { variant: \"secondary\", icon: <CheckCircle className=\"h-3 w-3 mr-1\" /> },\n    };\n    \n    const config = variants[status] || { variant: \"outline\", icon: null };\n    \n    return (\n      <Badge variant={config.variant} className=\"flex items-center\">\n        {config.icon}\n        {status === \"in-progress\" ? \"Running\" : status.charAt(0).toUpperCase() + status.slice(1)}\n      </Badge>\n    );\n  };\n\n  const getCallStatusBadge = (status: string) => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\n      queued: \"outline\",\n      ringing: \"secondary\",\n      \"in-progress\": \"default\",\n      ended: \"secondary\",\n      failed: \"destructive\",\n    };\n    return <Badge variant={variants[status] || \"outline\"}>{status}</Badge>;\n  };\n\n  const formatDuration = (seconds?: number) => {\n    if (!seconds) return \"0:00\";\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (campaignLoading) {\n    return (\n      <>\n        <DialogHeader>\n          <DialogTitle>Campaign Details</DialogTitle>\n        </DialogHeader>\n        <div className=\"flex items-center justify-center h-32\">\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\n        </div>\n      </>\n    );\n  }\n\n  if (!campaign) {\n    return (\n      <>\n        <DialogHeader>\n          <DialogTitle>Campaign Details</DialogTitle>\n        </DialogHeader>\n        <div className=\"text-center py-8\">\n          <p className=\"text-muted-foreground\">Campaign not found</p>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <DialogHeader>\n        <DialogTitle className=\"flex items-center gap-2\">\n          {campaign.name}\n          {getStatusBadge(campaign.status)}\n        </DialogTitle>\n        <DialogDescription>\n          Created on {new Date(campaign.createdAt).toLocaleDateString()}\n        </DialogDescription>\n      </DialogHeader>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"calls\">Calls</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <Users className=\"h-4 w-4\" />\n                  Total Calls\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {(campaign.callsCounterScheduled || 0) +\n                   (campaign.callsCounterQueued || 0) +\n                   (campaign.callsCounterInProgress || 0) +\n                   (campaign.callsCounterEnded || 0)}\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <CheckCircle className=\"h-4 w-4\" />\n                  Completed\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{campaign.callsCounterEnded || 0}</div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <BarChart3 className=\"h-4 w-4\" />\n                  Pick Up\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {campaign.callsCounterEnded > 0 \n                    ? `${Math.round(((campaign.callsCounterEnded - campaign.callsCounterEndedVoicemail) / campaign.callsCounterEnded) * 100)}%`\n                    : \"0%\"\n                  }\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <Phone className=\"h-4 w-4\" />\n                  Voicemail\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{campaign.callsCounterEndedVoicemail || 0}</div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Campaign Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Phone Number ID</p>\n                  <p className=\"text-sm\">{campaign.phoneNumberId}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Assistant ID</p>\n                  <p className=\"text-sm\">{campaign.assistantId || campaign.workflowId || \"N/A\"}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Created</p>\n                  <p className=\"text-sm\">{new Date(campaign.createdAt).toLocaleString()}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Last Updated</p>\n                  <p className=\"text-sm\">{new Date(campaign.updatedAt).toLocaleString()}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"calls\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Phone className=\"h-5 w-5\" />\n                Campaign Calls\n              </CardTitle>\n              <CardDescription>\n                Individual call details and outcomes\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {callsLoading ? (\n                <div className=\"flex items-center justify-center h-32\">\n                  <Loader2 className=\"h-8 w-8 animate-spin\" />\n                </div>\n              ) : (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Customer</TableHead>\n                      <TableHead>Phone Number</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Duration</TableHead>\n                      <TableHead>Started</TableHead>\n                      <TableHead>Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {callsList.length === 0 ? (\n                      <TableRow>\n                        <TableCell colSpan={6} className=\"text-center text-muted-foreground py-8\">\n                          No calls found for this campaign\n                        </TableCell>\n                      </TableRow>\n                    ) : (\n                      callsList.map((call) => (\n                        <TableRow key={call.id}>\n                          <TableCell>\n                            <div>\n                              <div className=\"font-medium\">{call.customer?.name || \"Unknown\"}</div>\n                              <div className=\"text-xs text-muted-foreground\">{call.customer?.email || \"-\"}</div>\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"font-mono\">{call.customer?.number || \"-\"}</TableCell>\n                          <TableCell>{getCallStatusBadge(call.status)}</TableCell>\n                          <TableCell>{formatDuration(call.duration)}</TableCell>\n                          <TableCell>\n                            {call.startedAt ? new Date(call.startedAt).toLocaleString() : \"-\"}\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"flex gap-2\">\n                              {call.transcript && (\n                                <Button size=\"sm\" variant=\"outline\" title=\"View Transcript\">\n                                  <Eye className=\"h-3 w-3\" />\n                                </Button>\n                              )}\n                              {call.recording && (\n                                <Button size=\"sm\" variant=\"outline\" title=\"Download Recording\">\n                                  <Download className=\"h-3 w-3\" />\n                                </Button>\n                              )}\n                            </div>\n                          </TableCell>\n                        </TableRow>\n                      ))\n                    )}\n                  </TableBody>\n                </Table>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"analytics\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Call Status Distribution</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Scheduled</span>\n                    <span className=\"text-sm font-medium\">{campaign.callsCounterScheduled || 0}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Queued</span>\n                    <span className=\"text-sm font-medium\">{campaign.callsCounterQueued || 0}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">In Progress</span>\n                    <span className=\"text-sm font-medium\">{campaign.callsCounterInProgress || 0}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Completed</span>\n                    <span className=\"text-sm font-medium\">{campaign.callsCounterEnded || 0}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Voicemail</span>\n                    <span className=\"text-sm font-medium\">{campaign.callsCounterEndedVoicemail || 0}</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Performance Metrics</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Success Rate</span>\n                    <span className=\"text-sm font-medium\">\n                      {campaign.callsCounterEnded > 0 \n                        ? `${Math.round(((campaign.callsCounterEnded - campaign.callsCounterEndedVoicemail) / campaign.callsCounterEnded) * 100)}%`\n                        : \"0%\"\n                      }\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Completion Rate</span>\n                    <span className=\"text-sm font-medium\">\n                      {campaign.customers?.length > 0 \n                        ? `${Math.round((campaign.callsCounterEnded / campaign.customers.length) * 100)}%`\n                        : \"0%\"\n                      }\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm\">Avg Duration</span>\n                    <span className=\"text-sm font-medium\">\n                      {callsList.length > 0 \n                        ? formatDuration(Math.round(callsList.reduce((sum, call) => sum + (call.duration || 0), 0) / callsList.length))\n                        : \"0:00\"\n                      }\n                    </span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      <div className=\"flex justify-end pt-4 border-t\">\n        <Button onClick={onClose}>Close</Button>\n      </div>\n    </>\n  );\n}\n","import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Loader2, Plus, Play, Pause, Square, BarChart3, Phone, Users, Clock, CheckCircle, AlertCircle, Trash2, Eye, RefreshCw } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport Page from \"@/components/Page\";\nimport { CampaignDetailsModal } from \"./CampaignDetailsModal\";\nimport axiosInstance from \"@/api/axios/axiosInstance\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { usePermissions } from \"@/context/PermissionContext\";\n\nimport {\n  getAllCampaigns,\n  launchCampaign,\n  pauseCampaign,\n  resumeCampaign,\n  cancelCampaign,\n  deleteCampaign,\n  testVapiConnection,\n  type Campaign\n} from \"@/api/services/outbound/campaignService\";\n\nconst Outbound = () => {\n  const navigate = useNavigate();\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\n  const [selectedCampaign, setSelectedCampaign] = useState<Campaign | null>(null);\n  const [showInsufficientCreditsModal, setShowInsufficientCreditsModal] = useState(false);\n  const [currentBalance, setCurrentBalance] = useState(0);\n\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const { isSuperAdmin } = usePermissions();\n\n  // Fetch campaigns\n  const { data: campaignsData, isLoading: campaignsLoading, error: campaignsError } = useQuery({\n    queryKey: [\"outboundCampaigns\"],\n    queryFn: () => getAllCampaigns(),\n    retry: (failureCount, error: any) => {\n      // Don't retry for expected scenarios (normal for new users)\n      const expectedStatuses = [404, 204, 402]; // 402 = Payment Required (no credits)\n      if (expectedStatuses.includes(error?.response?.status)) {\n        return false;\n      }\n      return failureCount < 1; // Retry once for other errors\n    },\n  });\n\n  // Launch campaign mutation\n  const launchMutation = useMutation({\n    mutationFn: launchCampaign,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n      toast.success(\"Campaign launched successfully\");\n    },\n    onError: (error: any) => {\n      const message = error.response?.data?.message || \"Failed to launch campaign\";\n      const currentStatus = error.response?.data?.currentStatus;\n\n      if (currentStatus === \"in-progress\") {\n        toast.info(\"Campaign is already running\");\n      } else {\n        toast.error(message);\n      }\n\n      // Refresh data to show current status\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    },\n  });\n\n  // Pause campaign mutation\n  const pauseMutation = useMutation({\n    mutationFn: pauseCampaign,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    },\n  });\n\n  // Resume campaign mutation\n  const resumeMutation = useMutation({\n    mutationFn: resumeCampaign,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    },\n  });\n\n  // Cancel campaign mutation\n  const cancelMutation = useMutation({\n    mutationFn: cancelCampaign,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    },\n  });\n\n  // Delete campaign mutation\n  const deleteMutation = useMutation({\n    mutationFn: deleteCampaign,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    },\n  });\n\n  const handleLaunchCampaign = (campaignId: string) => {\n    launchMutation.mutate(campaignId);\n  };\n\n  const handlePauseCampaign = (campaignId: string) => {\n    pauseMutation.mutate(campaignId);\n  };\n\n  const handleResumeCampaign = (campaignId: string) => {\n    resumeMutation.mutate(campaignId);\n  };\n\n  const handleCancelCampaign = (campaignId: string) => {\n    if (confirm(\"Are you sure you want to cancel this campaign?\")) {\n      cancelMutation.mutate(campaignId);\n    }\n  };\n\n  const handleDeleteCampaign = (campaignId: string) => {\n    if (confirm(\"Are you sure you want to delete this campaign? This action cannot be undone.\")) {\n      deleteMutation.mutate(campaignId);\n    }\n  };\n\n  const handleViewCampaign = (campaign: Campaign) => {\n    setSelectedCampaign(campaign);\n    setIsDetailsModalOpen(true);\n  };\n\n  const handleTestVapi = async (campaignId?: string) => {\n    try {\n      const result = await testVapiConnection(campaignId);\n      console.log(\"VAPI Test Result:\", result);\n      toast.success(\"VAPI connection test successful\");\n    } catch (error) {\n      console.error(\"VAPI Test Error:\", error);\n      toast.error(\"VAPI connection test failed\");\n    }\n  };\n\n  const handleRefresh = () => {\n    queryClient.invalidateQueries({ queryKey: [\"outboundCampaigns\"] });\n    toast.success(\"Campaigns refreshed\");\n  };\n\n  const handleCreateCampaign = async () => {\n    // Super admins have unlimited access\n    if (isSuperAdmin) {\n      navigate(\"/outbound/create-campaign\");\n      return;\n    }\n\n    try {\n      // Check credit balance for regular users\n      const response = await axiosInstance.get('/api/credits/balance');\n      const balance = response.data.data;\n\n      if (!balance || parseFloat(balance.available_credits) < 1) {\n        // Store current balance and show insufficient credits modal\n        setCurrentBalance(balance?.available_credits || 0);\n        setShowInsufficientCreditsModal(true);\n        return;\n      }\n\n      // User has sufficient credits, proceed to create campaign page\n      navigate(\"/outbound/create-campaign\");\n    } catch (error) {\n      console.error('Error checking credit balance:', error);\n      toast.error('Unable to verify credit balance. Please try again.');\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, { variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\", icon: React.ReactNode, label: string }> = {\n      scheduled: { variant: \"outline\", icon: <Clock className=\"h-3 w-3 mr-1\" />, label: \"Scheduled\" },\n      \"in-progress\": { variant: \"default\", icon: <Play className=\"h-3 w-3 mr-1\" />, label: \"Running\" },\n      ended: { variant: \"secondary\", icon: <CheckCircle className=\"h-3 w-3 mr-1\" />, label: \"Ended\" },\n    };\n\n    const config = variants[status] || {\n      variant: \"outline\",\n      icon: <AlertCircle className=\"h-3 w-3 mr-1\" />,\n      label: status.charAt(0).toUpperCase() + status.slice(1)\n    };\n\n    return (\n      <Badge variant={config.variant} className=\"flex items-center\">\n        {config.icon}\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const campaigns = Array.isArray(campaignsData?.data) ? campaignsData.data : [];\n\n  if (campaignsError) {\n    const errorStatus = (campaignsError as any)?.response?.status;\n    const isInsufficientCredits = errorStatus === 402;\n\n    return (\n      <Page>\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight\">Outbound</h1>\n            <p className=\"text-muted-foreground\">\n              Create and manage outbound campaigns\n            </p>\n          </div>\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center\">\n                {isInsufficientCredits ? (\n                  <>\n                    <AlertCircle className=\"h-12 w-12 text-orange-500 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">Insufficient Credits</h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      You need credits to access campaign features. Please purchase credits to continue.\n                    </p>\n                    <div className=\"flex gap-2 justify-center\">\n                      <Button onClick={() => navigate('/credits/purchase')} className=\"bg-orange-500 hover:bg-orange-600\">\n                        Purchase Credits\n                      </Button>\n                      <Button variant=\"outline\" onClick={() => window.location.reload()}>\n                        <RefreshCw className=\"h-4 w-4 mr-2\" />\n                        Refresh\n                      </Button>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <p className=\"text-muted-foreground mb-4\">\n                      Unable to connect to the backend API. Please ensure the backend server is running.\n                    </p>\n                    <Button onClick={() => window.location.reload()}>\n                      Retry Connection\n                    </Button>\n                  </>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </Page>\n    );\n  }\n\n  return (\n    <Page>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight\">Outbound</h1>\n            <p className=\"text-muted-foreground\">\n              Create and manage outbound campaigns\n            </p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={handleRefresh}\n              title=\"Refresh Campaigns\"\n            >\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Refresh\n            </Button>\n           \n            <Button\n              className=\"bg-teal-600 hover:bg-teal-700 text-white\"\n              onClick={handleCreateCampaign}\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Campaign\n            </Button>\n          </div>\n        </div>\n\n        {/* Campaigns Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Phone className=\"h-5 w-5\" />\n              Campaigns\n            </CardTitle>\n            <CardDescription>\n              Manage your outbound call campaigns\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {campaignsLoading ? (\n              <div className=\"flex items-center justify-center h-32\">\n                <Loader2 className=\"h-8 w-8 animate-spin\" />\n              </div>\n            ) : (\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Campaign Name</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Total Calls</TableHead>\n                    <TableHead>Completed</TableHead>\n                    <TableHead>Pick Up</TableHead>\n                    {/* <TableHead>Voicemail</TableHead> */}\n                    <TableHead>Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {campaigns.length === 0 ? (\n                    <TableRow>\n                      <TableCell colSpan={7} className=\"text-center text-muted-foreground py-8\">\n                        No campaigns found. Create your first campaign to get started.\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    campaigns.map((campaign: Campaign) => (\n                      <TableRow key={campaign.id}>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium\">{campaign.name}</div>\n                            <div className=\"text-xs text-muted-foreground\">\n                              Created on {new Date(campaign.createdAt).toLocaleDateString()}\n                            </div>\n                          </div>\n                        </TableCell>\n                        <TableCell>{getStatusBadge(campaign.status)}</TableCell>\n                        <TableCell>\n                          <div className=\"flex items-center gap-1\">\n                            <Users className=\"h-3 w-3\" />\n                            {(campaign.callsCounterScheduled || 0) +\n                             (campaign.callsCounterQueued || 0) +\n                             (campaign.callsCounterInProgress || 0) +\n                             (campaign.callsCounterEnded || 0)}\n                            {campaign.status === \"in-progress\" && (\n                              <span className=\"ml-2 text-xs text-green-600 font-medium\">\n                                ({campaign.callsCounterInProgress || 0} active)\n                              </span>\n                            )}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex items-center gap-1\">\n                            <CheckCircle className=\"h-3 w-3\" />\n                            {campaign.callsCounterEnded || 0}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex items-center gap-1\">\n                            <BarChart3 className=\"h-3 w-3\" />\n                            {campaign.callsCounterEnded > 0 \n                              ? `${Math.round(((campaign.callsCounterEnded - campaign.callsCounterEndedVoicemail) / campaign.callsCounterEnded) * 100)}%`\n                              : \"0%\"\n                            }\n                          </div>\n                        </TableCell>\n                        {/* <TableCell>\n                          <div className=\"flex items-center gap-1\">\n                            <Phone className=\"h-3 w-3\" />\n                            {campaign.callsCounterEndedVoicemail || 0}\n                          </div>\n                        </TableCell> */}\n                        <TableCell>\n                          <div className=\"flex gap-2\">\n                            {campaign.status === \"scheduled\" && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleLaunchCampaign(campaign.id)}\n                                disabled={launchMutation.isPending}\n                                title=\"Launch Campaign\"\n                              >\n                                {launchMutation.isPending ? <Loader2 className=\"h-3 w-3 animate-spin\" /> : <Play className=\"h-3 w-3\" />}\n                              </Button>\n                            )}\n                            {campaign.status === \"in-progress\" && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handlePauseCampaign(campaign.id)}\n                                disabled={pauseMutation.isPending}\n                                title=\"Pause Campaign\"\n                              >\n                                {pauseMutation.isPending ? <Loader2 className=\"h-3 w-3 animate-spin\" /> : <Pause className=\"h-3 w-3\" />}\n                              </Button>\n                            )}\n                            {(campaign.status === \"scheduled\" || campaign.status === \"in-progress\") && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleCancelCampaign(campaign.id)}\n                                disabled={cancelMutation.isPending}\n                                title=\"Cancel Campaign\"\n                              >\n                                {cancelMutation.isPending ? <Loader2 className=\"h-3 w-3 animate-spin\" /> : <Square className=\"h-3 w-3\" />}\n                              </Button>\n                            )}\n                            \n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handleViewCampaign(campaign)}\n                              title=\"View Details\"\n                            >\n                              <Eye className=\"h-3 w-3\" />\n                            </Button>\n                            {campaign.status === \"ended\" && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleDeleteCampaign(campaign.id)}\n                                disabled={deleteMutation.isPending}\n                                title=\"Delete Campaign\"\n                              >\n                                {deleteMutation.isPending ? <Loader2 className=\"h-3 w-3 animate-spin\" /> : <Trash2 className=\"h-3 w-3\" />}\n                              </Button>\n                            )}\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  )}\n                </TableBody>\n              </Table>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Campaign Details Modal */}\n        {selectedCampaign && (\n          <Dialog open={isDetailsModalOpen} onOpenChange={setIsDetailsModalOpen}>\n            <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n              <CampaignDetailsModal\n                campaignId={selectedCampaign.id}\n                onClose={() => setIsDetailsModalOpen(false)}\n              />\n            </DialogContent>\n          </Dialog>\n        )}\n\n        {/* Insufficient Credits Modal */}\n        <Dialog open={showInsufficientCreditsModal} onOpenChange={setShowInsufficientCreditsModal}>\n          <DialogContent className=\"max-w-md\">\n            <div className=\"text-center p-6\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"p-3 bg-orange-100 rounded-full\">\n                  <AlertCircle className=\"h-8 w-8 text-orange-600\" />\n                </div>\n              </div>\n\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                Insufficient Credits\n              </h3>\n\n              <p className=\"text-gray-600 mb-6\">\n                You need at least 1 credit to use campaign creation.\n                <span className=\"block mt-1\">\n                  Current balance: {currentBalance} credits\n                </span>\n              </p>\n\n              <div className=\"space-y-3\">\n                {/* <Button\n                  onClick={() => {\n                    setShowInsufficientCreditsModal(false);\n                    navigate('/credits/purchase');\n                  }}\n                  className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\"\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Purchase Credits\n                </Button> */}\n\n                {/* <Button\n                  variant=\"outline\"\n                  onClick={() => setShowInsufficientCreditsModal(false)}\n                  className=\"w-full\"\n                >\n                  Cancel\n                </Button> */}\n\n                <p className=\"text-xs text-gray-500\">\n                  Credits are added instantly after purchase\n                </p>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </Page>\n  );\n};\n\nexport default Outbound;\n"],"names":["CampaignDetailsModal","campaignId","onClose","activeTab","setActiveTab","useState","campaignData","campaignLoading","useQuery","getCampaignById","callsData","callsLoading","getCampaignCalls","campaign","calls","callsList","getStatusBadge","status","config","jsx","Clock","Play","CheckCircle","Badge","getCallStatusBadge","variants","formatDuration","seconds","mins","secs","jsxs","Fragment","DialogHeader","DialogTitle","Loader2","DialogDescription","Tabs","TabsList","TabsTrigger","TabsContent","Card","CardHeader","CardTitle","Users","CardContent","BarChart3","Phone","CardDescription","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","call","_a","_b","_c","Button","Eye","Download","sum","Outbound","navigate","useNavigate","isDetailsModalOpen","setIsDetailsModalOpen","selectedCampaign","setSelectedCampaign","showInsufficientCreditsModal","setShowInsufficientCreditsModal","currentBalance","setCurrentBalance","queryClient","useQueryClient","user","useAuth","isSuperAdmin","usePermissions","campaignsData","campaignsLoading","campaignsError","getAllCampaigns","failureCount","error","launchMutation","useMutation","launchCampaign","toast","message","_d","pauseMutation","pauseCampaign","resumeCampaign","cancelMutation","cancelCampaign","deleteMutation","deleteCampaign","handleLaunchCampaign","handlePauseCampaign","handleCancelCampaign","handleDeleteCampaign","handleViewCampaign","handleRefresh","handleCreateCampaign","balance","axiosInstance","AlertCircle","campaigns","isInsufficientCredits","Page","RefreshCw","Plus","Pause","Square","Trash2","Dialog","DialogContent"],"mappings":"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"}