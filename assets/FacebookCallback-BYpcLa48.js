import{j as e}from"./ui-Bw4PqZaR.js";import{r}from"./vendor-DG599jyl.js";import{u}from"./router-BnJytTjr.js";const f=()=>{const[o,t]=r.useState("processing"),[l,s]=r.useState("Processing Facebook connection...");return u(),r.useEffect(()=>{(async()=>{try{const c=new URLSearchParams(window.location.search),n=c.get("code"),a=c.get("error");if(a){t("error"),s(`Facebook connection failed: ${a}`),setTimeout(()=>{window.close()},3e3);return}if(n){t("success"),s("Facebook connected successfully! Fetching your pages...");const i=await fetch("/api/facebook/callback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n})});if(i.ok){const d=await i.json();window.opener&&window.opener.postMessage({type:"FACEBOOK_AUTH_SUCCESS",data:d},window.location.origin),s("Connection successful! Closing window..."),setTimeout(()=>{window.close()},2e3)}else throw new Error("Failed to process Facebook callback")}else t("error"),s("No authorization code received from Facebook"),setTimeout(()=>{window.close()},3e3)}catch(c){console.error("Facebook callback error:",c),t("error"),s("Failed to connect Facebook account"),setTimeout(()=>{window.close()},3e3)}})()},[]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-500 flex items-center justify-center",children:[o==="processing"&&e.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o==="success"&&e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o==="error"&&e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[o==="processing"&&"Connecting Facebook",o==="success"&&"Connection Successful",o==="error"&&"Connection Failed"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:l}),o==="processing"&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full animate-pulse",style:{width:"60%"}})})]})})})};export{f as default};
//# sourceMappingURL=FacebookCallback-BYpcLa48.js.map
