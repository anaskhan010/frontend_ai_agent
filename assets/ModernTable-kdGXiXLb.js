import{j as e,b6 as F,m as I,l as L,bt as U,b as z}from"./ui-DHRUPyaA.js";import{r as c,b as W}from"./vendor-DG599jyl.js";import{T as q,a as G,b as g,c as w,d as J,e as d}from"./table-DhtUMdwT.js";import{D as S,a as k,b as D,f as T,d as K,e as Q}from"./dropdown-menu-BDAlliZC.js";import{B as M,c as h}from"./button-D7rqocXn.js";function re({data:i,columns:x,actions:p,onRowClick:j,isSelectable:f=!1,isLoading:b=!1,emptyState:A,showColumnSelection:E=!1}){const[o,y]=c.useState(null),[n,u]=c.useState(null),[O,V]=c.useState(new Set),[B,m]=c.useState(new Set);c.useEffect(()=>{m(new Set)},[i]),c.useEffect(()=>()=>{m(new Set)},[]);const[l,N]=c.useState(x.reduce((s,r)=>({...s,[r.accessor]:!0}),{})),H=s=>{o===s?n==="asc"?u("desc"):n==="desc"?(u(null),y(null)):u("asc"):(y(s),u("asc"))},v=W.useMemo(()=>!o||!n?i:[...i].sort((s,r)=>{const a=s[o],t=r[o];return a===t?0:typeof a=="string"&&typeof t=="string"?n==="asc"?a.localeCompare(t):t.localeCompare(a):a<t?n==="asc"?-1:1:n==="asc"?1:-1}),[i,o,n]),P=(s,r)=>{r.stopPropagation(),V(a=>{const t=new Set(a);return t.has(s)?t.delete(s):t.add(s),t})},R=s=>{s.is_deleted||j&&j(s)};if(i.length===0&&!b)return e.jsx("div",{className:"mt-6 rounded-lg border border-border/50 bg-card shadow-sm overflow-hidden",children:e.jsx("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:A||e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-1",children:"No data available"}),e.jsx("p",{className:"text-muted-foreground",children:"No items found. Try adjusting your filters or add a new item."})]})})});const _=()=>e.jsxs(S,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"ml-auto h-8 flex items-center gap-1 text-xs",children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Columns"]})}),e.jsxs(D,{align:"end",className:"w-[180px]",children:[e.jsx(T,{checked:Object.values(l).every(Boolean),onCheckedChange:s=>{const r={...l};Object.keys(r).forEach(a=>{r[a]=s}),N(r)},className:"cursor-pointer",children:"Show All"}),e.jsx(K,{}),x.map(s=>e.jsx(T,{checked:l[s.accessor],onCheckedChange:r=>{N(a=>({...a,[s.accessor]:r}))},className:"cursor-pointer",children:s.header},s.header))]})]});return e.jsxs("div",{className:"mt-6 rounded-lg border border-gray-200 bg-white shadow-sm overflow-hidden",children:[E&&e.jsx("div",{className:"px-4 py-2 flex justify-end border-b border-gray-200",children:e.jsx(_,{})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(G,{className:"bg-gray-50",children:e.jsxs(g,{className:"hover:bg-transparent border-b border-gray-200",children:[f&&e.jsx(w,{className:"w-[40px] text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary/30",onChange:()=>{}})})}),x.map(s=>l[s.accessor]&&e.jsx(w,{className:h("px-4 py-3 text-left text-xs font-medium text-gray-500 tracking-wider",s.sortable&&"cursor-pointer select-none",s.className),onClick:()=>s.sortable&&H(s.accessor),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:s.header}),s.sortable&&e.jsx("span",{className:o===s.accessor?"text-primary":"text-gray-400",children:o===s.accessor?n==="asc"?e.jsx(I,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"}):e.jsx(U,{className:"h-3 w-3"})})]})},s.header)),p&&e.jsx(w,{className:"w-[100px] px-4 py-3 text-center text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),e.jsx(J,{children:b?Array.from({length:5}).map((s,r)=>e.jsxs(g,{className:"animate-pulse",children:[f&&e.jsx(d,{className:"w-[40px] text-center",children:e.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded mx-auto"})}),x.map((a,t)=>l[a.accessor]&&e.jsx(d,{className:h("px-4 py-4",a.header.includes("Total")||a.header==="Price"?"text-right":""),children:e.jsx("div",{className:h("h-4 bg-gray-200 rounded",a.header.includes("Total")||a.header==="Price"?"w-1/2 ml-auto":"w-3/4")})},`loading-cell-${t}`)),p&&e.jsx(d,{className:"w-[100px] px-4 py-4 text-center",children:e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-full mx-auto"})})]},`loading-${r}`)):v.map(s=>e.jsxs(g,{className:h("border-b border-gray-100 transition-colors",j&&!s.is_deleted&&"cursor-pointer hover:bg-gray-50",s.is_deleted&&"opacity-50 cursor-not-allowed hover:bg-transparent"),onClick:()=>R(s),children:[f&&e.jsx(d,{className:"w-[40px] text-center",onClick:r=>r.stopPropagation(),children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary/30",checked:O.has(s.id),onChange:r=>P(s.id,r)})})}),x.map((r,a)=>l[r.accessor]&&e.jsx(d,{className:h("px-4 py-4 text-sm",r.className,typeof s[r.accessor]=="number"&&"text-right"),children:r.cell?r.cell(s[r.accessor],s,v.indexOf(s)):String(s[r.accessor])},`${s.id}-${String(r.accessor)}`)),p&&e.jsx(d,{className:"w-[100px] px-4 py-4 text-center",onClick:r=>r.stopPropagation(),children:e.jsx("div",{className:"flex items-center justify-center space-x-2",children:e.jsxs(S,{open:B.has(s.id),onOpenChange:r=>{m(a=>{const t=new Set(a);return r?t.add(s.id):t.delete(s.id),t})},children:[e.jsx(k,{asChild:!0,children:e.jsx(M,{variant:"ghost",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100","aria-label":"Open menu",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsx(D,{align:"end",className:"w-[160px]",onCloseAutoFocus:r=>{r.preventDefault()},children:p.filter(r=>!r.condition||r.condition(s)).map((r,a)=>e.jsxs(Q,{onClick:t=>{t.preventDefault(),m($=>{const C=new Set($);return C.delete(s.id),C}),setTimeout(()=>{r.onClick(s)},50)},className:"cursor-pointer",children:[e.jsx("span",{className:"mr-2 h-4 w-4 text-gray-500",children:r.icon}),e.jsx("span",{children:r.label})]},a))})]})})})]},s.id))})]})})]})}export{re as M};
//# sourceMappingURL=ModernTable-kdGXiXLb.js.map
