import{j as e,b4 as v,D as K,aA as S,am as o,N as ce,K as de,aT as xe,aW as B,y as me,H as oe,ar as he,av as je,al as pe,d as ue,F as ge}from"./ui-BZ34e_bG.js";import{r as i}from"./vendor-DG599jyl.js";import{C as t,b as n,c as r,a}from"./card-BYrCuzD5.js";import{B as l}from"./button-Cm3qqFtR.js";import{B as P}from"./badge-CiNZHaLO.js";import{I as C}from"./input-DmGou_SQ.js";import{D as M,a as O,b as z,c as Q,d as $,e as ye}from"./dialog-Dr0dXxlM.js";import{S as F,a as E,b as A,c as q,d as T}from"./select-DZgTcSvR.js";import{L as d}from"./label-C6Ng9AKs.js";import{T as Ne}from"./textarea-CkpLCUXs.js";import{u as fe,b as h,c as be}from"./query-BwaCLewj.js";import{t as c}from"./index-glgaGrA-.js";import{a as we,g as ve,b as Se,e as Pe}from"./studyParticipantService-DZIwkrQW.js";import{a as Ce}from"./clinicalStudyService-D73DK-ob.js";import"./index-HDeFwIcs.js";import"./index-3J7IwK8P.js";import"./router-BavLd_S0.js";const Je=()=>{const[Fe,Ee]=i.useState(""),[H,m]=i.useState(!1),[R,j]=i.useState(!1),[L,p]=i.useState(""),[k,u]=i.useState(""),[U,W]=i.useState(!1),[G,J]=i.useState(!1),[Ae,_]=i.useState(null),D=fe(),{data:g,isLoading:X,error:Y}=h({queryKey:["studyParticipants"],queryFn:we,retry:1}),{data:y,isLoading:qe}=h({queryKey:["studyParticipantStats"],queryFn:ve,retry:1}),{data:N,isLoading:Te}=h({queryKey:["availablePatients"],queryFn:Se,retry:1}),{data:f,isLoading:Le}=h({queryKey:["clinicalStudies"],queryFn:Ce,retry:1}),V=(g==null?void 0:g.data)||[],x=(y==null?void 0:y.data)||{total:0,screening:0,enrolled:0,completed:0,withdrawn:0,screenFailed:0},Z=(N==null?void 0:N.data)||[],b=(f==null?void 0:f.data)||[];be({mutationFn:Pe,onSuccess:()=>{c.success("Patient enrolled successfully"),D.invalidateQueries({queryKey:["studyParticipants"]}),D.invalidateQueries({queryKey:["studyParticipantStats"]}),m(!1),p(""),u("")},onError:s=>{var w,I;c.error(((I=(w=s.response)==null?void 0:w.data)==null?void 0:I.message)||"Failed to enroll patient")}});const ee=s=>{c.info(`Viewing participants for study: ${s.name}`)},se=()=>{J(!G)},te=()=>{W(!U)},ae=s=>{_(s),c.info(`Viewing details for participant: ${s.patient_name}`)},le=s=>{_(s),c.info(`Editing participant: ${s.patient_name}`)},ie=()=>{if(!L||!k){c.error("Please select both study and patient");return}c.success("Patient enrolled successfully"),m(!1),p(""),u("")},ne=()=>{c.success("New patient added successfully"),j(!1)},re=s=>({screening:"bg-yellow-100 text-yellow-800",enrolled:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",withdrawn:"bg-red-100 text-red-800",screen_failed:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Study Participants"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage participant enrollment and study assignments"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(M,{open:H,onOpenChange:m,children:[e.jsx(O,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Enroll from Patients"]})}),e.jsxs(z,{className:"max-w-md",children:[e.jsx(Q,{children:e.jsx($,{children:"Enroll Patient in Study"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"patient",children:"Select Patient"}),e.jsxs(F,{value:k,onValueChange:u,children:[e.jsx(E,{children:e.jsx(A,{placeholder:"Choose patient"})}),e.jsx(q,{children:Z.map(s=>e.jsxs(T,{value:s.id.toString(),children:[s.name," - ",s.status]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"study",children:"Select Study"}),e.jsxs(F,{value:L,onValueChange:p,children:[e.jsx(E,{children:e.jsx(A,{placeholder:"Choose study"})}),e.jsx(q,{children:b.map(s=>e.jsxs(T,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"notes",children:"Enrollment Notes"}),e.jsx(Ne,{id:"notes",placeholder:"Enter any notes about enrollment",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(l,{onClick:ie,children:"Enroll Patient"})]})]})]})]}),e.jsxs(M,{open:R,onOpenChange:j,children:[e.jsx(O,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Add New Patient"]})}),e.jsxs(z,{className:"max-w-md","aria-describedby":"patient-form-description",children:[e.jsxs(Q,{children:[e.jsx($,{children:"Add New Patient"}),e.jsx(ye,{id:"patient-form-description",children:"Fill out the form below to add a new patient to the study. All required fields must be completed."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"patientName",children:"Full Name"}),e.jsx(C,{id:"patientName",placeholder:"Enter patient name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"patientEmail",children:"Email"}),e.jsx(C,{id:"patientEmail",type:"email",placeholder:"patient@email.com"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"patientPhone",children:"Phone"}),e.jsx(C,{id:"patientPhone",placeholder:"+1-555-0123"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"patientStudy",children:"Assign to Study"}),e.jsxs(F,{children:[e.jsx(E,{children:e.jsx(A,{placeholder:"Choose study (optional)"})}),e.jsx(q,{children:b.map(s=>e.jsx(T,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(l,{onClick:ne,children:"Add Patient"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.total})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Screening"}),e.jsx(o,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.screening})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Enrolled"}),e.jsx(S,{className:"h-4 w-4 text-green-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.enrolled})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Completed"}),e.jsx(o,{className:"h-4 w-4 text-blue-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.completed})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Withdrawn"}),e.jsx(o,{className:"h-4 w-4 text-red-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.withdrawn})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Screen Failed"}),e.jsx(o,{className:"h-4 w-4 text-gray-500"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.screenFailed})})]})]}),e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(r,{children:"Enrollment by Study"})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Study Code: ",s.code]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[s.participants,"/",s.target]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Participants"})]}),e.jsxs("div",{className:"w-32",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(s.participants/s.target*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.participants/s.target*100}%`}})})]}),e.jsx(P,{className:s.status==="Recruiting"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",children:s.status}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>ee(s),children:"View Participants"})]})]},s.id))})})]}),e.jsxs(t,{children:[e.jsx(n,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(r,{children:"All Participants"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:se,children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Search"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:te,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]})}),e.jsx(a,{children:X?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(xe,{className:"h-8 w-8 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading participants..."})]}):Y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"h-12 w-12 text-red-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Participants"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load study participants. Please try again."})]}):V.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Participants Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No study participants have been enrolled yet."}),e.jsxs(l,{onClick:()=>m(!0),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Enroll First Participant"]})]}):e.jsx("div",{className:"space-y-4",children:V.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.patient_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Participant ID: ",s.participant_id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:re(s.enrollment_status),children:s.enrollment_status}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>ae(s),children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>le(s),children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.patient_email})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(je,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.patient_phone})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(pe,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enrolled"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.enrollment_date})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Site"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.site})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Study Information:"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{variant:"outline",children:s.study_code}),e.jsx("span",{className:"text-sm text-gray-600",children:s.study}),e.jsxs("span",{className:"text-sm text-gray-500",children:["PI: ",s.pi]})]})]}),s.notes&&e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.notes})]})]},s.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(t,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(a,{className:"p-6 text-center",children:[e.jsx(v,{className:"h-8 w-8 text-blue-600 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Enroll from Patients"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select qualified patients from your database and enroll them in studies"})]})}),e.jsx(t,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(a,{className:"p-6 text-center",children:[e.jsx(K,{className:"h-8 w-8 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Add New Participant"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manually add a new participant and assign them to a study"})]})}),e.jsx(t,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(a,{className:"p-6 text-center",children:[e.jsx(ge,{className:"h-8 w-8 text-purple-600 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Import Participants"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bulk import participants from CSV or Excel files"})]})})]}),e.jsx(t,{className:"border-yellow-200 bg-yellow-50",children:e.jsxs(a,{className:"flex items-center space-x-3 pt-6",children:[e.jsx(B,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800",children:"Study Participants System"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"This is a preview of the Study Participants management system. Full functionality including participant enrollment, study assignment, status tracking, and integration with the patient database will be implemented in the next phase."})]})]})})]})};export{Je as default};
//# sourceMappingURL=StudyParticipants-e70912Uv.js.map
