{"version":3,"file":"recordingService-BoQ0z8MI.js","sources":["../../src/components/AudioPlayer.tsx","../../src/api/services/recordings/recordingService.ts"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { \n  Play, \n  Pause, \n  Volume2, \n  VolumeX, \n  SkipBack, \n  SkipForward,\n  Download,\n  Share2,\n  MoreHorizontal\n} from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\n\ninterface AudioPlayerProps {\n  src?: string;\n  title?: string;\n  duration?: string;\n  className?: string;\n  onPlay?: () => void;\n  onPause?: () => void;\n  onDownload?: () => void;\n  onShare?: () => void;\n  showControls?: boolean;\n  autoPlay?: boolean;\n  compact?: boolean;\n}\n\nconst AudioPlayer: React.FC<AudioPlayerProps> = ({\n  src,\n  title = \"Audio Recording\",\n  duration = \"00:00\",\n  className,\n  onPlay,\n  onPause,\n  onDownload,\n  onShare,\n  showControls = true,\n  autoPlay = false,\n  compact = false\n}) => {\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [totalDuration, setTotalDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Format time in MM:SS format\n  const formatTime = (time: number) => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Handle play/pause\n  const togglePlayPause = async () => {\n    if (!audioRef.current) return;\n\n    try {\n      if (isPlaying) {\n        audioRef.current.pause();\n        setIsPlaying(false);\n        onPause?.();\n      } else {\n        setIsLoading(true);\n        await audioRef.current.play();\n        setIsPlaying(true);\n        onPlay?.();\n      }\n    } catch (error) {\n      console.error(\"Error playing audio:\", error);\n      setIsPlaying(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle time update\n  const handleTimeUpdate = () => {\n    if (audioRef.current) {\n      setCurrentTime(audioRef.current.currentTime);\n    }\n  };\n\n  // Handle audio errors\n  const handleError = (e: React.SyntheticEvent<HTMLAudioElement, Event>) => {\n    console.error('Audio playback error:', e);\n    const audioElement = e.target as HTMLAudioElement;\n    const error = audioElement.error;\n\n    setIsLoading(false);\n    setIsPlaying(false);\n\n    // Don't show toast for demo recordings that are expected to fail\n    if (src && !src.includes('/api/recordings/') && !src.includes('/stream')) {\n      let errorMessage = \"Failed to load audio\";\n      if (error) {\n        switch (error.code) {\n          case error.MEDIA_ERR_ABORTED:\n            errorMessage = \"Audio playback was aborted\";\n            break;\n          case error.MEDIA_ERR_NETWORK:\n            errorMessage = \"Network error while loading audio\";\n            break;\n          case error.MEDIA_ERR_DECODE:\n            errorMessage = \"Audio format not supported\";\n            break;\n          case error.MEDIA_ERR_SRC_NOT_SUPPORTED:\n            errorMessage = \"Audio source not supported or not found\";\n            break;\n          default:\n            errorMessage = \"Unknown error loading audio\";\n        }\n      }\n      console.warn(errorMessage);\n    }\n  };\n\n  // Handle duration change\n  const handleLoadedMetadata = () => {\n    if (audioRef.current) {\n      setTotalDuration(audioRef.current.duration);\n    }\n  };\n\n  // Handle seek\n  const handleSeek = (value: number[]) => {\n    if (audioRef.current) {\n      const newTime = (value[0] / 100) * totalDuration;\n      audioRef.current.currentTime = newTime;\n      setCurrentTime(newTime);\n    }\n  };\n\n  // Handle volume change\n  const handleVolumeChange = (value: number[]) => {\n    const newVolume = value[0] / 100;\n    setVolume(newVolume);\n    if (audioRef.current) {\n      audioRef.current.volume = newVolume;\n    }\n    setIsMuted(newVolume === 0);\n  };\n\n  // Toggle mute\n  const toggleMute = () => {\n    if (audioRef.current) {\n      if (isMuted) {\n        audioRef.current.volume = volume;\n        setIsMuted(false);\n      } else {\n        audioRef.current.volume = 0;\n        setIsMuted(true);\n      }\n    }\n  };\n\n  // Skip forward/backward\n  const skipForward = () => {\n    if (audioRef.current) {\n      audioRef.current.currentTime = Math.min(\n        audioRef.current.currentTime + 10,\n        totalDuration\n      );\n    }\n  };\n\n  const skipBackward = () => {\n    if (audioRef.current) {\n      audioRef.current.currentTime = Math.max(\n        audioRef.current.currentTime - 10,\n        0\n      );\n    }\n  };\n\n  // Handle audio end\n  const handleEnded = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n  };\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (audio) {\n      audio.addEventListener('timeupdate', handleTimeUpdate);\n      audio.addEventListener('loadedmetadata', handleLoadedMetadata);\n      audio.addEventListener('ended', handleEnded);\n\n      return () => {\n        audio.removeEventListener('timeupdate', handleTimeUpdate);\n        audio.removeEventListener('loadedmetadata', handleLoadedMetadata);\n        audio.removeEventListener('ended', handleEnded);\n      };\n    }\n  }, []);\n\n  const progress = totalDuration > 0 ? (currentTime / totalDuration) * 100 : 0;\n\n  if (compact) {\n    return (\n      <div className={cn(\"flex items-center space-x-2\", className)}>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"h-8 w-8 p-0 rounded-full hover:bg-primary/10\"\n          onClick={togglePlayPause}\n          disabled={!src || isLoading}\n        >\n          {isLoading ? (\n            <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\n          ) : isPlaying ? (\n            <Pause className=\"h-4 w-4 text-primary\" />\n          ) : (\n            <Play className=\"h-4 w-4 text-primary\" />\n          )}\n        </Button>\n        <span className=\"text-sm text-muted-foreground\">\n          {formatTime(currentTime)} / {totalDuration > 0 ? formatTime(totalDuration) : duration}\n        </span>\n        {src && (\n          <audio ref={audioRef} src={src} preload=\"metadata\" />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\"bg-card border rounded-lg p-4 space-y-4\", className)}>\n      {/* Title */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"font-medium text-foreground truncate\">{title}</h3>\n        {showControls && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                <MoreHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuItem onClick={onDownload}>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={onShare}>\n                <Share2 className=\"h-4 w-4 mr-2\" />\n                Share\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"space-y-2\">\n        <Slider\n          value={[progress]}\n          onValueChange={handleSeek}\n          max={100}\n          step={0.1}\n          className=\"w-full\"\n          disabled={!src || totalDuration === 0}\n        />\n        <div className=\"flex justify-between text-xs text-muted-foreground\">\n          <span>{formatTime(currentTime)}</span>\n          <span>{totalDuration > 0 ? formatTime(totalDuration) : duration}</span>\n        </div>\n      </div>\n\n      {/* Controls */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={skipBackward}\n            disabled={!src || !isPlaying}\n          >\n            <SkipBack className=\"h-4 w-4\" />\n          </Button>\n          \n          <Button\n            variant=\"ghost\"\n            size=\"lg\"\n            onClick={togglePlayPause}\n            disabled={!src || isLoading}\n            className=\"h-10 w-10 rounded-full bg-primary/10 hover:bg-primary/20\"\n          >\n            {isLoading ? (\n              <div className=\"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\n            ) : isPlaying ? (\n              <Pause className=\"h-5 w-5 text-primary\" />\n            ) : (\n              <Play className=\"h-5 w-5 text-primary\" />\n            )}\n          </Button>\n          \n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={skipForward}\n            disabled={!src || !isPlaying}\n          >\n            <SkipForward className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Volume Control */}\n        <div className=\"flex items-center space-x-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={toggleMute}\n            disabled={!src}\n          >\n            {isMuted || volume === 0 ? (\n              <VolumeX className=\"h-4 w-4\" />\n            ) : (\n              <Volume2 className=\"h-4 w-4\" />\n            )}\n          </Button>\n          <Slider\n            value={[isMuted ? 0 : volume * 100]}\n            onValueChange={handleVolumeChange}\n            max={100}\n            step={1}\n            className=\"w-20\"\n            disabled={!src}\n          />\n        </div>\n      </div>\n\n      {/* Audio Element */}\n      {src && (\n        <audio\n          ref={audioRef}\n          src={src}\n          preload=\"metadata\"\n          autoPlay={autoPlay}\n          onTimeUpdate={handleTimeUpdate}\n          onLoadedMetadata={() => setTotalDuration(audioRef.current?.duration || 0)}\n          onEnded={() => setIsPlaying(false)}\n          onError={handleError}\n        />\n      )}\n\n      {/* No Audio Message */}\n      {!src && (\n        <div className=\"text-center py-4 text-muted-foreground\">\n          <p className=\"text-sm\">No audio source available</p>\n          <p className=\"text-xs\">Upload or select a recording to play</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n","import axiosInstance from \"@/api/axios/axiosInstance\";\nimport { toast } from \"sonner\";\n\n// Types\nexport interface Recording {\n  id: string;\n  recordingName: string;\n  duration: string;\n  date: string;\n  type: string;\n  status: \"processing\" | \"completed\" | \"failed\";\n  fileSize: string;\n  format: string;\n  transcript: string;\n  callId?: string;\n  assistantId?: string;\n  phoneNumber?: string;\n  cost: number;\n  metadata: {\n    quality: string;\n    sampleRate: number;\n    channels: number;\n    originalName?: string;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface RecordingFilters {\n  search?: string;\n  type?: string;\n  status?: string;\n  startDate?: string;\n  endDate?: string;\n  assistantId?: string;\n  sortBy?: string;\n  sortOrder?: \"asc\" | \"desc\";\n}\n\nexport interface RecordingListResponse {\n  recordings: Recording[];\n  pagination: {\n    currentPage: number;\n    totalPages: number;\n    totalRecordings: number;\n    hasNextPage: boolean;\n    hasPrevPage: boolean;\n  };\n  filters: RecordingFilters;\n}\n\nexport interface RecordingAnalytics {\n  recordingId: string;\n  duration: string;\n  fileSize: string;\n  cost: number;\n  quality: string;\n  transcriptWordCount: number;\n  playCount: number;\n  downloadCount: number;\n  shareCount: number;\n  lastPlayed: string;\n  averageListenDuration: string;\n  completionRate: string;\n}\n\nexport interface ShareRecordingData {\n  email?: string;\n  message?: string;\n  expiresIn?: \"1d\" | \"7d\" | \"30d\";\n}\n\nexport interface ShareRecordingResponse {\n  shareLink: string;\n  shareToken: string;\n  expiresAt: string;\n  sharedWith: string;\n  message?: string;\n}\n\n// Get all recordings\nexport async function getAllRecordings(\n  page: number = 1,\n  limit: number = 10,\n  filters: RecordingFilters = {}\n) {\n  try {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n      ...Object.fromEntries(\n        Object.entries(filters).filter(([_, value]) => value !== undefined && value !== \"\")\n      ),\n    });\n\n    const res = await axiosInstance.get(`/api/recordings?${params.toString()}`);\n    return res.data.data as RecordingListResponse;\n  } catch (error: any) {\n    console.error(\"Error fetching recordings:\", error);\n    const message = error.response?.data?.message || \"Failed to fetch recordings\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Get recording by ID\nexport async function getRecordingById(id: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}`);\n    return res.data.data as Recording;\n  } catch (error: any) {\n    console.error(\"Error fetching recording:\", error);\n    const message = error.response?.data?.message || \"Failed to fetch recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Upload recording\nexport async function uploadRecording(\n  file: File,\n  recordingData: {\n    recordingName: string;\n    type?: string;\n    assistantId?: string;\n    callId?: string;\n    phoneNumber?: string;\n  }\n) {\n  try {\n    const formData = new FormData();\n    formData.append(\"audio\", file);\n    formData.append(\"recordingName\", recordingData.recordingName);\n    \n    if (recordingData.type) formData.append(\"type\", recordingData.type);\n    if (recordingData.assistantId) formData.append(\"assistantId\", recordingData.assistantId);\n    if (recordingData.callId) formData.append(\"callId\", recordingData.callId);\n    if (recordingData.phoneNumber) formData.append(\"phoneNumber\", recordingData.phoneNumber);\n\n    const res = await axiosInstance.post(\"/api/recordings/upload\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n\n    toast.success(\"Recording uploaded successfully\");\n    return res.data.data as Recording;\n  } catch (error: any) {\n    console.error(\"Error uploading recording:\", error);\n    const message = error.response?.data?.message || \"Failed to upload recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Update recording\nexport async function updateRecording(id: string, updateData: Partial<Recording>) {\n  try {\n    const res = await axiosInstance.patch(`/api/recordings/${id}`, updateData);\n    toast.success(\"Recording updated successfully\");\n    return res.data.data as Recording;\n  } catch (error: any) {\n    console.error(\"Error updating recording:\", error);\n    const message = error.response?.data?.message || \"Failed to update recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Delete recording\nexport async function deleteRecording(id: string) {\n  try {\n    await axiosInstance.delete(`/api/recordings/${id}`);\n    toast.success(\"Recording deleted successfully\");\n  } catch (error: any) {\n    console.error(\"Error deleting recording:\", error);\n    const message = error.response?.data?.message || \"Failed to delete recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Get recording stream URL\nexport async function getRecordingStreamUrl(id: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}/stream`);\n    return res.data.data;\n  } catch (error: any) {\n    console.error(\"Error getting stream URL:\", error);\n    const message = error.response?.data?.message || \"Failed to get stream URL\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Download recording\nexport async function downloadRecording(id: string, filename?: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}/download`, {\n      responseType: \"blob\",\n    });\n    \n    // Create blob link to download\n    const url = window.URL.createObjectURL(new Blob([res.data]));\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", filename || `recording-${id}.mp3`);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(url);\n    \n    toast.success(\"Recording downloaded successfully\");\n    return res.data;\n  } catch (error: any) {\n    console.error(\"Error downloading recording:\", error);\n    const message = error.response?.data?.message || \"Failed to download recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Get recording transcript\nexport async function getRecordingTranscript(id: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}/transcript`);\n    return res.data.data;\n  } catch (error: any) {\n    console.error(\"Error fetching transcript:\", error);\n    const message = error.response?.data?.message || \"Failed to fetch transcript\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Update recording transcript\nexport async function updateRecordingTranscript(id: string, transcript: string) {\n  try {\n    const res = await axiosInstance.patch(`/api/recordings/${id}/transcript`, {\n      transcript,\n    });\n    toast.success(\"Transcript updated successfully\");\n    return res.data.data;\n  } catch (error: any) {\n    console.error(\"Error updating transcript:\", error);\n    const message = error.response?.data?.message || \"Failed to update transcript\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Get recording analytics\nexport async function getRecordingAnalytics(id: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}/analytics`);\n    return res.data.data as RecordingAnalytics;\n  } catch (error: any) {\n    console.error(\"Error fetching recording analytics:\", error);\n    const message = error.response?.data?.message || \"Failed to fetch analytics\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Share recording\nexport async function shareRecording(id: string, shareData: ShareRecordingData) {\n  try {\n    const res = await axiosInstance.post(`/api/recordings/${id}/share`, shareData);\n    toast.success(\"Recording shared successfully\");\n    return res.data.data as ShareRecordingResponse;\n  } catch (error: any) {\n    console.error(\"Error sharing recording:\", error);\n    const message = error.response?.data?.message || \"Failed to share recording\";\n    toast.error(message);\n    throw error;\n  }\n}\n\n// Get recording metadata\nexport async function getRecordingMetadata(id: string) {\n  try {\n    const res = await axiosInstance.get(`/api/recordings/${id}/metadata`);\n    return res.data.data;\n  } catch (error: any) {\n    console.error(\"Error fetching recording metadata:\", error);\n    const message = error.response?.data?.message || \"Failed to fetch metadata\";\n    toast.error(message);\n    throw error;\n  }\n}\n"],"names":["AudioPlayer","src","title","duration","className","onPlay","onPause","onDownload","onShare","showControls","autoPlay","compact","audioRef","useRef","isPlaying","setIsPlaying","useState","currentTime","setCurrentTime","totalDuration","setTotalDuration","volume","setVolume","isMuted","setIsMuted","isLoading","setIsLoading","formatTime","time","minutes","seconds","togglePlayPause","error","handleTimeUpdate","handleError","e","errorMessage","handleLoadedMetadata","handleSeek","value","newTime","handleVolumeChange","newVolume","toggleMute","skipForward","skipBackward","handleEnded","useEffect","audio","progress","cn","jsx","Button","Pause","Play","jsxs","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Download","Share2","Slider","SkipBack","SkipForward","VolumeX","Volume2","_a","getAllRecordings","page","limit","filters","params","_","axiosInstance","message","_b","toast","getRecordingById","id","deleteRecording","downloadRecording","filename","res","url","link","getRecordingTranscript","updateRecordingTranscript","transcript","getRecordingAnalytics","shareRecording","shareData"],"mappings":"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"}