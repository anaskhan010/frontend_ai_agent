{"version":3,"file":"Login-DSzb3zfC.js","sources":["../../src/api/services/auth/authService.ts","../../src/pages/auth/Login.tsx"],"sourcesContent":["// src/api/services/auth/authService.ts\r\n\r\nimport axiosInstance from \"@/api/axios/axiosInstance\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport interface LoginResponse {\r\n  message: string;\r\n  data: string;\r\n}\r\n\r\nexport const loginService = async (data: {\r\n  email: string;\r\n  password: string;\r\n}): Promise<string> => {\r\n  try {\r\n    const response = await axiosInstance.post<LoginResponse>(\r\n      \"/api/users/login\",\r\n      data\r\n    );\r\n\r\n    if (response.status === 200) {\r\n      toast.success(response.data.message);\r\n      // Assuming the token is in response.data.data.token\r\n      return response.data.data;\r\n    }\r\n\r\n    throw new Error(\"Login failed\");\r\n  } catch (error: any) {\r\n    if (error.response && error.response.data && error.response.data.message) {\r\n      toast.error(error.response.data.message);\r\n    } else {\r\n      toast.error(\"An unexpected error occurred.\");\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\ninterface DemoLoginResponse {\r\n  success: boolean;\r\n  message: string;\r\n  data: {\r\n    token: string;\r\n    user: any;\r\n  };\r\n}\r\n\r\n","// src/pages/auth/Login.tsx\r\n\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport AuthCard from \"@/components/auth/AuthCard\";\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport { loginService } from \"@/api/services/auth/authService\";\r\nimport { useState } from \"react\";\r\n\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nimport { Eye, EyeOff } from \"lucide-react\";\r\n\r\n// Define the schema with 'email' and 'password'\r\nconst FormSchema = z.object({\r\n  email: z.string().email({ message: \"Invalid email address\" }),\r\n  password: z\r\n    .string()\r\n    .min(4, { message: \"Password must be at least 6 characters\" }) // Adjusted min from 4 to 6\r\n    .max(100),\r\n});\r\n\r\n// Define the type inferred from the schema\r\ntype FormData = z.infer<typeof FormSchema>;\r\n\r\nconst Login = () => {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n  const { login } = useAuth();\r\n\r\n  const form = useForm<FormData>({\r\n    resolver: zodResolver(FormSchema),\r\n    defaultValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  // Handle form submission\r\n  const onSubmit = async (values: FormData) => {\r\n    setLoading(true);\r\n    try {\r\n      const token = await loginService(values);\r\n      console.log(\"Token:\", token);\r\n      if (token) {\r\n        login(token); // Store token in AuthContext\r\n        navigate(\"/\"); // Navigate to protected route\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Login failed:\", error);\r\n      // Error toast is already handled in loginService\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthCard>\r\n      <Form {...form}>\r\n        <h1\r\n          className=\"\r\n      text-3xl font-bold tracking-wide mb-2\r\n      text-white\r\n      drop-shadow-[0_0_12px_rgba(255,200,0,0.6)]\r\n    \"\r\n        >\r\n          Welcome Back\r\n        </h1>\r\n\r\n        <p\r\n          className=\"\r\n      mb-6 text-sm\r\n      text-white/70\r\n    \"\r\n        >\r\n          Sign in to your account to continue\r\n        </p>\r\n\r\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n          {/* Email Field */}\r\n          <FormField\r\n            control={form.control}\r\n            name=\"email\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel\r\n                  className=\"\r\n              text-sm font-medium\r\n              text-white/80\r\n            \"\r\n                >\r\n                  Email\r\n                </FormLabel>\r\n\r\n                <FormControl>\r\n                  <Input\r\n                    placeholder=\"Enter your email\"\r\n                    {...field}\r\n                    className=\"\r\n                 pr-12\r\n        bg-white/10 backdrop-blur-xl\r\n        border border-yellow-400/30\r\n        text-white placeholder:text-white/40\r\n        rounded-lg\r\n        shadow-[inset_0_0_10px_rgba(255,200,0,0.15)]\r\n        focus:border-yellow-400\r\n        focus:ring-2 focus:ring-yellow-400/40\r\n        transition-all duration-300\r\n              \"\r\n                  />\r\n                </FormControl>\r\n\r\n                <FormMessage className=\"text-red-400 text-xs\" />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {/* Password Field */}\r\n          <FormField\r\n            control={form.control}\r\n            name=\"password\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <FormLabel\r\n                    className=\"\r\n                text-sm font-medium\r\n                text-white/80\r\n              \"\r\n                  >\r\n                    Password\r\n                  </FormLabel>\r\n\r\n                  <Link\r\n                    to=\"/forgot-password\"\r\n                    className=\"\r\n                text-xs text-yellow-300\r\n                hover:text-yellow-200\r\n                hover:underline\r\n                transition\r\n              \"\r\n                  >\r\n                    Forgot password?\r\n                  </Link>\r\n                </div>\r\n\r\n                <FormControl>\r\n                  <div className=\"relative\">\r\n                    <Input\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      placeholder=\"Enter your password\"\r\n                      {...field}\r\n                      className=\"\r\n        pr-12\r\n        bg-white/10 backdrop-blur-xl\r\n        border border-yellow-400/30\r\n        text-white placeholder:text-white/40\r\n        rounded-lg\r\n        shadow-[inset_0_0_10px_rgba(255,200,0,0.15)]\r\n        focus:border-yellow-400\r\n        focus:ring-2 focus:ring-yellow-400/40\r\n        transition-all duration-300\r\n      \"\r\n                    />\r\n\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword((prev) => !prev)}\r\n                      className=\"\r\n        absolute right-3 top-1/2 -translate-y-1/2\r\n        text-white/60 hover:text-yellow-400\r\n        transition\r\n      \"\r\n                      tabIndex={-1}\r\n                    >\r\n                      {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\r\n                    </button>\r\n                  </div>\r\n                </FormControl>\r\n\r\n                <FormMessage className=\"text-red-400 text-xs\" />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {/* Submit Button */}\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"\r\n    relative w-full mt-4 overflow-hidden rounded-xl\r\n    text-white font-semibold tracking-wide\r\n    backdrop-blur-xl bg-white/10\r\n    border border-yellow-400/40\r\n    shadow-[0_0_10px_rgba(255,160,0,0.6)]\r\n    hover:shadow-[0_0_10px_rgba(255,120,0,0.9)]\r\n    transition-all duration-300\r\n    active:scale-[0.98]\r\n  \"\r\n          >\r\n            {/* ðŸ”¥ Fire Wave Layer */}\r\n            <span\r\n              className=\"absolute inset-0 animate-fireWave opacity-90\"\r\n              style={{\r\n                background: `\r\n        linear-gradient(\r\n          120deg,\r\n          #ffcc00,\r\n          #ff9900,\r\n          #ff3300,\r\n          #ff9900,\r\n          #ffcc00\r\n        )\r\n      `,\r\n                backgroundSize: \"300% 300%\",\r\n              }}\r\n            />\r\n\r\n            {/* ðŸ§Š Glass Highlight */}\r\n            <span className=\"absolute inset-0 bg-gradient-to-b from-white/30 to-transparent opacity-40\" />\r\n\r\n            {/* TEXT */}\r\n            <span className=\"relative z-10 py-3 block\">\r\n              {loading ? \"Signing in...\" : \"Sign In\"}\r\n            </span>\r\n\r\n            {/* ðŸ”¥ Keyframes */}\r\n            <style\r\n              dangerouslySetInnerHTML={{\r\n                __html: `\r\n        @keyframes fireWave {\r\n          0% { background-position: 0% 50%; }\r\n          50% { background-position: 100% 50%; }\r\n          100% { background-position: 0% 50%; }\r\n        }\r\n        .animate-fireWave {\r\n          animation: fireWave 2.5s linear infinite;\r\n        }\r\n      `,\r\n              }}\r\n            />\r\n          </Button>\r\n        </form>\r\n      </Form>\r\n    </AuthCard>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["loginService","data","response","axiosInstance","toast","error","FormSchema","z","Login","loading","setLoading","useState","showPassword","setShowPassword","navigate","useNavigate","login","useAuth","form","useForm","zodResolver","onSubmit","values","token","jsx","AuthCard","jsxs","Form","FormField","field","FormItem","FormLabel","FormControl","Input","FormMessage","Link","prev","EyeOff","Eye","Button"],"mappings":"uZAUa,MAAAA,EAAe,MAAOC,GAGZ,CACjB,GAAA,CACI,MAAAC,EAAW,MAAMC,EAAc,KACnC,mBACAF,CACF,EAEI,GAAAC,EAAS,SAAW,IAChBE,OAAAA,EAAA,QAAQF,EAAS,KAAK,OAAO,EAE5BA,EAAS,KAAK,KAGjB,MAAA,IAAI,MAAM,cAAc,QACvBG,EAAY,CACf,MAAAA,EAAM,UAAYA,EAAM,SAAS,MAAQA,EAAM,SAAS,KAAK,QAC/DD,EAAM,MAAMC,EAAM,SAAS,KAAK,OAAO,EAEvCD,EAAM,MAAM,+BAA+B,EAEvCC,CAAA,CAEV,ECPMC,EAAaC,EAAE,OAAO,CAC1B,MAAOA,EAAE,OAAO,EAAE,MAAM,CAAE,QAAS,wBAAyB,EAC5D,SAAUA,EACP,OAAO,EACP,IAAI,EAAG,CAAE,QAAS,wCAAyC,CAAC,EAC5D,IAAI,GAAG,CACZ,CAAC,EAKKC,EAAQ,IAAM,CAClB,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAkB,EAAK,EAC/C,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAS,EAAK,EAEhDG,EAAWC,EAAY,EACvB,CAAE,MAAAC,CAAM,EAAIC,EAAQ,EAEpBC,EAAOC,EAAkB,CAC7B,SAAUC,EAAYd,CAAU,EAChC,cAAe,CACb,MAAO,GACP,SAAU,EAAA,CACZ,CACD,EAGKe,EAAW,MAAOC,GAAqB,CAC3CZ,EAAW,EAAI,EACX,GAAA,CACI,MAAAa,EAAQ,MAAMvB,EAAasB,CAAM,EAC/B,QAAA,IAAI,SAAUC,CAAK,EACvBA,IACFP,EAAMO,CAAK,EACXT,EAAS,GAAG,SAEPT,EAAO,CACN,QAAA,MAAM,gBAAiBA,CAAK,CAAA,QAEpC,CACAK,EAAW,EAAK,CAAA,CAEpB,EAEA,OACGc,EAAA,IAAAC,EAAA,CACC,SAACC,EAAA,KAAAC,EAAA,CAAM,GAAGT,EACR,SAAA,CAAAM,EAAA,IAAC,KAAA,CACC,UAAU;AAAA;AAAA;AAAA;AAAA,MAKX,SAAA,cAAA,CAED,EAEAA,EAAA,IAAC,IAAA,CACC,UAAU;AAAA;AAAA;AAAA,MAIX,SAAA,qCAAA,CAED,EAEAE,OAAC,QAAK,SAAUR,EAAK,aAAaG,CAAQ,EAAG,UAAU,YAErD,SAAA,CAAAG,EAAA,IAACI,EAAA,CACC,QAASV,EAAK,QACd,KAAK,QACL,OAAQ,CAAC,CAAE,MAAAW,CAAM,WACdC,EACC,CAAA,SAAA,CAAAN,EAAA,IAACO,EAAA,CACC,UAAU;AAAA;AAAA;AAAA,cAIX,SAAA,OAAA,CAED,QAECC,EACC,CAAA,SAAAR,EAAA,IAACS,EAAA,CACC,YAAY,mBACX,GAAGJ,EACJ,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,CAAA,EAYd,EAEAL,EAAAA,IAACU,EAAY,CAAA,UAAU,sBAAuB,CAAA,CAAA,CAChD,CAAA,CAAA,CAEJ,EAGAV,EAAA,IAACI,EAAA,CACC,QAASV,EAAK,QACd,KAAK,WACL,OAAQ,CAAC,CAAE,MAAAW,CAAM,WACdC,EACC,CAAA,SAAA,CAACJ,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAF,EAAA,IAACO,EAAA,CACC,UAAU;AAAA;AAAA;AAAA,gBAIX,SAAA,UAAA,CAED,EAEAP,EAAA,IAACW,EAAA,CACC,GAAG,mBACH,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMX,SAAA,kBAAA,CAAA,CAED,EACF,EAECX,MAAAQ,EAAA,CACC,SAACN,EAAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAAAF,EAAA,IAACS,EAAA,CACC,KAAMrB,EAAe,OAAS,WAC9B,YAAY,sBACX,GAAGiB,EACJ,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,CAWZ,EAEAL,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMX,EAAiBuB,GAAS,CAACA,CAAI,EAC9C,UAAU;AAAA;AAAA;AAAA;AAAA,QAKV,SAAU,GAET,SAAAxB,QAAgByB,EAAO,CAAA,KAAM,EAAI,CAAA,EAAKb,EAAAA,IAACc,EAAI,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CACxD,CAAA,CACF,CACF,CAAA,EAEAd,EAAAA,IAACU,EAAY,CAAA,UAAU,sBAAuB,CAAA,CAAA,CAChD,CAAA,CAAA,CAEJ,EAGAR,EAAA,KAACa,EAAA,CACC,KAAK,SACL,SAAU9B,EACV,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAYV,SAAA,CAAAe,EAAA,IAAC,OAAA,CACC,UAAU,+CACV,MAAO,CACL,WAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUZ,eAAgB,WAAA,CAClB,CACF,EAGAA,EAAAA,IAAC,OAAK,CAAA,UAAU,2EAA4E,CAAA,QAG3F,OAAK,CAAA,UAAU,2BACb,SAAAf,EAAU,gBAAkB,UAC/B,EAGAe,EAAA,IAAC,QAAA,CACC,wBAAyB,CACvB,OAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,CAUV,CAAA,CACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ"}