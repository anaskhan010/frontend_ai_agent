import{j as e,aq as d,aT as m,aV as x,aW as u}from"./ui-C7wuVsKo.js";import{r as i}from"./vendor-DG599jyl.js";import{c as p}from"./router-BavLd_S0.js";const f=()=>{const[s]=p(),[c,t]=i.useState("loading"),[l,a]=i.useState("Processing Gmail authentication...");return i.useEffect(()=>{(async()=>{try{const o=s.get("success"),r=s.get("email"),n=s.get("error");o==="true"&&r?(t("success"),a("Gmail account connected successfully!"),console.log("🎉 Gmail OAuth success in popup, notifying parent window"),window.opener&&!window.opener.closed?(console.log("📤 Sending success message to parent window"),window.opener.postMessage({type:"GMAIL_AUTH_SUCCESS",data:{email:decodeURIComponent(r),isConnected:!0}},window.location.origin),setTimeout(()=>{console.log("🔒 Closing popup window"),window.close()},1500)):(console.log("⚠️ No parent window found, closing popup"),setTimeout(()=>{window.close()},2e3))):n?(t("error"),a(`Authentication failed: ${decodeURIComponent(n)}`),window.opener&&!window.opener.closed?(window.opener.postMessage({type:"GMAIL_AUTH_ERROR",message:decodeURIComponent(n)},window.location.origin),setTimeout(()=>{window.close()},3e3)):setTimeout(()=>{window.close()},3e3)):(t("error"),a("Invalid callback parameters"),setTimeout(()=>{window.close()},3e3))}catch(o){console.error("Error handling Gmail popup callback:",o),t("error"),a("An unexpected error occurred"),setTimeout(()=>{window.close()},3e3)}})()},[s]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[c==="loading"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"h-8 w-8 text-blue-600"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"h-3 w-3 text-white animate-spin"})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processing Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:l})]})]}),c==="success"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(x,{className:"h-16 w-16 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Successfully Connected!"}),e.jsx("p",{className:"text-sm text-green-700",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:"This window will close automatically..."})]})]}),c==="error"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{className:"h-16 w-16 text-red-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Connection Failed"}),e.jsx("p",{className:"text-sm text-red-700",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:"This window will close automatically..."})]})]})]})})};export{f as default};
//# sourceMappingURL=GmailPopupCallback-xs6bJKC-.js.map
