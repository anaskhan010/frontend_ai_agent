import{j as e,bC as Q,d as O,e as k,ar as R,bE as H,aI as K,a9 as J,K as X,I as Y,N as Z,bF as ee}from"./ui-Bw4PqZaR.js";import{M as se}from"./ModernTable-C077ToNY.js";import{H as te}from"./Header-B6YOjVS4.js";import{C as ae,B as y,D as re,j as ie,k as ne,l as le,L as C,n as I,u as ce}from"./index-CrtuxIoh.js";import{A as L,a as D}from"./avatar-r3dD4aOY.js";import{r as m}from"./vendor-DG599jyl.js";import{P as oe,a as de,b as me}from"./popover-RL8n2ZMW.js";import{R as he,a as xe}from"./radio-group-DWIGA-a8.js";import{S as ue}from"./slider-BHKjCscN.js";import{S as ge}from"./separator-BNWKZ-Cr.js";import{u as pe,c as we,b as je}from"./query-ejyxdTEH.js";import{d as ve,a as fe,g as Ne}from"./agentService-CDnHbZ3E.js";import{C as be}from"./CustomPagination-D5rt0t33.js";import{u as ye,d as Se}from"./router-BnJytTjr.js";import{L as Ce}from"./Loading-B_ZozHtF.js";import"./table-B6hOvFB1.js";import"./sheet-DF5Wvjy5.js";const Ae=({data:h,onItemClick:f,actions:n})=>{const l=r=>r.split(" ").map(d=>d.charAt(0)).join("").toUpperCase(),c=(r,d)=>Math.floor(Math.random()*(d-r+1)+r);return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mt-6",children:h.map(r=>{const d=`$${(Math.random()*100).toFixed(2)}`,i=c(0,1e4),x=c(0,2e6),p=Math.random()>.5?"up":"down",j=["active","inactive","training"],u=j[Math.floor(Math.random()*j.length)],N=u==="active"?"text-green-500":u==="inactive"?"text-gray-400":"text-yellow-500";return e.jsx(ae,{className:"overflow-hidden border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>f(r),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-10 w-10 bg-gradient-to-br from-primary/20 to-primary/10",children:e.jsx(D,{className:"text-primary font-medium",children:l(String(r.name))})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:String(r.name)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",String(r.id).substring(0,8)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100",onClick:a=>{a.stopPropagation(),console.log("Share",r)},children:e.jsx(Q,{className:"h-4 w-4 text-gray-500"})}),e.jsxs(re,{children:[e.jsx(ie,{asChild:!0,onClick:a=>a.stopPropagation(),children:e.jsx(y,{variant:"ghost",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100",children:e.jsx(O,{className:"h-4 w-4 text-gray-500"})})}),e.jsx(ne,{align:"end",className:"w-[160px]",children:n.map((a,g)=>e.jsxs(le,{onClick:w=>{w.stopPropagation(),a.onClick(r)},className:"cursor-pointer",children:[e.jsx("span",{className:"mr-2 h-4 w-4 text-gray-500",children:a.icon}),e.jsx("span",{children:a.label})]},g))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Price"}),e.jsx("div",{className:"font-medium text-gray-900",children:d})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:`h-2 w-2 mr-2 fill-current ${N}`}),e.jsx("span",{className:"capitalize text-gray-700",children:u})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Sales"}),e.jsx("div",{className:"font-medium text-gray-900",children:i>0?i.toLocaleString():"—"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Revenue"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:x>0?`$${x.toLocaleString()}`:"—"}),x>0&&e.jsx(R,{className:`h-3 w-3 ${p==="up"?"text-green-500":"text-red-500"}`})]})]})]})]})},r.id)})})},Pe=({onFilterChange:h})=>{const[f,n]=m.useState(!1),[l,c]=m.useState([]),[r,d]=m.useState(null),[i,x]=m.useState([0,100]),p=[{id:"active",label:"Active"},{id:"inactive",label:"Inactive"},{id:"training",label:"Training"}],j=()=>{const a={status:r,priceRange:i},g=[];r&&g.push(`Status: ${r}`),(i[0]>0||i[1]<100)&&g.push(`Price: $${i[0]} - $${i[1]}`),c(g),h(a),n(!1)},u=()=>{d(null),x([0,100]),c([]),h({})},N=a=>{const g=l.filter(w=>w!==a);c(g),a.startsWith("Status:")&&d(null),a.startsWith("Price:")&&x([0,100]),h({status:a.startsWith("Status:")?null:r,priceRange:a.startsWith("Price:")?[0,100]:i})};return e.jsxs("div",{className:"relative",children:[e.jsxs(oe,{open:f,onOpenChange:n,children:[e.jsx(de,{asChild:!0,children:e.jsxs(y,{variant:"outline",size:"sm",className:`h-9 border-white/10 bg-white/5 text-white hover:bg-white/10 ${l.length>0?"border-indigo-500/50 bg-indigo-500/10":""}`,children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"Filters",l.length>0&&e.jsx("span",{className:"ml-1 flex h-5 w-5 items-center justify-center rounded-full bg-indigo-500 text-[10px] font-medium text-white",children:l.length})]})}),e.jsx(me,{className:"w-[280px] p-4 bg-[#0b0f2e] border-white/10 text-white",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm text-white",children:"Filter Agents"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-xs font-medium text-white/70",children:"Status"}),e.jsx(he,{value:r||"",onValueChange:a=>d(a||null),children:p.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{value:a.id,id:`status-${a.id}`,className:"border-white/20 text-indigo-500"}),e.jsx(C,{htmlFor:`status-${a.id}`,className:"text-sm font-normal cursor-pointer text-white/80",children:a.label})]},a.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-xs font-medium text-white/70",children:"Price Range"}),e.jsxs("span",{className:"text-xs text-white/50",children:["$",i[0]," - $",i[1]]})]}),e.jsx(ue,{defaultValue:[0,100],value:i,max:100,step:1,onValueChange:x,className:"py-2"})]}),e.jsx(ge,{className:"bg-white/10"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:u,className:"text-xs h-8 bg-transparent border-white/10 text-white hover:bg-white/5",children:"Reset"}),e.jsx(y,{size:"sm",onClick:j,className:"text-xs h-8 bg-indigo-600 hover:bg-indigo-500 text-white border-0",children:"Apply Filters"})]})]})})]}),l.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(a=>e.jsxs(I,{variant:"outline",className:"px-2 py-1 text-xs bg-primary/5 border-primary/20 text-primary flex items-center gap-1",children:[a,e.jsx("button",{className:"ml-1 text-primary hover:text-primary/80",onClick:()=>N(a),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},a))})]})},Ge=()=>{const h=ye(),f=pe(),{user:n}=ce(),[l,c]=Se(),[r,d]=m.useState(l.get("search")||""),[i,x]=m.useState(r),[p,j]=m.useState(l.get("view")==="grid"?"grid":"list"),[u,N]=m.useState({}),[a,g]=m.useState(!1),w=parseInt(l.get("page")||"1"),E=we({mutationFn:ve,onSuccess:()=>{f.invalidateQueries({queryKey:["agents",n==null?void 0:n.id]})}});m.useEffect(()=>{const s=setTimeout(()=>{x(r),c(t=>{const o=new URLSearchParams(t);return r?o.set("search",r):o.delete("search"),o})},500);return()=>clearTimeout(s)},[r,c]),m.useEffect(()=>{c(s=>{const t=new URLSearchParams(s);return p==="grid"?t.set("view","grid"):t.delete("view"),t})},[p,c]);const{data:A,isLoading:P,error:F}=je({queryKey:["agents",n==null?void 0:n.id,w,i,u],queryFn:()=>fe(w,i),enabled:!!(n!=null&&n.id),retry:(s,t)=>{var v;return[404,204,402].includes((v=t==null?void 0:t.response)==null?void 0:v.status)?!1:s<2}});if(P)return e.jsx(Ce,{});if(F)return console.error("Error fetching agents",F),e.jsx("div",{className:"text-white p-6",children:"Error loading agents"});let b=[...A.data];u.status&&(b=b.filter((s,t)=>{const o=["active","inactive","training"];return o[t%o.length]===u.status}));const T=s=>{c(t=>{const o=new URLSearchParams(t);return o.set("page",s.toString()),o})},V=s=>{d(s)},_=s=>{j(s)},z=s=>{N(s),g(Object.keys(s).some(t=>s[t]!==null&&(typeof s[t]!="object"||Array.isArray(s[t])&&(s[t][0]>0||s[t][1]<100))))},B=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase(),M=(s,t)=>Math.floor(Math.random()*(t-s+1)+s),U=async s=>{try{const t=await Ne(s.id);console.log("Agent details:",t)}catch(t){console.error("Error fetching agent details:",t)}},W=s=>{h(`/agents/edit/${s.id}`)},q=async s=>{if(confirm(`Are you sure you want to delete "${s.name}"?`))try{await E.mutateAsync(s.id)}catch(t){console.error("Error deleting agent:",t)}},$=[{label:"View Details",icon:e.jsx(Y,{className:"h-4 w-4"}),onClick:U},{label:"Edit Agent",icon:e.jsx(Z,{className:"h-4 w-4"}),onClick:W},{label:"Delete Agent",icon:e.jsx(ee,{className:"h-4 w-4"}),onClick:q}];return e.jsx("div",{className:"app-shell-bg min-h-screen p-6 font-sans",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-6",children:[e.jsx(te,{title:"Voice AI Agents",buttonText:"Agent",action:()=>h("/agents/add"),filterByName:!0,filterWord:r,onFilterChange:V,useSheet:!1,viewMode:p,onViewModeChange:_,showViewToggle:!0,showFilters:!1,className:"bg-transparent border-b border-white/10 pb-6",titleClassName:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(I,{variant:"outline",className:"px-3 py-1 bg-white/5 border-white/10 text-white/80 hover:bg-white/10 transition-colors cursor-default",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[b.length||0," Agents"]})]})}),e.jsx(Pe,{onFilterChange:z})]}),a&&e.jsx("div",{className:"mb-4"}),p==="list"?e.jsx("div",{className:"neo-card  w-full overflow-hidden p-1",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(se,{data:b,isLoading:P,isSelectable:!0,showColumnSelection:!0,onRowClick:s=>console.log("Row clicked",s),headerClassName:"bg-white/5 border-b border-white/10 text-white/70",rowClassName:"hover:bg-white/5 border-b border-white/5 text-white/90",cellClassName:"text-white/80",columns:[{header:"Name",accessor:"name",className:"min-w-[200px]",cell:(s,t)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"h-9 w-9 border border-white/10",children:e.jsx(D,{className:"bg-indigo-500/20 text-indigo-300 font-medium",children:B(String(s))})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:String(s)}),e.jsxs("div",{className:"text-xs text-white/50",children:["ID: ",String(t.id).substring(0,8)]})]})]}),sortable:!0},{header:"Price",accessor:"id",className:"min-w-[120px]",cell:()=>{const s=`$${(Math.random()*100).toFixed(2)}`;return e.jsx("div",{className:"text-left font-medium text-white/90",children:s})},sortable:!0},{header:"Status",accessor:"user_id",className:"min-w-[120px]",cell:(s,t,o)=>{const v=["active","inactive","training"],S=v[(o||0)%v.length],G=S==="active"?"text-emerald-400":S==="inactive"?"text-white/40":"text-amber-400";return e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:`h-2 w-2 mr-2 fill-current ${G}`}),e.jsx("span",{className:"capitalize text-white/80",children:S})]})}},{header:"Total Sales",accessor:"created_at",className:"min-w-[120px]",cell:()=>{const s=M(0,1e4);return e.jsx("div",{className:"text-left font-medium text-white/90",children:s>0?s.toLocaleString():"—"})},sortable:!0},{header:"Total Revenue",accessor:"first_message",className:"min-w-[150px]",cell:()=>{const s=M(0,2e6),t=Math.random()>.5?"up":"down";return e.jsxs("div",{className:"flex items-start justify-start space-x-2",children:[e.jsx("span",{className:"font-medium text-white/90",children:s>0?`$${s.toLocaleString()}`:"—"}),s>0&&e.jsx(R,{className:`h-4 w-4 ${t==="up"?"text-emerald-400":"text-rose-400"}`})]})},sortable:!0}],actions:$,emptyState:e.jsxs("div",{className:"text-center p-12",children:[e.jsx("div",{className:"h-16 w-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 ring-1 ring-white/10 shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:e.jsx(J,{className:"h-8 w-8 text-white/40"})}),e.jsx("h3",{className:"text-xl font-medium mb-2 text-white/90",children:"No agents found"}),e.jsx("p",{className:"text-white/50 mb-8 max-w-sm mx-auto",children:"Get started by creating your first voice AI agent to automate your calls."}),e.jsxs("button",{className:"neo-btn flex items-center justify-center mx-auto",onClick:()=>h("/agents/add"),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Create Agent"]})]})})})}):e.jsx(Ae,{data:b,onItemClick:s=>console.log("Grid item clicked",s),actions:$}),e.jsx("div",{className:"mt-8 border-t border-white/10 pt-4",children:e.jsx(be,{currentPage:w,totalPages:A.totalPages,onPageChange:T})})]})})};export{Ge as default};
//# sourceMappingURL=Agents-CDTFxJFh.js.map
