import{j as e,aA as ge,bq as he,c7 as pe,bR as ye,S as ue,aX as be,b$ as Y,as as $,at as M,ct as fe}from"./ui-D0JisYOU.js";import{r as i}from"./vendor-D6QveUxv.js";import{P as G}from"./Page-CMDChCTT.js";import{u as je,j as y,t as d,v as N,L as u,I as p,B as c}from"./index-D9y2aYC5.js";import{a as J,b as we}from"./userService-BZrhz2-Z.js";import{A as Ne,b as ve,a as ke}from"./avatar-kC-cyhMH.js";import{C as _e}from"./CreditBalance-BnPzUpuU.js";import"./scroll-area-DyZFf7r4.js";import"./index-BZw056XW.js";import"./router-jXXg-8rg.js";import"./query-CXvbhbrr.js";import"./PurchaseCreditsModal-ClzUUUWJ.js";import"./react-stripe.esm-H7TrQbxp.js";import"./index-B4aCQGRZ.js";const ze=()=>{const{user:n}=je(),[s,v]=i.useState(null),[b,I]=i.useState(!1),[Q,z]=i.useState(!0),[k,_]=i.useState(!1),[l,f]=i.useState("profile"),[h,j]=i.useState({first_name:"",last_name:"",username:"",email:"",phone_number:""}),[m,w]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[U,Z]=i.useState(!1),[F,ee]=i.useState(!1),[L,ae]=i.useState(!1),[R,se]=i.useState([]),[P,H]=i.useState(""),[W,D]=i.useState(null),[C,A]=i.useState(""),[re,K]=i.useState(!1);i.useEffect(()=>{te()},[n]),i.useEffect(()=>{l==="tags"&&E()},[l,n]);const te=async()=>{try{if(z(!0),n&&typeof n=="object"&&n!==null){let a={...n,phone_number:n.phone_number||"",created_at:n.created_at||"",last_login:n.last_login||""};try{const r=await J();r&&r.id===n.id&&(a={...a,roles:r.roles,role:r.role,permissions:r.permissions,pagePermissions:r.pagePermissions,created_at:r.created_at||a.created_at,updated_at:r.updated_at,last_login:r.last_login||a.last_login})}catch(r){console.warn("Could not fetch additional role data from API:",r)}v(a),j({first_name:a.first_name||(a.name?a.name.split(" ")[0]:""),last_name:a.last_name||(a.name?a.name.split(" ").slice(1).join(" "):""),username:a.username||"",email:a.email||"",phone_number:a.phone_number||""})}else{const a=await J();a&&(v(a),j({first_name:a.first_name||(a.name?a.name.split(" ")[0]:""),last_name:a.last_name||(a.name?a.name.split(" ").slice(1).join(" "):""),username:a.username||"",email:a.email||"",phone_number:a.phone_number||""}))}}catch(a){if(console.error("Error fetching user profile:",a),n&&typeof n=="object"&&n!==null){const r={...n,phone_number:n.phone_number||"",created_at:n.created_at||"",last_login:n.last_login||""};v(r),j({first_name:r.first_name||(r.name?r.name.split(" ")[0]:""),last_name:r.last_name||(r.name?r.name.split(" ").slice(1).join(" "):""),username:r.username||"",email:r.email||"",phone_number:r.phone_number||""})}}finally{z(!1)}},S=(a,r)=>{j(o=>({...o,[a]:r}))},ne=async()=>{if(s)try{_(!0);const a=await we({id:s.id,...h});a&&(v(a),I(!1),d.success("Profile updated successfully!"))}catch(a){console.error("Error updating profile:",a),d.error("Failed to update profile")}finally{_(!1)}},ie=async()=>{var a,r,o;if(!m.currentPassword||!m.newPassword||!m.confirmPassword){d.error("Please fill in all password fields");return}if(m.newPassword!==m.confirmPassword){d.error("New passwords do not match");return}if(m.newPassword.length<6){d.error("New password must be at least 6 characters long");return}try{_(!0),(await y.post("/api/auth/change-password",{currentPassword:m.currentPassword,newPassword:m.newPassword})).data.success&&(d.success("Password changed successfully!"),w({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(g){console.error("Error changing password:",g),((a=g.response)==null?void 0:a.status)===404?d.error("Password change functionality is not yet implemented"):d.error(((o=(r=g.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to change password")}finally{_(!1)}},E=async()=>{try{K(!0);const a=await y.get(`/api/tags/get-tags-by-user/${n.id}`);a.data.success&&se(a.data.data)}catch(a){console.error("Error fetching tags:",a),d.error("Failed to load tags")}finally{K(!1)}},V=async()=>{if(!P.trim()){d.error("Please enter a tag name");return}try{(await y.post("/api/tags/create-tags",{tag_name:P.trim(),user_id:n.id})).data.success&&(d.success("Tag created successfully"),H(""),E())}catch(a){console.error("Error creating tag:",a),d.error("Failed to create tag")}},le=a=>{D(a.tag_id),A(a.tag_name)},q=async a=>{if(!C.trim()){d.error("Please enter a tag name");return}try{(await y.put(`/api/tags/update-tags/${a}`,{tag_name:C.trim()})).data.success&&(d.success("Tag updated successfully"),D(null),A(""),E())}catch(r){console.error("Error updating tag:",r),d.error("Failed to update tag")}},de=async a=>{if(window.confirm("Are you sure you want to delete this tag?"))try{(await y.delete(`/api/tags/delete-tags/${a}`)).data.success&&(d.success("Tag deleted successfully"),E())}catch(r){console.error("Error deleting tag:",r),d.error("Failed to delete tag")}},O=()=>{D(null),A("")},oe=()=>{if(s!=null&&s.first_name&&(s!=null&&s.last_name))return`${s.first_name.charAt(0)}${s.last_name.charAt(0)}`.toUpperCase();if(s!=null&&s.name){const a=s.name.split(" ");return a.length>=2?`${a[0].charAt(0)}${a[1].charAt(0)}`.toUpperCase():s.name.charAt(0).toUpperCase()}else{if(s!=null&&s.username)return s.username.charAt(0).toUpperCase();if(s!=null&&s.email)return s.email.charAt(0).toUpperCase()}return"U"},X=()=>s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s.first_name} ${s.last_name}`:s!=null&&s.name?s.name:s!=null&&s.username?s.username:"User",ce=a=>{if(console.log("ðŸ” getRoleDisplayName - user data:",{is_super_admin:a==null?void 0:a.is_super_admin,isSuperAdmin:a==null?void 0:a.isSuperAdmin,role_id:a==null?void 0:a.role_id,roles:a==null?void 0:a.roles,role:a==null?void 0:a.role}),a!=null&&a.is_super_admin||a!=null&&a.isSuperAdmin||(a==null?void 0:a.role_id)===1)return console.log("âœ… Detected as Super Administrator"),"Super Administrator";if(a!=null&&a.roles&&a.roles.length>0){const r=a.roles.map(o=>o.display_name).join(", ");return console.log("âœ… Using roles array:",r),r}if(a!=null&&a.role&&a.role.display_name)return console.log("âœ… Using primary role:",a.role.display_name),a.role.display_name;if(a!=null&&a.role_id){const o={1:"Super Administrator",2:"Administrator",3:"Manager",4:"User"}[a.role_id]||"User";return console.log("âœ… Using role_id mapping:",a.role_id,"â†’",o),o}return console.log("âš ï¸ Falling back to default 'User' role"),"User"},me=()=>{const[a,r]=i.useState([]),[o,g]=i.useState(!0);i.useEffect(()=>{B()},[]);const B=async()=>{try{g(!0);const t=n!=null&&n.isSuperAdmin?"/api/credits/admin/transactions":"/api/credits/transactions",x=await y.get(t);console.log("Transaction API Response:",x.data);let T=[];x.data.data&&(Array.isArray(x.data.data.transactions)?T=x.data.data.transactions:Array.isArray(x.data.data)&&(T=x.data.data)),console.log("Processed transaction data:",T),r(T)}catch(t){console.error("Error fetching transactions:",t),d.error("Failed to load transaction history"),r([])}finally{g(!1)}};return o?e.jsx("div",{className:"text-center py-8",children:"Loading transaction history..."}):a.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No transactions found"}):e.jsx("div",{className:"space-y-4",children:Array.isArray(a)&&a.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.type==="purchase"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.type==="purchase"?"+":"-"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.description||`${t.type} transaction`}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:new Date(t.created_at).toLocaleDateString()}),(n==null?void 0:n.isSuperAdmin)&&t.user_email&&e.jsxs("p",{children:["User: ",t.user_email]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${t.type==="purchase"?"text-green-600":"text-red-600"}`,children:[t.type==="purchase"?"+":"-",Math.abs(t.amount)," credits"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Balance: ",t.balance_after]})]})]},t.id))})},xe=()=>{const[a,r]=i.useState([]),[o,g]=i.useState(!0);i.useEffect(()=>{B()},[]);const B=async()=>{try{g(!0);const t=await y.get("/api/credits/admin/users");console.log("Users Credits API Response:",t.data);let x=[];t.data.data&&(Array.isArray(t.data.data.users)?x=t.data.data.users:Array.isArray(t.data.data)&&(x=t.data.data)),console.log("Processed users data:",x),r(x)}catch(t){console.error("Error fetching all users credits:",t),d.error("Failed to load users billing information"),r([])}finally{g(!1)}};return o?e.jsx("div",{className:"text-center py-8",children:"Loading users billing information..."}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"All Users Plans & Billing"}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No users found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Total Credits"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Used Credits"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Available"}),e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-900 dark:text-white",children:"Status"})]})}),e.jsx("tbody",{children:Array.isArray(a)&&a.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[t.first_name," ",t.last_name]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:t.email}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-900 dark:text-white",children:parseFloat(t.total_credits||0).toFixed(2)}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-600 dark:text-gray-400",children:parseFloat(t.used_credits||0).toFixed(2)}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:`font-medium ${parseFloat(t.available_credits||0)<=10?"text-red-600":"text-green-600"}`,children:parseFloat(t.available_credits||0).toFixed(2)})}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx(N,{variant:parseFloat(t.available_credits||0)<=0?"destructive":parseFloat(t.available_credits||0)<=10?"secondary":"default",children:parseFloat(t.available_credits||0)<=0?"No Credits":parseFloat(t.available_credits||0)<=10?"Low Credits":"Active"})})]},t.user_id))})]})})})]})};return Q?e.jsx(G,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):e.jsx(G,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-74 bg-white-900 border border-gray-200 dark:bg-gray-900 min-h-screen",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx(ge,{className:"h-6 w-6 text-black"}),e.jsx("h1",{className:"text-xl font-semibold text-black",children:"Settings"})]}),e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("div",{className:`p-3 flex items-center justify-between rounded-lg cursor-pointer transition-colors ${l==="profile"?"bg-primary dark:bg-gray-800 text-white font-medium":"text-black hover:text-white hover:bg-primary/90 dark:hover:bg-primary/90"}`,onClick:()=>f("profile"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"My Profile"})]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:`p-3 flex items-center justify-between rounded-lg cursor-pointer transition-colors ${l==="billing"?"bg-primary dark:bg-gray-800 text-white font-medium":"text-black hover:text-white hover:bg-primary/90 dark:hover:bg-primary/90"}`,onClick:()=>f("billing"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Plan & Billing"})]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:`p-3 flex items-center justify-between rounded-lg cursor-pointer transition-colors ${l==="transactions"?"bg-primary dark:bg-gray-800 text-white font-medium":"text-black hover:text-white hover:bg-primary/90 dark:hover:bg-primary/90"}`,onClick:()=>f("transactions"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Transaction History"})]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:`p-3 flex items-center justify-between rounded-lg cursor-pointer transition-colors ${l==="security"?"bg-primary dark:bg-gray-800 text-white font-medium":"text-black hover:text-white hover:bg-primary/90 dark:hover:bg-primary/90"}`,onClick:()=>f("security"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Security"})]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("div",{className:`p-3 flex items-center justify-between rounded-lg cursor-pointer transition-colors ${l==="tags"?"bg-primary dark:bg-gray-800 text-white font-medium":"text-black hover:text-white hover:bg-primary/90 dark:hover:bg-primary/90"}`,onClick:()=>f("tags"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Tags"})]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Account"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[l==="profile"&&"Profile",l==="billing"&&"Plan & Billing",l==="transactions"&&"Transaction History",l==="security"&&"Security",l==="tags"&&"Tags"]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:[l==="profile"&&"My Profile",l==="billing"&&"Plan & Billing",l==="transactions"&&"Transaction History",l==="security"&&"Security Settings",l==="tags"&&"Tags"]})}),l==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-lg p-6 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"}),e.jsx("div",{className:"relative flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Ne,{className:"h-16 w-16 border-2 border-white/20",children:[e.jsx(ve,{src:"",alt:X()}),e.jsx(ke,{className:"bg-green-500 text-white text-lg font-semibold",children:oe()})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:X()}),e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:s==null?void 0:s.email}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"bg-white/20 text-white border-white/30",children:ce(s)}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Active"})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Personal Information"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"first_name",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"First Name"}),b?e.jsx(p,{id:"first_name",value:h.first_name,onChange:a=>S("first_name",a.target.value),placeholder:"Enter your first name"}):e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:h.first_name||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"last_name",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last Name"}),b?e.jsx(p,{id:"last_name",value:h.last_name,onChange:a=>S("last_name",a.target.value),placeholder:"Enter your last name"}):e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:h.last_name||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),b?e.jsx(p,{id:"email",type:"email",value:h.email,onChange:a=>S("email",a.target.value),placeholder:"Enter your email address"}):e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:h.email||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"phone_number",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cell Phone"}),b?e.jsx(p,{id:"phone_number",value:h.phone_number,onChange:a=>S("phone_number",a.target.value),placeholder:"Enter your phone number"}):e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:h.phone_number||"N/A"})]})]}),b&&e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(c,{variant:"outline",onClick:()=>{I(!1);const a=(s==null?void 0:s.first_name)||(s!=null&&s.name?s.name.split(" ")[0]:""),r=(s==null?void 0:s.last_name)||(s!=null&&s.name?s.name.split(" ").slice(1).join(" "):"");j({first_name:a,last_name:r,username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",phone_number:(s==null?void 0:s.phone_number)||""})},children:"Cancel"}),e.jsxs(c,{onClick:ne,disabled:k,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),k?"Saving...":"Save Changes"]})]})]})]})]}),l==="billing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Plan & Credits"}),e.jsx(_e,{showPurchaseButton:!0,compact:!1,showUsageButton:!0})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Plan Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plan Type"}),e.jsx(N,{variant:"default",children:n!=null&&n.isSuperAdmin?"Super Admin (Unlimited)":"Credit-Based Plan"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx(N,{variant:"outline",className:"text-green-600 border-green-600",children:"Active"})]}),(n==null?void 0:n.isSuperAdmin)&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Access Level"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Unlimited Access to All Features"})]})]})]}),(n==null?void 0:n.isSuperAdmin)&&e.jsx(xe,{})]}),l==="transactions"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transaction History"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:n!=null&&n.isSuperAdmin?"View all users credit transactions and purchases":"View all your credit transactions and purchases"})]}),e.jsx("div",{className:"p-6",children:e.jsx(me,{})})]}),l==="security"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Manage your account security and password"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-6 bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-md",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"currentPassword",className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"currentPassword",type:U?"text":"password",value:m.currentPassword,onChange:a=>w(r=>({...r,currentPassword:a.target.value})),placeholder:"Enter your current password",className:`
    w-full
    rounded-md
    border
    border-gray-300
    dark:border-gray-600
    bg-transparent
    px-3 py-2
    text-sm
    text-gray-900 dark:text-gray-100
    placeholder-gray-400
    focus:border-indigo-500
    focus:ring-1
    focus:ring-indigo-500
    transition
    duration-200
  `}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-indigo-500",onClick:()=>Z(!U),children:U?e.jsx($,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"newPassword",className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"newPassword",type:F?"text":"password",value:m.newPassword,onChange:a=>w(r=>({...r,newPassword:a.target.value})),placeholder:"Enter your new password",className:"pr-10 rounded-lg border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-indigo-500",onClick:()=>ee(!F),children:F?e.jsx($,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"confirmPassword",type:L?"text":"password",value:m.confirmPassword,onChange:a=>w(r=>({...r,confirmPassword:a.target.value})),placeholder:"Confirm your new password",className:"pr-10 rounded-lg border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-indigo-500",onClick:()=>ae(!L),children:L?e.jsx($,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(c,{variant:"outline",className:"rounded-lg border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>w({currentPassword:"",newPassword:"",confirmPassword:""}),children:"Cancel"}),e.jsxs(c,{onClick:ie,disabled:k,className:"rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white shadow-md",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),k?"Changing...":"Change Password"]})]})]})})})]}),l==="tags"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add New Tag"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(p,{placeholder:"Enter tag name",value:P,onChange:a=>H(a.target.value),onKeyDown:a=>{a.key==="Enter"&&V()},className:"flex-1"}),e.jsx(c,{onClick:V,disabled:!P.trim(),children:"Add Tag"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Your Tags"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Manage your personal tags"})]}),e.jsx("div",{className:"p-6",children:re?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading tags..."})]}):R.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No tags found. Create your first tag above."}):e.jsx("div",{className:"space-y-3",children:R.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("div",{className:"flex-1",children:W===a.tag_id?e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(p,{value:C,onChange:r=>A(r.target.value),onKeyDown:r=>{r.key==="Enter"?q(a.tag_id):r.key==="Escape"&&O()},className:"flex-1",autoFocus:!0}),e.jsx(c,{size:"sm",onClick:()=>q(a.tag_id),disabled:!C.trim(),children:"Save"}),e.jsx(c,{size:"sm",variant:"outline",onClick:O,children:"Cancel"})]}):e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(N,{variant:"secondary",className:"text-sm",children:a.tag_name})})}),W!==a.tag_id&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{size:"sm",variant:"outline",onClick:()=>le(a),children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"destructive",onClick:()=>de(a.tag_id),children:"Delete"})]})]},a.tag_id))})})]})]})]})]})})})};export{ze as default};
//# sourceMappingURL=Settings-DIsCl92X.js.map
