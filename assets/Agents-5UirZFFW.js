import{j as e,a$ as H,b as O,e as k,am as D,b1 as K,aB as R,D as J,y as X,H as Y,b2 as Z}from"./ui-S570Xcny.js";import{M as ee}from"./ModernTable-CXVr2xJv.js";import{H as se}from"./Header-BSPv7FNt.js";import{P as te}from"./Page-BJWqKr2O.js";import{B as L}from"./badge-ij7fArnn.js";import{A as T,a as E}from"./avatar-Cwu0Oo_-.js";import{C as ae}from"./card-DMfGhRm1.js";import{D as re,a as ne,b as ie,e as le}from"./dropdown-menu-Bxst4dXB.js";import{B as b}from"./button-BSd9MMPp.js";import{r as m}from"./vendor-DG599jyl.js";import{P as ce,a as oe,b as de}from"./popover-51UZHq0a.js";import{L as C}from"./label-C1-UM1F-.js";import{R as me,a as xe}from"./radio-group-DT_qJUyQ.js";import{S as he}from"./slider-DHO3HMwz.js";import{S as ue}from"./separator-Wr5jI2gW.js";import{u as ge,c as pe,b as je}from"./query-Cab5P5bd.js";import{d as fe,a as ve,g as ye}from"./agentService-BC3vXPZD.js";import{u as Ne}from"./index-Dlzy9K_J.js";import{C as we}from"./CustomPagination-BvK-v0_h.js";import{u as be,c as Se}from"./router-BavLd_S0.js";import{L as Ce}from"./Loading-DqfgU-VE.js";import"./table-Beiyegzh.js";import"./sheet-C7DsuPAk.js";import"./scroll-area-C-pzVjaj.js";import"./index-BHBJ6RT-.js";import"./index-CWMUKvWL.js";import"./index-HDeFwIcs.js";const Ae=({data:g,onItemClick:y,actions:i})=>{const l=r=>r.split(" ").map(d=>d.charAt(0)).join("").toUpperCase(),c=(r,d)=>Math.floor(Math.random()*(d-r+1)+r);return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mt-6",children:g.map(r=>{const d=`$${(Math.random()*100).toFixed(2)}`,n=c(0,1e4),x=c(0,2e6),p=Math.random()>.5?"up":"down",f=["active","inactive","training"],h=f[Math.floor(Math.random()*f.length)],N=h==="active"?"text-green-500":h==="inactive"?"text-gray-400":"text-yellow-500";return e.jsx(ae,{className:"overflow-hidden border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>y(r),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"h-10 w-10 bg-gradient-to-br from-primary/20 to-primary/10",children:e.jsx(E,{className:"text-primary font-medium",children:l(String(r.name))})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:String(r.name)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",String(r.id).substring(0,8)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100",onClick:a=>{a.stopPropagation(),console.log("Share",r)},children:e.jsx(H,{className:"h-4 w-4 text-gray-500"})}),e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,onClick:a=>a.stopPropagation(),children:e.jsx(b,{variant:"ghost",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100",children:e.jsx(O,{className:"h-4 w-4 text-gray-500"})})}),e.jsx(ie,{align:"end",className:"w-[160px]",children:i.map((a,u)=>e.jsxs(le,{onClick:j=>{j.stopPropagation(),a.onClick(r)},className:"cursor-pointer",children:[e.jsx("span",{className:"mr-2 h-4 w-4 text-gray-500",children:a.icon}),e.jsx("span",{children:a.label})]},u))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Price"}),e.jsx("div",{className:"font-medium text-gray-900",children:d})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:`h-2 w-2 mr-2 fill-current ${N}`}),e.jsx("span",{className:"capitalize text-gray-700",children:h})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Sales"}),e.jsx("div",{className:"font-medium text-gray-900",children:n>0?n.toLocaleString():"—"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Revenue"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:x>0?`$${x.toLocaleString()}`:"—"}),x>0&&e.jsx(D,{className:`h-3 w-3 ${p==="up"?"text-green-500":"text-red-500"}`})]})]})]})]})},r.id)})})},Pe=({onFilterChange:g})=>{const[y,i]=m.useState(!1),[l,c]=m.useState([]),[r,d]=m.useState(null),[n,x]=m.useState([0,100]),p=[{id:"active",label:"Active"},{id:"inactive",label:"Inactive"},{id:"training",label:"Training"}],f=()=>{const a={status:r,priceRange:n},u=[];r&&u.push(`Status: ${r}`),(n[0]>0||n[1]<100)&&u.push(`Price: $${n[0]} - $${n[1]}`),c(u),g(a),i(!1)},h=()=>{d(null),x([0,100]),c([]),g({})},N=a=>{const u=l.filter(j=>j!==a);c(u),a.startsWith("Status:")&&d(null),a.startsWith("Price:")&&x([0,100]),g({status:a.startsWith("Status:")?null:r,priceRange:a.startsWith("Price:")?[0,100]:n})};return e.jsxs("div",{className:"relative",children:[e.jsxs(ce,{open:y,onOpenChange:i,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:`h-9 border-gray-200 text-gray-700 hover:bg-gray-50 ${l.length>0?"border-primary/50 bg-primary/5":""}`,children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),"Filters",l.length>0&&e.jsx("span",{className:"ml-1 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] font-medium text-white",children:l.length})]})}),e.jsx(de,{className:"w-[280px] p-4",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Filter Agents"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-xs font-medium",children:"Status"}),e.jsx(me,{value:r||"",onValueChange:a=>d(a||null),children:p.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{value:a.id,id:`status-${a.id}`}),e.jsx(C,{htmlFor:`status-${a.id}`,className:"text-sm font-normal cursor-pointer",children:a.label})]},a.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-xs font-medium",children:"Price Range"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["$",n[0]," - $",n[1]]})]}),e.jsx(he,{defaultValue:[0,100],value:n,max:100,step:1,onValueChange:x,className:"py-2"})]}),e.jsx(ue,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:h,className:"text-xs h-8",children:"Reset"}),e.jsx(b,{size:"sm",onClick:f,className:"text-xs h-8 bg-primary",children:"Apply Filters"})]})]})})]}),l.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(a=>e.jsxs(L,{variant:"outline",className:"px-2 py-1 text-xs bg-primary/5 border-primary/20 text-primary flex items-center gap-1",children:[a,e.jsx("button",{className:"ml-1 text-primary hover:text-primary/80",onClick:()=>N(a),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},a))})]})},ss=()=>{const g=be(),y=ge(),{user:i}=Ne(),[l,c]=Se(),[r,d]=m.useState(l.get("search")||""),[n,x]=m.useState(r),[p,f]=m.useState(l.get("view")==="grid"?"grid":"list"),[h,N]=m.useState({}),[a,u]=m.useState(!1),j=parseInt(l.get("page")||"1"),I=pe({mutationFn:fe,onSuccess:()=>{y.invalidateQueries({queryKey:["agents",i==null?void 0:i.id]})}});m.useEffect(()=>{const s=setTimeout(()=>{x(r),c(t=>{const o=new URLSearchParams(t);return r?o.set("search",r):o.delete("search"),o})},500);return()=>clearTimeout(s)},[r,c]),m.useEffect(()=>{c(s=>{const t=new URLSearchParams(s);return p==="grid"?t.set("view","grid"):t.delete("view"),t})},[p,c]);const{data:A,isLoading:P,error:F}=je({queryKey:["agents",i==null?void 0:i.id,j,n,h],queryFn:()=>ve(j,n),enabled:!!(i!=null&&i.id),retry:(s,t)=>{var v;return[404,204,402].includes((v=t==null?void 0:t.response)==null?void 0:v.status)?!1:s<2}});if(P)return e.jsx(Ce,{});if(F)return console.error("Error fetching agents",F),e.jsx("div",{children:"Error loading agents"});let w=[...A.data];h.status&&(w=w.filter((s,t)=>{const o=["active","inactive","training"];return o[t%o.length]===h.status}));const V=s=>{c(t=>{const o=new URLSearchParams(t);return o.set("page",s.toString()),o})},B=s=>{d(s)},z=s=>{f(s)},_=s=>{N(s),u(Object.keys(s).some(t=>s[t]!==null&&(typeof s[t]!="object"||Array.isArray(s[t])&&(s[t][0]>0||s[t][1]<100))))},U=s=>s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase(),$=(s,t)=>Math.floor(Math.random()*(t-s+1)+s),W=async s=>{try{const t=await ye(s.id);console.log("Agent details:",t)}catch(t){console.error("Error fetching agent details:",t)}},q=s=>{g(`/agents/edit/${s.id}`)},G=async s=>{if(confirm(`Are you sure you want to delete "${s.name}"?`))try{await I.mutateAsync(s.id)}catch(t){console.error("Error deleting agent:",t)}},M=[{label:"View Details",icon:e.jsx(X,{className:"h-4 w-4"}),onClick:W},{label:"Edit Agent",icon:e.jsx(Y,{className:"h-4 w-4"}),onClick:q},{label:"Delete Agent",icon:e.jsx(Z,{className:"h-4 w-4"}),onClick:G}];return e.jsxs(te,{children:[e.jsx(se,{title:"Voice AI Agents",buttonText:"Agent",action:()=>g("/agents/add"),filterByName:!0,filterWord:r,onFilterChange:B,useSheet:!1,viewMode:p,onViewModeChange:z,showViewToggle:!0,showFilters:!1}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(L,{variant:"secondary",className:"px-3 py-1",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[w.length||0," Agents"]})]})}),e.jsx(Pe,{onFilterChange:_})]}),a&&e.jsx("div",{className:"mb-4"}),p==="list"?e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx(ee,{data:w,isLoading:P,isSelectable:!0,showColumnSelection:!0,onRowClick:s=>console.log("Row clicked",s),columns:[{header:"Name",accessor:"name",className:"min-w-[200px]",cell:(s,t)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"h-9 w-9 bg-gradient-to-br from-primary/20 to-primary/10",children:e.jsx(E,{className:"text-primary font-medium",children:U(String(s))})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:String(s)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",String(t.id).substring(0,8)]})]})]}),sortable:!0},{header:"Price",accessor:"id",className:"min-w-[120px]",cell:()=>{const s=`$${(Math.random()*100).toFixed(2)}`;return e.jsx("div",{className:"text-left font-medium text-gray-900",children:s})},sortable:!0},{header:"Status",accessor:"user_id",className:"min-w-[120px]",cell:(s,t,o)=>{const v=["active","inactive","training"],S=v[(o||0)%v.length],Q=S==="active"?"text-green-500":S==="inactive"?"text-gray-400":"text-yellow-500";return e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:`h-2 w-2 mr-2 fill-current ${Q}`}),e.jsx("span",{className:"capitalize text-gray-700",children:S})]})}},{header:"Total Sales",accessor:"created_at",className:"min-w-[120px]",cell:()=>{const s=$(0,1e4);return e.jsx("div",{className:"text-left font-medium text-gray-900",children:s>0?s.toLocaleString():"—"})},sortable:!0},{header:"Total Revenue",accessor:"first_message",className:"min-w-[150px]",cell:()=>{const s=$(0,2e6),t=Math.random()>.5?"up":"down";return e.jsxs("div",{className:"flex items-start justify-start space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s>0?`$${s.toLocaleString()}`:"—"}),s>0&&e.jsx(D,{className:`h-4 w-4 ${t==="up"?"text-green-500":"text-red-500"}`})]})},sortable:!0}],actions:M,emptyState:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No agents found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first voice AI agent"}),e.jsxs("button",{className:"bg-primary px-4 py-2 rounded-md text-white flex items-center justify-center mx-auto",onClick:()=>console.log("Create agent"),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Create Agent"]})]})})}):e.jsx(Ae,{data:w,onItemClick:s=>console.log("Grid item clicked",s),actions:M}),e.jsx("div",{className:"mt-8 border-t border-gray-200 pt-4",children:e.jsx(we,{currentPage:j,totalPages:A.totalPages,onPageChange:V})})]})};export{ss as default};
//# sourceMappingURL=Agents-5UirZFFW.js.map
