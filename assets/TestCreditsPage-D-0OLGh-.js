import{j as e,bz as w,bj as P,bx as _,K as S}from"./ui-CZ40mCLE.js";import{r as c}from"./vendor-DG599jyl.js";import{a as o,t as n,B as u,C as l,b as d,c as f,d as N,n as b}from"./index-Bg3h4xhe.js";import"./router-BnJytTjr.js";import"./query-Dkjx6fBT.js";const R=()=>{const[y,x]=c.useState(!0),[r,g]=c.useState(null),[m,v]=c.useState([]),[h,j]=c.useState(null);c.useEffect(()=>{p()},[]);const p=async()=>{var s,i;try{x(!0),j(null),console.log("ðŸ” Testing credit system endpoints...");const a=await o.get("/api/credits/balance");console.log("âœ… Credit balance:",a.data),g(a.data.data);const t=await o.get("/api/credits/packages");console.log("âœ… Credit packages:",t.data),v(t.data.data||[]),n.success("Credit system loaded successfully!")}catch(a){console.error("âŒ Error fetching credit data:",a),j(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message),n.error("Failed to load credit system")}finally{x(!1)}},C=async s=>{var i,a;try{console.log("ðŸ” Testing payment intent creation...");const t=await o.post("/api/credits/purchase",{packageId:s});console.log("âœ… Payment intent created:",t.data),n.success("Payment intent created successfully!")}catch(t){console.error("âŒ Payment intent error:",t),n.error("Payment intent failed: "+(((a=(i=t.response)==null?void 0:i.data)==null?void 0:a.message)||t.message))}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{children:"Loading credit system..."})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Credit System Test"}),e.jsx(u,{onClick:p,variant:"outline",children:"Refresh Data"})]}),h&&e.jsx(l,{className:"border-red-200 bg-red-50",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"text-red-800",children:["Error: ",h]})]})})}),e.jsxs(l,{children:[e.jsx(f,{children:e.jsxs(N,{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{children:"Credit Balance"})]})}),e.jsx(d,{children:r?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Available Credits:"}),e.jsx(b,{variant:r.isSuperAdmin?"default":"secondary",children:r.available_credits})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total Credits:"}),e.jsx("span",{children:r.total_credits})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Used Credits:"}),e.jsx("span",{children:r.used_credits})]}),r.isSuperAdmin&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Super Admin - Unlimited Credits"})]})]}):e.jsx("p",{children:"No credit data available"})})]}),e.jsxs(l,{children:[e.jsx(f,{children:e.jsxs(N,{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsx("span",{children:"Available Credit Packages"})]})}),e.jsx(d,{children:m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsx(l,{className:"border-2 hover:border-blue-300 transition-colors",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),s.is_popular&&e.jsx(b,{variant:"default",children:"Popular"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Credits:"}),e.jsx("span",{children:s.total_credits})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price:"}),e.jsxs("span",{className:"font-semibold",children:["$",s.price_dollars]})]}),s.bonus_credits>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Bonus:"}),e.jsxs("span",{children:["+",s.bonus_credits," credits"]})]})]}),e.jsx(u,{onClick:()=>C(s.package_id),className:"w-full mt-2",size:"sm",children:"Test Purchase"})]})})},s.id))}):e.jsx("p",{children:"No credit packages available"})})]})]})};export{R as default};
//# sourceMappingURL=TestCreditsPage-D-0OLGh-.js.map
