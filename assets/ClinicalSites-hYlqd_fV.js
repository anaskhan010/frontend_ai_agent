import{j as e,bz as q,K as C,X as L,bQ as b,M,aC as k,ax as Q,aI as _,F as U,N as z,T as B}from"./ui-CZ40mCLE.js";import{r as h}from"./vendor-DG599jyl.js";import{t as n,B as r,q as I,z as O,r as H,s as K,v as R,x as $,L as i,I as l,T as G,C as X,c as J,d as V,b as W,n as Y}from"./index-DAuDxp-c.js";import{u as Z,b as ee,c as v}from"./query-Dkjx6fBT.js";import{a as se,c as ae,u as te,d as ie}from"./clinicalSiteService-CZWDmjZH.js";import"./router-BnJytTjr.js";const xe=()=>{const[d,S]=h.useState(""),[w,c]=h.useState(!1),[o,u]=h.useState(null),[a,t]=h.useState({site_name:"",site_code:"",description:"",address:"",city:"",state:"",country:"USA",postal_code:"",phone:"",email:"",contact_person:""}),m=Z(),{data:p,isLoading:F,error:D}=ee({queryKey:["clinical-sites"],queryFn:se}),N=v({mutationFn:ae,onSuccess:()=>{m.invalidateQueries(["clinical-sites"]),c(!1),j(),n.success("Clinical site created successfully")},onError:s=>{n.error("Failed to create clinical site"),console.error("Create error:",s)}}),y=v({mutationFn:({id:s,data:x})=>te(s,x),onSuccess:()=>{m.invalidateQueries(["clinical-sites"]),u(null),c(!1),j(),n.success("Clinical site updated successfully")},onError:s=>{n.error("Failed to update clinical site"),console.error("Update error:",s)}}),A=v({mutationFn:ie,onSuccess:()=>{m.invalidateQueries(["clinical-sites"]),n.success("Clinical site deleted successfully")},onError:s=>{n.error("Failed to delete clinical site"),console.error("Delete error:",s)}}),j=()=>{t({site_name:"",site_code:"",description:"",address:"",city:"",state:"",country:"USA",postal_code:"",phone:"",email:"",contact_person:""})},E=s=>{s.preventDefault(),o?y.mutate({id:o.id,data:a}):N.mutate(a)},P=s=>{u(s),t({site_name:s.site_name||"",site_code:s.site_code||"",description:s.description||"",address:s.address||"",city:s.city||"",state:s.state||"",country:s.country||"USA",postal_code:s.postal_code||"",phone:s.phone||"",email:s.email||"",contact_person:s.contact_person||""}),c(!0)},T=s=>{window.confirm("Are you sure you want to delete this clinical site?")&&A.mutate(s)},g=((p==null?void 0:p.data)||[]).filter(s=>{var x,f;return((x=s.site_name)==null?void 0:x.toLowerCase().includes(d.toLowerCase()))||((f=s.site_code)==null?void 0:f.toLowerCase().includes(d.toLowerCase()))});return F?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx("div",{className:"h-64 bg-gray-200 rounded"},s))})]})}):D?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Sites"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load clinical sites. Please try again."}),e.jsx(r,{onClick:()=>m.invalidateQueries(["clinical-sites"]),children:"Retry"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Clinical Sites"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage research facilities and locations"})]}),e.jsxs(I,{open:w,onOpenChange:c,children:[e.jsx(O,{asChild:!0,children:e.jsxs(r,{className:"flex items-center gap-2",onClick:()=>{u(null),j()},children:[e.jsx(C,{className:"h-4 w-4"}),"Add New Site"]})}),e.jsxs(H,{className:"max-w-2xl","aria-describedby":"site-form-description",children:[e.jsxs(K,{children:[e.jsx(R,{children:o?"Edit Clinical Site":"Create New Clinical Site"}),e.jsx($,{id:"site-form-description",children:o?"Update the clinical site information below. All required fields must be completed.":"Fill out the form below to add a new clinical research site. All required fields must be completed."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"site_name",children:"Site Name *"}),e.jsx(l,{id:"site_name",value:a.site_name,onChange:s=>t({...a,site_name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"site_code",children:"Site Code *"}),e.jsx(l,{id:"site_code",value:a.site_code,onChange:s=>t({...a,site_code:s.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx(G,{id:"description",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"address",children:"Address"}),e.jsx(l,{id:"address",value:a.address,onChange:s=>t({...a,address:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsx(l,{id:"city",value:a.city,onChange:s=>t({...a,city:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"state",children:"State"}),e.jsx(l,{id:"state",value:a.state,onChange:s=>t({...a,state:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(l,{id:"postal_code",value:a.postal_code,onChange:s=>t({...a,postal_code:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"Phone"}),e.jsx(l,{id:"phone",value:a.phone,onChange:s=>t({...a,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",value:a.email,onChange:s=>t({...a,email:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(l,{id:"contact_person",value:a.contact_person,onChange:s=>t({...a,contact_person:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:N.isPending||y.isPending,children:o?"Update Site":"Create Site"})]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(l,{placeholder:"Search sites...",value:d,onChange:s=>S(s.target.value),className:"pl-10"})]})}),e.jsxs(X,{children:[e.jsx(J,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Clinical Sites (",g.length,")"]})}),e.jsx(W,{children:g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Sites Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d?"No sites match your search criteria.":"Get started by creating your first clinical site."}),!d&&e.jsxs(r,{onClick:()=>c(!0),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add First Site"]})]}):e.jsx("div",{className:"space-y-4",children:g.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.site_name}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:s.site_code}),e.jsx(Y,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.address&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),s.address,s.city&&s.state&&`, ${s.city}, ${s.state}`]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),s.phone]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),s.email]}),s.contact_person&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Contact: ",s.contact_person]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4 text-blue-500"}),s.active_studies||0," Active Studies"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4 text-green-500"}),s.total_participants||0," Participants"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>P(s),children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>T(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})},s.id))})})]})]})};export{xe as default};
//# sourceMappingURL=ClinicalSites-hYlqd_fV.js.map
