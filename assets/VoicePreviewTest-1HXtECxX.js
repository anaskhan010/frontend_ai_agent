import{j as e,aS as S,bY as I,ay as T,bX as R}from"./ui-B8VyAbFl.js";import{r as c}from"./vendor-DG599jyl.js";import{C as b,d as U,e as B,p as V,f as D,b as O,t as i,B as C,a as z}from"./index-BQqu6sK2.js";import{V as H}from"./vapiProviders-ChvPBQcq.js";import"./router-BnJytTjr.js";import"./query-CWB_8EHL.js";const k=({previewUrl:t,voiceName:a,provider:u})=>{const[m,d]=c.useState(!1),[f,o]=c.useState(!1),[l,w]=c.useState(null),[h,p]=c.useState(!1),x=()=>{l&&(l.pause(),l.removeEventListener("loadstart",g),l.removeEventListener("canplay",v),l.removeEventListener("ended",y),l.removeEventListener("error",E),l.removeEventListener("loadeddata",j),w(null))},g=()=>o(!0),v=()=>o(!1),j=()=>o(!1),y=()=>{d(!1),o(!1)},E=n=>{console.error("Audio error for",a,"from",u,":",n),o(!1),d(!1),p(!0),i.error(`Preview not available for ${a} (${u})`)},$=async()=>{if(m&&l){l.pause(),d(!1);return}p(!1);try{if(o(!0),x(),!t||t.trim()==="")throw new Error("No preview URL available");t.startsWith("/api/voices/preview")?await A(t):await P(t)}catch(n){console.error("Error playing voice preview:",n),o(!1),d(!1),p(!0),n instanceof Error?n.message.includes("timeout")?i.error(`Preview timeout for ${a}`):n.message.includes("No preview URL")?i.error(`No preview available for ${a}`):n.message.includes("Voice preview not available")?i.error(`${a} preview is currently unavailable`):i.error(`Preview unavailable for ${a}`):i.error(`Failed to play preview for ${a}`)}},A=async n=>{var r;try{const s=await z.get(n);if(console.log("ðŸŽµ Voice preview response:",s.data),s.data.success&&s.data.audioUrl)console.log("âœ… Playing audio from:",s.data.audioUrl),await P(s.data.audioUrl),i.success(`Playing ${a} from ${u}`);else if(s.data.note){console.log("â„¹ï¸ Showing note:",s.data.note),i.info(s.data.note),o(!1);return}else if(s.data.message&&!s.data.audioUrl){console.log("â„¹ï¸ Showing message:",s.data.message),i.info(s.data.message),o(!1);return}else throw console.log("âŒ No audio URL or note found in response"),new Error("Voice preview not available")}catch(s){throw((r=s.response)==null?void 0:r.status)===401?new Error("Authentication failed - please log in again"):s}},P=async n=>{const r=new Audio;r.addEventListener("loadstart",g),r.addEventListener("canplay",v),r.addEventListener("loadeddata",j),r.addEventListener("ended",y),r.addEventListener("error",E),r.preload="metadata",r.crossOrigin="anonymous",w(r),r.src=n,r.load(),await new Promise((s,L)=>{const N=setTimeout(()=>{L(new Error("Audio load timeout"))},1e4);r.addEventListener("canplay",()=>{clearTimeout(N),s(void 0)},{once:!0}),r.addEventListener("error",()=>{clearTimeout(N),L(new Error("Audio load failed"))},{once:!0})}),await r.play(),d(!0),o(!1),i.success(`Playing ${a} from ${u}`)};return c.useEffect(()=>x,[]),e.jsxs(C,{variant:"outline",size:"sm",onClick:$,disabled:f||h,className:"w-full",children:[f?e.jsx(S,{className:"h-3 w-3 mr-1 animate-spin"}):m?e.jsx(I,{className:"h-3 w-3 mr-1"}):h?e.jsx(T,{className:"h-3 w-3 mr-1 opacity-50"}):e.jsx(R,{className:"h-3 w-3 mr-1"}),f?"Loading...":m?"Pause":h?"Unavailable":"Preview"]})},G=()=>e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"VAPI Voice Preview Test"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Test all voice previews from VAPI providers"})]}),H.map(t=>e.jsxs(b,{className:"w-full",children:[e.jsxs(U,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[t.name,e.jsxs(V,{variant:"secondary",children:[t.voices.length," voices"]})]}),e.jsx(D,{children:t.description})]}),e.jsx(O,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.voices.map(a=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsx(V,{variant:"outline",className:"text-xs",children:a.gender})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:a.language}),a.accent&&e.jsxs("span",{children:["â€¢ ",a.accent]})]}),a.preview?e.jsx(k,{previewUrl:a.preview,voiceName:a.name,provider:t.name}):e.jsx(C,{variant:"outline",size:"sm",disabled:!0,className:"w-full",children:"No Preview Available"})]})},a.id))})})]},t.id))]});export{G as default};
//# sourceMappingURL=VoicePreviewTest-1HXtECxX.js.map
