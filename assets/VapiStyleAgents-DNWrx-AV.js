import{j as e,bU as et,aB as be,bW as st,bX as at,ay as ke,aC as qa,aS as re,bV as tt,aw as Te,a9 as ie,ba as rt,bv as it,am as nt,K as Pe,X as Ka,V as lt,k as ot,c6 as ct,c7 as dt,T as Oa,bo as Ua,Y as mt,c8 as ht,aQ as we}from"./ui-CZ40mCLE.js";import{r as w,a as xt}from"./vendor-DG599jyl.js";import{b as Ve,u as ut,c as Ne}from"./query-Dkjx6fBT.js";import{b as gt,c as pt,e as bt,u as ft,d as jt}from"./agentService-_dZ-yfpB.js";import{t as u,B as R,q as Ee,r as _e,s as Fe,v as Oe,C as B,c as q,d as K,b as L,I as N,S as M,f as S,g as k,h as T,i as d,n as _,u as vt,T as G,P as wt,Q as Nt,R as ye,U as le}from"./index-DAuDxp-c.js";import{A as Ce,a as Ie}from"./avatar-CjZwSbiB.js";import{_ as oe}from"./vapi-CWmUDqtF.js";import{g as yt,a as Ct,u as It}from"./defaultAssistantTemplateService-CZLp2PPz.js";import{M as Aa,g as Me,V as ce,a as Se,T as Ra,b as Ba,c as La,d as $a,e as za}from"./vapiProviders-2vMYfGJi.js";import"./router-BnJytTjr.js";const Mt=({agentId:$,agentName:F="AI Assistant",agentConfig:i,onCallStart:W,onCallEnd:a,onError:O})=>{const U="eb3b26e3-7dbb-4fd6-a545-a954756a43aa",y=w.useRef(null),E=w.useRef(null),[b,V]=w.useState({isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,volumeLevel:0,callDuration:0,status:"idle",callId:void 0}),[Y,ae]=w.useState([]),A=w.useRef(null),te=U!=="your-vapi-public-key-here";console.log("ðŸ” VAPI Debug Info:"),console.log("- Vapi class available:",typeof oe),console.log("- Public API Key:",`${U.substring(0,8)}...`),console.log("- Is configured:",te),w.useEffect(()=>{console.log("ðŸ”§ Initializing VAPI for agent:",$),console.log("ðŸ”‘ Public API Key:",`${U.substring(0,8)}...`),console.log("âœ… Is VAPI Configured:",te);try{console.log("ðŸ§ª Testing VAPI import..."),console.log("- Vapi constructor:",oe),console.log("- typeof Vapi:",typeof oe),typeof oe=="function"?console.log("âœ… VAPI import successful"):console.error("âŒ VAPI import failed - not a constructor")}catch(t){console.error("âŒ VAPI import test failed:",t)}try{y.current=new oe(U),console.log("âœ… VAPI instance created successfully"),de()}catch(t){console.error("âŒ Failed to initialize VAPI:",t),u.error("Failed to initialize VAPI. Please check your API key.")}return()=>{y.current&&y.current.stop(),A.current&&clearInterval(A.current),E.current&&(E.current.getTracks().forEach(t=>t.stop()),E.current=null)}},[U,$]);const de=()=>{y.current&&(y.current.on("call-start",()=>{console.log("ðŸŽ™ï¸ VAPI call started"),V(t=>({...t,isConnected:!0,isConnecting:!1,status:"connected",callId:Date.now().toString()})),v(),u.success("Call connected! You can now speak."),W==null||W()}),y.current.on("call-end",()=>{console.log("ðŸ“ž VAPI call ended successfully"),V(t=>({...t,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"ended",callId:void 0})),A.current&&(clearInterval(A.current),A.current=null),E.current&&(E.current.getTracks().forEach(t=>t.stop()),E.current=null),u.success("Call ended successfully"),a==null||a()}),y.current.on("error",t=>{console.error("âŒ VAPI call error:",t),V(o=>({...o,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"error",callId:void 0})),A.current&&(clearInterval(A.current),A.current=null),u.error(`Call error: ${t.message||"Unknown error"}`),O==null||O(t)}),y.current.on("speech-start",()=>{console.log("ðŸ—£ï¸ Speech started")}),y.current.on("speech-end",()=>{console.log("ðŸ¤ Speech ended")}),y.current.on("volume-level",t=>{V(o=>({...o,volumeLevel:t}))}),y.current.on("message",t=>{if(console.log("ðŸ“¨ VAPI message:",t),t.type==="transcript"&&t.transcript){const o={role:t.role||"assistant",content:t.transcript,timestamp:new Date,type:"transcript"};ae(C=>[...C,o])}}),y.current.on("error",t=>{console.error("âŒ VAPI error:",t),V(C=>({...C,isConnected:!1,isConnecting:!1,status:"error"}));let o="Unknown error";t.message&&(o=t.message,t.message.includes("assistant")&&t.message.includes("not found")?o="Assistant not found in VAPI. Please ensure the agent is properly synced with VAPI dashboard.":t.message.includes("unauthorized")||t.message.includes("401")?o="Unauthorized access. Please check your VAPI API key configuration.":(t.message.includes("microphone")||t.message.includes("permission"))&&(o="Microphone permission denied. Please allow microphone access and try again.")),u.error(`Call error: ${o}`),O==null||O(t)}))},v=()=>{A.current=setInterval(()=>{V(t=>({...t,callDuration:t.callDuration+1}))},1e3)},J=t=>{const o=Math.floor(t/60),C=t%60;return`${o}:${C.toString().padStart(2,"0")}`},Q=()=>{const t={name:F,firstMessage:(i==null?void 0:i.firstMessage)||`Hello! I'm ${F}. How can I help you today?`,model:{provider:"openai",model:"gpt-4",temperature:.7,messages:[{role:"system",content:(i==null?void 0:i.systemMessage)||`You are ${F}, a helpful AI assistant. Keep responses conversational and under 30 words when possible.`}]},voice:{provider:"vapi",voiceId:(i==null?void 0:i.voiceId)||"Cole"}};return console.log("ðŸ“‹ Assistant config created:",t),t},me=async()=>{if(console.log("ðŸš€ Starting VAPI agent call for:",$),console.log("ðŸ”‘ VAPI Public Key:",`${U.substring(0,8)}...`),console.log("ðŸ¤– Agent Config:",i),!y.current){u.error("VAPI not initialized. Please check your API key configuration.");return}try{V(o=>({...o,isConnecting:!0,status:"connecting",callDuration:0})),ae([]);const t=(i==null?void 0:i.assistant_id)||(i==null?void 0:i.assistantId);if(t){console.log("ðŸ“ž Using existing assistant ID from database:",t);const o={metadata:{portalAgentId:$,agentName:F,initiatedFrom:"portal"}};console.log("ðŸ“‹ Starting call with assistant ID:",t),console.log("ðŸ“‹ Assistant overrides:",o),await y.current.start(t,o)}else{console.log("ðŸ”„ Creating assistant configuration...");const o=Q();console.log("ðŸ“ž Starting agent call with assistant config"),console.log("ðŸ¤– Agent Name:",F);const C=o;console.log("ðŸ“‹ Call config:",C),await new Promise(H=>setTimeout(H,100)),await y.current.start(C)}}catch(t){console.error("âŒ Error starting agent call:",t),V(C=>({...C,isConnecting:!1,status:"error"}));let o="Failed to start call";t.message?(o=t.message,t.message.includes("Authentication")||t.message.includes("401")?o="Authentication failed. Please check your VAPI API key.":t.message.includes("assistant")||t.message.includes("404")?o="Assistant not found. The assistant may not exist in VAPI.":t.message.includes("permission")||t.message.includes("microphone")?o="Microphone permission denied. Please allow microphone access.":(t.message.includes("network")||t.message.includes("fetch"))&&(o="Network error. Please check your internet connection.")):t.code?o=`Error code: ${t.code}`:typeof t=="string"&&(o=t),u.error(`Failed to start call: ${o}`),console.error("ðŸ“‹ Full error details:",t)}},fe=()=>{console.log("ðŸ›‘ Stopping VAPI agent call...");try{y.current?(console.log("ðŸ“ž VAPI instance found, stopping call..."),y.current.stop(),V(t=>({...t,isConnecting:!1})),console.log("âœ… VAPI stop method called successfully")):(console.warn("âš ï¸ No VAPI instance found to stop"),u.warning("No active call to end"))}catch(t){console.error("âŒ Error stopping call:",t),u.error(`Failed to end call: ${(t==null?void 0:t.message)||"Unknown error"}`),V(o=>({...o,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"ended",callId:void 0})),E.current&&(E.current.getTracks().forEach(o=>o.stop()),E.current=null)}},ee=async()=>{try{if(!E.current){const t=await navigator.mediaDevices.getUserMedia({audio:!0});E.current=t}return E.current}catch(t){throw console.error("Error initializing media stream:",t),t}},f=()=>{try{if(!b.isConnected||!y.current){u.warning("No active call to mute");return}const t=!b.isMuted;y.current.setMuted(t),V(o=>({...o,isMuted:t})),u.info(t?"Microphone muted":"Microphone unmuted"),console.log(`ðŸŽ¤ Mute toggled: ${t}`)}catch(t){console.error("Error toggling mute:",t),u.error(`Failed to toggle mute: ${(t==null?void 0:t.message)||"Unknown error"}`),he()}},he=async()=>{try{console.log("ðŸ”„ Using fallback mute method...");const o=(await ee()).getAudioTracks();if(o.length>0){const C=!b.isMuted;o.forEach(H=>{H.enabled=!C}),V(H=>({...H,isMuted:C})),u.info(C?"Microphone muted (fallback)":"Microphone unmuted (fallback)")}else u.error("No audio tracks found")}catch(t){console.error("Fallback mute also failed:",t),u.error("Failed to toggle mute. Please check microphone permissions.")}},X=async()=>{try{if(!b.isConnected){u.warning("No active call to hold");return}const t=!b.isOnHold;(await ee()).getAudioTracks().forEach(H=>{H.enabled=!t}),V(H=>({...H,isOnHold:t,isMuted:t})),u.info(t?"Call on hold":"Call resumed")}catch(t){console.error("Error toggling hold:",t),u.error("Failed to toggle hold. Please check microphone permissions.")}},xe=()=>{const t=document.getElementById("call-button-container");return console.log("ðŸŽ¯ Looking for call-button-container:",t),t?(console.log("ðŸŽ¯ Rendering call button, call state:",b),xt.createPortal(e.jsxs("div",{className:"flex items-center gap-2",children:[b.isConnected&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-800 bg-white px-3 py-1 rounded-md border border-gray-200",children:J(b.callDuration)}),e.jsx(R,{onClick:f,variant:"outline",size:"sm",className:`border-gray-300 ${b.isMuted?"bg-red-50 text-red-700 hover:bg-red-100":"bg-white hover:bg-gray-50 text-gray-700"}`,title:b.isMuted?"Unmute microphone":"Mute microphone",children:b.isMuted?e.jsx(et,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})}),e.jsx(R,{onClick:X,variant:"outline",size:"sm",className:`border-gray-300 ${b.isOnHold?"bg-yellow-50 text-yellow-700 hover:bg-yellow-100":"bg-white hover:bg-gray-50 text-gray-700"}`,title:b.isOnHold?"Resume call":"Hold call",children:b.isOnHold?e.jsx(st,{className:"h-4 w-4"}):e.jsx(at,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",className:"border-gray-300 bg-white hover:bg-gray-50 text-gray-700",title:"Volume control",children:e.jsx(ke,{className:"h-4 w-4"})})]}),!b.isConnected&&!b.isConnecting?e.jsxs(R,{onClick:me,size:"sm",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Call"]}):b.isConnecting?e.jsxs(R,{size:"sm",className:"px-4 py-2 bg-amber-500 text-white text-sm font-medium rounded-md",disabled:!0,children:[e.jsx(re,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting"]}):e.jsxs(R,{onClick:fe,size:"sm",className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),t)):(console.warn("âš ï¸ call-button-container not found!"),null)};console.log("ðŸŽ¯ VapiAgentCall render - isVapiConfigured:",te),console.log("ðŸŽ¯ VapiAgentCall render - callState:",b),console.log("ðŸŽ¯ VapiAgentCall render - agentId:",$),console.log("ðŸŽ¯ VapiAgentCall render - agentName:",F);const[n,se]=w.useState(!1);return w.useEffect(()=>{const t=()=>document.getElementById("call-button-container")?(console.log("âœ… Found call-button-container"),se(!0),!0):(console.warn("âŒ call-button-container not found"),!1);if(t())return;const o=setInterval(()=>{t()&&clearInterval(o)},100);return()=>{clearInterval(o)}},[]),e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[xe(),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Conversation"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:Y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Te,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-center text-sm",children:b.isConnected?"Conversation will appear here...":"Start a call to begin the conversation"})]}):e.jsx("div",{className:"space-y-6",children:Y.map((t,o)=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ie,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:`max-w-[75%] ${t.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 border border-gray-200"} rounded-lg px-4 py-3`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${t.role==="user"?"text-blue-100":"text-gray-500"}`,children:t.role==="user"?"You":F}),e.jsx("span",{className:`text-xs ${t.role==="user"?"text-blue-200":"text-gray-400"}`,children:t.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.content})]}),t.role==="user"&&e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rt,{className:"h-4 w-4 text-blue-600"})})]},o))})})]}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Assistant"}),e.jsx("p",{className:"font-medium text-gray-900",children:F})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Connection"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${b.status==="connected"?"bg-green-500":b.status==="connecting"?"bg-amber-500 animate-pulse":b.status==="error"?"bg-red-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:b.status==="idle"?"Ready":b.status==="connecting"?"Connecting":b.status==="connected"?"Active":b.status==="ended"?"Ended":"Error"})]})]})]})})]})},St=({open:$,onOpenChange:F,onTemplateSelect:i,onCreateCustom:W})=>{const[a,O]=w.useState(""),[U,y]=w.useState("all"),{data:E,isLoading:b}=Ve({queryKey:["defaultAssistantTemplates",{category:U!=="all"?U:void 0}],queryFn:()=>{const v={is_active:!0};return U!=="all"&&(v.category=U),yt(v)},enabled:$}),{data:V}=Ve({queryKey:["templateCategories"],queryFn:Ct,enabled:$}),Y=(E==null?void 0:E.data)||[],ae=(V==null?void 0:V.data)||[],A=Y.filter(v=>v.name.toLowerCase().includes(a.toLowerCase())||v.description.toLowerCase().includes(a.toLowerCase())||v.category.toLowerCase().includes(a.toLowerCase())),te=async v=>{try{const J=await It(v.template_id);i(J.data),F(!1)}catch(J){console.error("Error using template:",J)}},de=v=>({Business:"bg-blue-100 text-blue-800",Sales:"bg-green-100 text-green-800",Support:"bg-purple-100 text-purple-800",Scheduling:"bg-orange-100 text-orange-800",General:"bg-gray-100 text-gray-800"})[v]||"bg-gray-100 text-gray-800";return e.jsx(Ee,{open:$,onOpenChange:F,children:e.jsxs(_e,{className:`
    max-w-7xl min-h-[700px] overflow-hidden
    bg-[#020617]
    border border-cyan-400/30
    shadow-[0_0_30px_rgba(34,211,238,0.35)]
    text-slate-200
  `,children:[e.jsx(Fe,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-white",children:[e.jsx(ie,{className:"h-5 w-5 text-white"}),"Choose How to Create Your Assistant"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(B,{className:`  cursor-pointer
  bg-cyan-500/10
  border border-cyan-400/30
  hover:shadow-[0_0_30px_rgba(34,211,238,0.45)]
  transition`,children:[e.jsx(q,{className:"pb-3",children:e.jsxs(K,{className:"flex items-center gap-2 text-white",children:[e.jsx(it,{className:"h-5 w-5 text-white"}),"Use Default Template"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-white text-sm mb-4",children:"Start with a pre-configured template designed for specific use cases. Perfect for quick setup with proven configurations."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white",children:[e.jsx(nt,{className:"h-3 w-3 text-white"}),"Recommended for beginners"]})]})]}),e.jsxs(B,{className:`cursor-pointer bg-cyan-500/10
  border border-cyan-400/30
  hover:shadow-[0_0_30px_rgba(34,211,238,0.45)] transition`,onClick:()=>{W(),F(!1)},children:[e.jsx(q,{className:"pb-3",children:e.jsxs(K,{className:"flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"h-5 w-5 text-white"}),"Create Custom Assistant"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-white text-sm mb-4",children:"Build your assistant from scratch with full control over all settings. Ideal for specific requirements and advanced users."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white",children:[e.jsx(ie,{className:"h-3 w-3 text-white"}),"Full customization available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Available Templates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white h-4 w-4  z-10"}),e.jsx(N,{placeholder:"Search templates...",value:a,onChange:v=>O(v.target.value),className:` pl-10 w-64
    bg-black/40
    border border-cyan-400/30
    text-slate-200
    placeholder:text-slate-500
    focus:ring-cyan-400/50`})]}),e.jsxs(M,{value:U,onValueChange:y,children:[e.jsxs(S,{className:`
    w-48
    bg-black/40
    border border-cyan-400/30
    text-slate-200
  `,children:[e.jsx(lt,{className:"h-4 w-4 mr-2"}),e.jsx(k,{placeholder:"Category"})]}),e.jsxs(T,{className:"bg-[#020617] text-white border border-cyan-400/30",children:[e.jsx(d,{value:"all",children:"All Categories"}),ae.map(v=>e.jsxs(d,{value:v.category,children:[v.category," (",v.count,")"]},v.category))]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:b?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((v,J)=>e.jsxs(B,{className:`
    cursor-pointer
    bg-white/5
    border border-cyan-400/20
    hover:shadow-[0_0_25px_rgba(34,211,238,0.4)]
    transition
  `,children:[e.jsxs(q,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]}))}):A.length===0?e.jsx(B,{className:`
    cursor-pointer
    bg-white/5
    border border-cyan-400/20
    hover:shadow-[0_0_25px_rgba(34,211,238,0.4)]
    transition
  `,children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(ie,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a||U!=="all"?"Try adjusting your search or filter criteria.":"No templates are currently available."}),e.jsx(R,{onClick:()=>{W(),F(!1)},children:"Create Custom Assistant Instead"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(v=>e.jsxs(B,{className:`
    cursor-pointer
    bg-white/5
    border border-cyan-400/20
    hover:shadow-[0_0_25px_rgba(34,211,238,0.4)]
    transition
  `,onClick:()=>te(v),children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(K,{className:"text-white flex items-center gap-2",children:v.name}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx(_,{className:de(v.category),children:v.category})})]}),e.jsx(ot,{className:"h-4 w-4 text-gray-400"})]})}),e.jsxs(L,{className:"pt-0",children:[e.jsx("p",{className:"text-white/60 text-sm mb-3 line-clamp-2",children:v.description}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs bg-primary text-white w-full ",children:"Use Template"})})]})]},v.template_id))})})]})]})]})})},kt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BASE_URL:"https://ai.research-hero.com",VITE_FACEBOOK_APP_ID:"1939628080270711",VITE_FACEBOOK_APP_SECRET:"9b4f0b6de06cf54cc1bcdd1c13c37995",VITE_FACEBOOK_REDIRECT_URI:"http://localhost:5001/api/auth/facebook/callback",VITE_FRONTEND_URL:"https://aiagent.research-hero.com",VITE_GMAIL_CLIENT_ID:"686955346191-el9qo3bhbgfo7fk4juanq8bq7g7iis7d.apps.googleusercontent.com",VITE_GMAIL_REDIRECT_URI:"https://ai.research-hero.com/api/gmail/auth/callback",VITE_GOOGLE_MAPS_API_KEY:"YOUR_ACTUAL_API_KEY_HERE",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51S8GFm2MMm3Fy1PB45KAluHAtFTOmAY9qKUE4sITR1TA1zfX97ON36OAcAALplq6LbLgqXaTyY0hRB7ae55LzpBQ00DfkbC8oy",VITE_VAPI_BASE_URL:"https://api.vapi.ai",VITE_VAPI_PUBLIC_KEY:"eb3b26e3-7dbb-4fd6-a545-a954756a43aa"},Bt=()=>{var Le,$e,ze,qe,Ke,He,We,Ye,Ge,Qe,Je,Xe,Ze,De,es,ss,as,ts,rs,is,ns,ls,os,cs,ds,ms,hs,xs,us,gs,ps,bs,fs,js,vs,ws,Ns,ys,Cs,Is,Ms,Ss,ks,Ts,Ps,Vs,Es,_s,Fs,Os,Us,As,Rs,Bs,Ls,$s,zs,qs,Ks,Hs,Ws,Ys,Gs,Qs,Js,Xs,Zs,Ds,ea,sa,aa,ta,ra,ia,na,la;const[$,F]=w.useState(""),[i,W]=w.useState(null),[a,O]=w.useState(null),[U,y]=w.useState(!1),[E,b]=w.useState(!1),[V,Y]=w.useState(!1),[ae,A]=w.useState(!1),[te,de]=w.useState(!1),[v,J]=w.useState(null),[Q,me]=w.useState(null),[fe,ee]=w.useState(!1),[f,he]=w.useState(null),[X,xe]=w.useState(new Set);console.log("ðŸ” Environment Debug:"),console.log("- VITE_VAPI_PUBLIC_KEY:",`${"eb3b26e3-7dbb-4fd6-a545-a954756a43aa".substring(0,8)}...`),console.log("- All env vars:",kt);const[n,se]=w.useState({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"vapi",voiceId:"Cole",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),t=ut(),{user:o}=vt(),{data:C,isLoading:H}=Ve({queryKey:["syncedAgents",o==null?void 0:o.id,$],queryFn:()=>gt($),staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!(o!=null&&o.id),placeholderData:s=>s,retry:(s,r)=>{var c;return[404,204,402].includes((c=r==null?void 0:r.response)==null?void 0:c.status)?!1:s<2}}),ue=Ne({mutationFn:pt,onSuccess:s=>{console.log("âœ… Assistant created successfully:",s),u.success(`Assistant "${n.name}" created successfully!`),Y(!1),se({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),t.invalidateQueries({queryKey:["syncedAgents"]}),t.invalidateQueries({queryKey:["agents"]})},onError:s=>{var m,c,x,g,j,p;console.error("âŒ Error creating assistant:",s);let r="Failed to create assistant";(c=(m=s.response)==null?void 0:m.data)!=null&&c.message?r=s.response.data.message:(g=(x=s.response)==null?void 0:x.data)!=null&&g.error?r=s.response.data.error:s.message&&(r=s.message),u.error(`Creation failed: ${r}`),console.error("Detailed error:",{status:(j=s.response)==null?void 0:j.status,data:(p=s.response)==null?void 0:p.data,message:s.message})}}),ge=Ne({mutationFn:({id:s,data:r})=>ft(s,r),onSuccess:(s,r)=>{console.log("âœ… Assistant updated successfully:",s);const m=Object.keys(r.data)[0];u.success(`${m} updated successfully`),t.invalidateQueries({queryKey:["syncedAgents",o==null?void 0:o.id]}),i&&Re(i.id)},onError:(s,r)=>{var x,g,j,p,I,Z;console.error("âŒ Error updating assistant:",s);let m="Failed to update assistant";(g=(x=s.response)==null?void 0:x.data)!=null&&g.message?m=s.response.data.message:(p=(j=s.response)==null?void 0:j.data)!=null&&p.error?m=s.response.data.error:s.message&&(m=s.message);const c=Object.keys(r.data)[0];u.error(`Failed to update ${c}: ${m}`),console.error("Update error details:",{field:c,value:r.data[c],status:(I=s.response)==null?void 0:I.status,data:(Z=s.response)==null?void 0:Z.data,message:s.message})}}),pe=Ne({mutationFn:jt,onSuccess:s=>{console.log("âœ… Delete success:",s),u.success(`Assistant "${f==null?void 0:f.name}" deleted successfully!`),ee(!1),he(null),i&&f&&i.id===f.id&&(W(null),O(null)),t.invalidateQueries({queryKey:["syncedAgents",o==null?void 0:o.id]})},onError:s=>{var c,x,g,j,p,I;console.error("âŒ Error deleting assistant:",s);let r="Unknown error occurred";(x=(c=s.response)==null?void 0:c.data)!=null&&x.message?r=s.response.data.message:(j=(g=s.response)==null?void 0:g.data)!=null&&j.error?r=s.response.data.error:s.message&&(r=s.message);const m=(f==null?void 0:f.name)||"Assistant";u.error(`Failed to delete ${m}: ${r}`),console.error("Delete error details:",{assistantId:f==null?void 0:f.id,assistantName:f==null?void 0:f.name,status:(p=s.response)==null?void 0:p.status,data:(I=s.response)==null?void 0:I.data,message:s.message})}}),z=(C==null?void 0:C.data)||[],Ue=(o==null?void 0:o.isSuperAdmin)||!1,Ae=(C==null?void 0:C.total)||z.length;w.useEffect(()=>{if(z.length>0){console.log("ðŸ” Agent data structure (first agent):",z[0]),console.log("ðŸ” Total agents loaded:",z.length),console.log("ðŸ‘‘ Pagination disabled (Super Admin):",Ue),console.log("ðŸ“Š Total assistants available:",Ae);const s=new Set;z.forEach((r,m)=>{((r.assistant_data||{}).metadata||{}).published===!0&&s.add(String(r.id)),m<3&&console.log(`ðŸ” Agent ${m+1}:`,{name:r.name,localId:r.id,assistantId:r.assistant_id,hasAssistantId:!!r.assistant_id,structure:Object.keys(r)})}),xe(s),console.log("ðŸ“Š Initialized published agents from metadata:",Array.from(s))}},[z]),w.useEffect(()=>{var s,r;z.length>0&&!i&&(console.log("Available agents:",z),console.log("First agent ID:",(s=z[0])==null?void 0:s.id,"Type:",typeof((r=z[0])==null?void 0:r.id)),W(z[0]))},[z,i]),w.useEffect(()=>{if(i&&i.id){const s=i.assistant_id||i.id;console.log("ðŸ” Loading agent details:",{agentName:i.name,localId:i.id,assistantId:i.assistant_id,usingId:s,idType:i.assistant_id?"VAPI UUID":"Local ID"}),Re(s)}},[i]);const Ha=s=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s),Re=async s=>{var r,m,c,x,g,j,p,I,Z,ne,oa,ca,da,ma,ha,xa,ua,ga,pa,ba,fa,ja,va,wa,Na,ya,Ca,Ia,Ma,Sa,ka,Ta,Pa,Va,Ea,_a,Fa;y(!0);try{const D=String(s);Ha(D)||console.warn("Agent ID is not a valid UUID:",D,"- will try to load details anyway"),console.log("ðŸ” Fetching complete VAPI details for agent:",D);const ve=await bt(D);console.log("ðŸ“‹ Complete VAPI agent details:",ve);const l=ve.data||ve;O({name:l.name||(i==null?void 0:i.name),firstMessage:l.firstMessage||(i==null?void 0:i.firstMessage),firstMessageMode:l.firstMessageMode||"assistant-speaks-first",firstMessageInterruptionsEnabled:l.firstMessageInterruptionsEnabled||!1,model:{provider:((r=l.model)==null?void 0:r.provider)||"openai",model:((m=l.model)==null?void 0:m.model)||"gpt-4",temperature:((c=l.model)==null?void 0:c.temperature)||.7,maxTokens:((x=l.model)==null?void 0:x.maxTokens)||1e3,numFastTurns:((g=l.model)==null?void 0:g.numFastTurns)||0,messages:((j=l.model)==null?void 0:j.messages)||[],tools:((p=l.model)==null?void 0:p.tools)||[],toolIds:((I=l.model)==null?void 0:I.toolIds)||[],knowledgeBase:(Z=l.model)==null?void 0:Z.knowledgeBase,knowledgeBaseId:(ne=l.model)==null?void 0:ne.knowledgeBaseId,emotionRecognitionEnabled:((oa=l.model)==null?void 0:oa.emotionRecognitionEnabled)||!1,thinking:((ca=l.model)==null?void 0:ca.thinking)||{type:"disabled"}},voice:{provider:((da=l.voice)==null?void 0:da.provider)||"11labs",voiceId:((ma=l.voice)==null?void 0:ma.voiceId)||"21m00Tcm4TlvDq8ikWAM",speed:((ha=l.voice)==null?void 0:ha.speed)||1,stability:(xa=l.voice)==null?void 0:xa.stability,similarityBoost:(ua=l.voice)==null?void 0:ua.similarityBoost,cachingEnabled:((ga=l.voice)==null?void 0:ga.cachingEnabled)||!1,chunkPlan:((pa=l.voice)==null?void 0:pa.chunkPlan)||{enabled:!1},fallbackPlan:(ba=l.voice)==null?void 0:ba.fallbackPlan},transcriber:{provider:((fa=l.transcriber)==null?void 0:fa.provider)||"deepgram",model:((ja=l.transcriber)==null?void 0:ja.model)||"nova-2",language:((va=l.transcriber)==null?void 0:va.language)||"en",confidenceThreshold:((wa=l.transcriber)==null?void 0:wa.confidenceThreshold)||.4,endOfTurnConfidenceThreshold:((Na=l.transcriber)==null?void 0:Na.endOfTurnConfidenceThreshold)||.7,minEndOfTurnSilenceWhenConfident:((ya=l.transcriber)==null?void 0:ya.minEndOfTurnSilenceWhenConfident)||160,maxTurnSilence:((Ca=l.transcriber)==null?void 0:Ca.maxTurnSilence)||400,wordFinalizationMaxWaitTime:((Ia=l.transcriber)==null?void 0:Ia.wordFinalizationMaxWaitTime)||160,enableUniversalStreamingApi:((Ma=l.transcriber)==null?void 0:Ma.enableUniversalStreamingApi)||!1,formatTurns:((Sa=l.transcriber)==null?void 0:Sa.formatTurns)||!1,disablePartialTranscripts:((ka=l.transcriber)==null?void 0:ka.disablePartialTranscripts)||!1,keywords:((Ta=l.transcriber)==null?void 0:Ta.keywords)||[],wordBoost:((Pa=l.transcriber)==null?void 0:Pa.wordBoost)||[]},systemMessage:((_a=(Ea=(Va=l.model)==null?void 0:Va.messages)==null?void 0:Ea[0])==null?void 0:_a.content)||l.systemMessage||"You are a helpful AI assistant.",endCallMessage:l.endCallMessage,voicemailMessage:l.voicemailMessage,endCallPhrases:l.endCallPhrases||[],functions:l.functions||[],tools:l.tools||[],customFunctions:l.customFunctions,variableValues:l.variableValues,maxDurationSeconds:l.maxDurationSeconds||600,backgroundSound:l.backgroundSound||"off",modelOutputInMessagesEnabled:l.modelOutputInMessagesEnabled||!1,backgroundDenoisingEnabled:l.backgroundDenoisingEnabled||!1,clientMessages:l.clientMessages,serverMessages:l.serverMessages,transportConfigurations:l.transportConfigurations||[],server:l.server,observabilityPlan:l.observabilityPlan,startSpeakingPlan:l.startSpeakingPlan,stopSpeakingPlan:l.stopSpeakingPlan,credentialIds:l.credentialIds||[],metadata:l.metadata||{},createdAt:l.createdAt,updatedAt:l.updatedAt,_rawVapiData:l})}catch(D){console.error("Error loading agent details:",D),console.error("Error details:",((Fa=D.response)==null?void 0:Fa.data)||D.message),O({model:{provider:"OpenAI",model:"GPT-4"},voice:{provider:"11Labs",voiceId:"Default Voice"},transcriber:{provider:"Deepgram"},systemMessage:"You are a helpful AI assistant."})}finally{y(!1)}},je=s=>s?s.split(" ").map(r=>r.charAt(0)).join("").toUpperCase().substring(0,2):"NA",P=(s,r)=>{if(s.includes(".")){const[m,c]=s.split(".");se(x=>({...x,[m]:{...x[m],[c]:r}}))}else se(m=>({...m,[s]:r}))},Wa=()=>{var r,m,c;const s=[];return(r=n.name)!=null&&r.trim()||s.push("Assistant name is required"),(m=n.firstMessage)!=null&&m.trim()||s.push("First message is required"),(c=n.systemMessage)!=null&&c.trim()||s.push("System message is required"),n.model.provider||s.push("Model provider is required"),n.model.model||s.push("Model selection is required"),(n.model.temperature<0||n.model.temperature>2)&&s.push("Temperature must be between 0 and 2"),(n.model.maxTokens<1||n.model.maxTokens>32e3)&&s.push("Max tokens must be between 1 and 32000"),n.voice.provider||s.push("Voice provider is required"),n.voice.voiceId||s.push("Voice selection is required"),(n.voice.speed<.25||n.voice.speed>4)&&s.push("Voice speed must be between 0.25 and 4"),n.transcriber.provider||s.push("Transcriber provider is required"),n.transcriber.model||s.push("Transcriber model is required"),n.transcriber.language||s.push("Transcriber language is required"),(n.maxDurationSeconds<10||n.maxDurationSeconds>43200)&&s.push("Max duration must be between 10 and 43200 seconds"),s},Ya=()=>{const s=Wa();if(s.length>0){u.error(`Please fix the following errors:
${s.join(`
`)}`);return}if(n.name.length>40){u.error("Assistant name must be 40 characters or less");return}if(n.endCallMessage&&n.endCallMessage.length>1e3){u.error("End call message must be 1000 characters or less");return}if(n.voicemailMessage&&n.voicemailMessage.length>1e3){u.error("Voicemail message must be 1000 characters or less");return}console.log("âœ… Form validation passed, creating assistant...");const r={...n,firstMessageMode:n.firstMessageMode,backgroundSound:n.backgroundSound,transcriber:{...n.transcriber,provider:n.transcriber.provider},voice:{...n.voice,provider:n.voice.provider},systemMessage:void 0,model:{...n.model,provider:n.model.provider,messages:[{role:"system",content:n.systemMessage}]}};console.log("ðŸ”„ Transformed form data for VAPI:",r),ue.mutate(r)},Ga=s=>{var r,m,c,x,g,j,p,I,Z,ne;console.log("ðŸŽ¯ Template selected:",s),se({name:s.name||"",firstMessage:s.first_message||"",systemMessage:s.system_message||"You are a helpful AI assistant.",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:s.end_call_message||"",voicemailMessage:"",endCallPhrases:s.end_call_phrases||[],maxDurationSeconds:s.max_duration_seconds||600,backgroundSound:s.background_sound||"off",model:{provider:((r=s.model)==null?void 0:r.provider)||"openai",model:((m=s.model)==null?void 0:m.model)||"gpt-4",temperature:((c=s.model)==null?void 0:c.temperature)||.7,maxTokens:((x=s.model)==null?void 0:x.maxTokens)||1e3,numFastTurns:((g=s.model)==null?void 0:g.numFastTurns)||0},voice:{provider:((j=s.voice)==null?void 0:j.provider)||"vapi",voiceId:((p=s.voice)==null?void 0:p.voiceId)||"Cole",speed:((I=s.voice)==null?void 0:I.speed)||1},transcriber:{provider:((Z=s.transcriber)==null?void 0:Z.provider)||"deepgram",model:"nova-2",language:((ne=s.transcriber)==null?void 0:ne.language)||"en"}}),Y(!0)},Qa=()=>{se({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"off",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),Y(!0)},Be=(s,r)=>{if(!s)return"";const m=s.toLowerCase().trim();return(r==="model"?{openai:"openai","open-ai":"openai",anthropic:"anthropic",groq:"groq",together:"together",anyscale:"anyscale"}:{"11labs":"11labs",elevenlabs:"11labs","eleven-labs":"11labs",openai:"openai","open-ai":"openai",azure:"azure",playht:"playht","play-ht":"playht",deepgram:"deepgram",cartesia:"cartesia",lmnt:"lmnt"})[m]||m},h=(s,r)=>{if(!i){console.warn("No selected agent for field update");return}console.log("ðŸ”„ Field update:",s,"Value:",r,"Type:",typeof r,"Agent ID:",i.id),Q&&clearTimeout(Q),O(c=>{const x={...c};if(s.includes(".")){const[g,j]=s.split(".");if(x[g]={...x[g],[j]:r},s==="model.provider"){const p=La(r);p&&(x.model.model=p,console.log("ðŸ¤– Auto-selected model:",p,"for provider:",r))}else if(s==="voice.provider"){const p=$a(r);p&&(x.voice.voiceId=p,console.log("ðŸŽ¤ Auto-selected voice:",p,"for provider:",r))}else if(s==="transcriber.provider"){const p=za(r);p&&(x.transcriber.model=p,console.log("ðŸ“ Auto-selected transcriber model:",p,"for provider:",r))}}else x[s]=r;return x});const m=setTimeout(()=>{const c={},x=["status","published","publishedAt","systemMessage"];if(s.includes(".")){const[j,p]=s.split(".");if(x.includes(j)||x.includes(p)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}if(c[j]={...a[j],[p]:r},s==="model.provider"){const I=La(r);I&&(c.model.model=I)}else if(s==="voice.provider"){const I=$a(r);I&&(c.voice.voiceId=I)}else if(s==="transcriber.provider"){const I=za(r);I&&(c.transcriber.model=I)}}else{if(x.includes(s)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}c[s]=r}console.log("ðŸ”„ Auto-saving field:",s,"with value:",r,"updateData:",c);const g=i.assistant_id||i.id;console.log("ðŸ” Using assistant ID for VAPI:",g,"Type:",typeof g),ge.mutate({id:String(g),data:c})},1e3);me(m)},Ja=s=>{if(!i){console.warn("No selected agent for system message update");return}console.log("ðŸ”„ System message update:",s),Q&&clearTimeout(Q),O(m=>{const c={...m};return c.systemMessage=s,c.model||(c.model={}),c.model.messages||(c.model.messages=[]),c.model.messages.length===0?c.model.messages.push({role:"system",content:s}):c.model.messages[0].role==="system"?c.model.messages[0].content=s:c.model.messages.unshift({role:"system",content:s}),c});const r=setTimeout(()=>{var j;const c=[...((j=a==null?void 0:a.model)==null?void 0:j.messages)||[]];c.length===0?c.push({role:"system",content:s}):c[0].role==="system"?c[0].content=s:c.unshift({role:"system",content:s});const x={model:{...a==null?void 0:a.model,messages:c}};console.log("ðŸ”„ Auto-saving system message via model.messages:",x);const g=i.assistant_id||i.id;console.log("ðŸ” Using assistant ID for system message update:",g),ge.mutate({id:String(g),data:x})},1e3);me(r)};w.useEffect(()=>()=>{Q&&clearTimeout(Q)},[Q]);const Xa=s=>{he(s),ee(!0)},Za=()=>{if(f){const s=f.assistant_id||f.id;console.log("ðŸ—‘ï¸ Deleting agent:",f.id,f.name,"Using assistant_id:",s),pe.mutate(String(s))}else u.error("No agent selected for deletion")},Da=async s=>{var c,x;if(!s||!s.id)return;const r=String(s.id),m=X.has(r);try{console.log(`ðŸ”„ ${m?"Unpublishing":"Publishing"} agent:`,s.name);const g={metadata:{...a==null?void 0:a.metadata,published:!m,publishedAt:m?null:new Date().toISOString()}},j=s.assistant_id||s.id;console.log("ðŸ” Using assistant ID for VAPI publish:",j,"Type:",typeof j),await ge.mutateAsync({id:String(j),data:g});const p=new Set(X);m?(p.delete(r),u.success(`${s.name} unpublished successfully`)):(p.add(r),u.success(`${s.name} published successfully`)),xe(p),i&&i.id===s.id&&O(I=>({...I,metadata:g.metadata}))}catch(g){console.error("âŒ Error toggling publish status:",g);let j="Failed to update publish status";(x=(c=g.response)==null?void 0:c.data)!=null&&x.message?j=g.response.data.message:g.message&&(j=g.message),u.error(`Failed to ${m?"unpublish":"publish"} ${s.name}: ${j}`)}};return e.jsxs("div",{className:"app-shell-bg flex h-screen text-white",children:[e.jsxs("div",{className:"w-80 border-r border-white/10 bg-[#0b0f2e]/90 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Assistants"}),Ue&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(_,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:[e.jsx(ct,{className:"h-3 w-3 mr-1"}),"Super Admin View"]}),e.jsxs("span",{className:"text-xs text-white/50",children:["Showing all ",Ae," assistants"]})]})]}),e.jsxs("button",{className:`px-3 py-2
    rounded-lg
    text-sm font-semibold
    text-white
    bg-[linear-gradient(180deg,rgba(90,110,255,0.45),rgba(36,46,151,0.35))]
    border border-white/15
    shadow-[0_2px_5px_rgba(90,110,255,0.45)]
    hover:shadow-[0_5px_10px_rgba(90,110,255,0.65)]
    hover:bg-[linear-gradient(180deg,rgba(90,110,255,0.6),rgba(36,46,151,0.45))]
    disabled:opacity-40
    disabled:cursor-not-allowed
    transition-all
    flex items-center gap-2`,onClick:()=>A(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Assistant"]}),e.jsx(Ee,{open:V,onOpenChange:Y,children:e.jsxs(_e,{className:"bg-[#0b0f2e] border-white/10 text-white sm:max-w-[1200px] max-h-[90vh] overflow-y-auto neon-fire-scroll",children:[e.jsx(Fe,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5 text-blue-600"}),"Create New Assistant"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Name *"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",value:n.name,onChange:s=>P("name",s.target.value),placeholder:"Enter assistant name",maxLength:40}),!((Le=n.name)!=null&&Le.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Assistant name is required"}),n.name&&n.name.length>40&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Name must be 40 characters or less"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"First Message *"}),e.jsx(G,{value:n.firstMessage,onChange:s=>P("firstMessage",s.target.value),placeholder:"Hello! How can I help you today?",className:`mt-1 ${($e=n.firstMessage)!=null&&$e.trim()?"":"border-red-300"}`,rows:3}),!((ze=n.firstMessage)!=null&&ze.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"First message is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"System Message *"}),e.jsx(G,{value:n.systemMessage,onChange:s=>P("systemMessage",s.target.value),placeholder:"You are a helpful AI assistant...",className:`mt-1 ${(qe=n.systemMessage)!=null&&qe.trim()?"":"border-red-300"}`,rows:4}),!((Ke=n.systemMessage)!=null&&Ke.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"System message is required"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Model Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:n.model.provider,onValueChange:s=>P("model.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Aa.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Model"}),e.jsxs(M,{value:n.model.model,onValueChange:s=>P("model.model",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Me(n.model.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Temperature"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"2",step:"0.1",value:n.model.temperature,onChange:s=>P("model.temperature",parseFloat(s.target.value)),placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Max Tokens"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"1",max:"32000",value:n.model.maxTokens,onChange:s=>P("model.maxTokens",parseInt(s.target.value)),placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Fast Turns"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"10",value:n.model.numFastTurns,onChange:s=>P("model.numFastTurns",parseInt(s.target.value)),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Voice Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:n.voice.provider,onValueChange:s=>P("voice.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:ce.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Voice"}),e.jsxs(M,{value:n.voice.voiceId,onValueChange:s=>P("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Se(n.voice.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Speed"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0.25",max:"4",step:"0.1",value:n.voice.speed,onChange:s=>P("voice.speed",parseFloat(s.target.value)),placeholder:"1.0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Transcriber Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:n.transcriber.provider,onValueChange:s=>P("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Ra.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Model"}),e.jsxs(M,{value:n.transcriber.model,onValueChange:s=>P("transcriber.model",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Ba(n.transcriber.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Language"}),e.jsxs(M,{value:n.transcriber.language,onValueChange:s=>P("transcriber.language",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"en",children:"English"}),e.jsx(d,{value:"es",children:"Spanish"}),e.jsx(d,{value:"fr",children:"French"}),e.jsx(d,{value:"de",children:"German"}),e.jsx(d,{value:"it",children:"Italian"}),e.jsx(d,{value:"pt",children:"Portuguese"}),e.jsx(d,{value:"ru",children:"Russian"}),e.jsx(d,{value:"ja",children:"Japanese"}),e.jsx(d,{value:"ko",children:"Korean"}),e.jsx(d,{value:"zh",children:"Chinese"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Advanced Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"First Message Mode"}),e.jsxs(M,{value:n.firstMessageMode,onValueChange:s=>P("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(d,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(d,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Max Duration (seconds)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"10",max:"43200",value:n.maxDurationSeconds,onChange:s=>P("maxDurationSeconds",parseInt(s.target.value)),placeholder:"600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Background Sound"}),e.jsxs(M,{value:n.backgroundSound,onValueChange:s=>P("backgroundSound",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"off",children:"Off"}),e.jsx(d,{value:"office",children:"Office"}),e.jsx(d,{value:"cafe",children:"Cafe"}),e.jsx(d,{value:"nature",children:"Nature"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:n.firstMessageInterruptionsEnabled,onChange:s=>P("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-white/70",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"End Call Message"}),e.jsx(G,{value:n.endCallMessage,onChange:s=>P("endCallMessage",s.target.value),rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Voicemail Message"}),e.jsx(G,{value:n.voicemailMessage,onChange:s=>P("voicemailMessage",s.target.value),rows:2,placeholder:"Please leave a message after the beep."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{className:"neo-btn",onClick:()=>Y(!1),disabled:ue.isPending,style:{background:"linear-gradient(180deg, rgba(255,77,79,0.25), rgba(168,14,34,0.25))",borderColor:"rgba(255,77,79,0.35)"},children:"Cancel"}),e.jsx(R,{onClick:Ya,disabled:ue.isPending||!n.name||!n.firstMessage,className:`px-5 py-2
    rounded-lg
    text-sm font-semibold
    text-white
    bg-[linear-gradient(180deg,rgba(90,110,255,0.45),rgba(36,46,151,0.35))]
    border border-white/15
    shadow-[0_2px_5px_rgba(90,110,255,0.45)]
    hover:shadow-[0_5px_10px_rgba(90,110,255,0.65)]
    hover:bg-[linear-gradient(180deg,rgba(90,110,255,0.6),rgba(36,46,151,0.45))]
    disabled:opacity-40
    disabled:cursor-not-allowed
    transition-all
    flex items-center gap-2`,children:ue.isPending?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Assistant"]})})]})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white/40"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white placeholder:text-white/40",placeholder:"Search Assistants",value:$,onChange:s=>F(s.target.value)})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto neon-fire-scroll",children:H?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(re,{className:"h-6 w-6 animate-spin text-white/50"})}):e.jsx("div",{className:"p-2",children:z.filter(s=>s&&s.id&&s.name).map(s=>e.jsx("div",{onClick:()=>W(s),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 mb-2 ${(i==null?void 0:i.id)===s.id?"bg-indigo-500/20 border border-indigo-400/50":"hover:bg-white/10 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ce,{className:"h-10 w-10 ring-2 ring-white/10",children:e.jsx(Ie,{className:"text-white bg-gradient-to-br from-indigo-500/30 to-purple-500/30 font-medium",children:je(s.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-white truncate",children:s.name}),X.has(String(s.id))&&e.jsx(_,{variant:"secondary",className:"bg-green-500/20 text-green-400 border border-green-500/30 text-xs",children:"Published"})]}),e.jsx("div",{className:"text-sm text-white/50 truncate",children:s.assistant_id?`${String(s.assistant_id).substring(0,12)}...`:"No Assistant ID"})]})]})},s.id))})})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-y-hidden",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-white/10 ",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ce,{className:"h-12 w-12 ring-2 ring-white/10",children:e.jsx(Ie,{className:"text-white bg-gradient-to-br from-indigo-500/30 to-purple-500/30 font-medium text-lg",children:je(i.name)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:i.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx(_,{variant:"secondary",className:"bg-green-500/20 text-green-400 border border-green-500/30",children:"Active"}),e.jsxs("span",{className:"text-sm text-white/50",children:["ID: ",String(i.id).substring(0,12),"..."]}),ge.isPending&&e.jsxs("div",{className:"flex items-center text-xs text-blue-400",children:[e.jsx(re,{className:"h-3 w-3 mr-1 animate-spin"}),"Auto-saving..."]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(R,{size:"sm",onClick:()=>b(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Talk to Assistant"]}),e.jsx(R,{variant:X.has(String(i.id))?"default":"outline",size:"sm",onClick:()=>Da(i),className:X.has(String(i.id))?"bg-green-600 hover:bg-green-700 text-white":"text-white bg-green-600  hover:text-white hover:bg-white/10 border-white/20",children:X.has(String(i.id))?"Published":"Unpublished"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Xa(i),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 border-red-400/30",children:e.jsx(Oa,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex-1 p-6 neo-scroll overflow-y-auto",children:U?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(re,{className:"h-8 w-8 animate-spin text-white/50"})}):e.jsxs(wt,{defaultValue:"model",className:"w-full",children:[e.jsxs(Nt,{className:"flex flex-wrap items-center gap-2 mb-8 bg-transparent p-0 h-auto",children:[e.jsxs(ye,{value:"model",className:"flag-tab h-12 min-w-[140px] border-0 bg-white/5 data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-600 data-[state=active]:to-violet-600 data-[state=active]:text-white text-white/60 hover:text-white hover:bg-white/10 transition-all clip-path-flag mr-[-15px] z-10 data-[state=active]:z-20",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Model"]}),e.jsxs(ye,{value:"voice",className:"flag-tab h-12 min-w-[140px] border-0 bg-white/5 data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-600 data-[state=active]:to-violet-600 data-[state=active]:text-white text-white/60 hover:text-white hover:bg-white/10 transition-all clip-path-flag mr-[-15px] z-10 data-[state=active]:z-20",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Voice"]}),e.jsxs(ye,{value:"transcriber",className:"flag-tab h-12 min-w-[140px] border-0 bg-white/5 data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-600 data-[state=active]:to-violet-600 data-[state=active]:text-white text-white/60 hover:text-white hover:bg-white/10 transition-all clip-path-flag mr-[-15px] z-10 data-[state=active]:z-20",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Transcriber"]})]}),e.jsxs(le,{value:"model",className:"space-y-6",children:[e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center text-white gap-2",children:[e.jsx(Ua,{className:"h-5 w-5 text-white"}),"Model Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:Be(((He=a==null?void 0:a.model)==null?void 0:He.provider)||"","model"),onValueChange:s=>h("model.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{placeholder:((We=a==null?void 0:a.model)==null?void 0:We.provider)||"Select provider"})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Aa.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(_,{variant:"outline",className:"text-xs",children:"API Key"})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Model"}),e.jsxs(M,{value:((Ye=a==null?void 0:a.model)==null?void 0:Ye.model)||"",onValueChange:s=>h("model.model",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{placeholder:((Ge=a==null?void 0:a.model)==null?void 0:Ge.model)||"Select model"})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[Me(((Qe=a==null?void 0:a.model)==null?void 0:Qe.provider)||"openai").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-white/50",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.supportsTools&&e.jsx(_,{variant:"outline",className:"text-xs",children:"Tools"}),s.supportsVision&&e.jsx(_,{variant:"outline",className:"text-xs",children:"Vision"}),s.costTier&&e.jsx(_,{variant:s.costTier==="low"?"secondary":s.costTier==="medium"?"default":"destructive",className:"text-xs",children:s.costTier})]})]})},s.id)),((Je=a==null?void 0:a.model)==null?void 0:Je.model)&&!Me(((Xe=a==null?void 0:a.model)==null?void 0:Xe.provider)||"openai").some(s=>s.id===a.model.model)&&e.jsxs(d,{value:a.model.model,children:[a.model.model," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Temperature"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"2",step:"0.1",value:((Ze=a==null?void 0:a.model)==null?void 0:Ze.temperature)||.7,onChange:s=>h("model.temperature",parseFloat(s.target.value)),placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Max Tokens"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"1",max:"32000",value:((De=a==null?void 0:a.model)==null?void 0:De.maxTokens)||1e3,onChange:s=>h("model.maxTokens",parseInt(s.target.value)),placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Fast Turns"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"10",value:((es=a==null?void 0:a.model)==null?void 0:es.numFastTurns)||0,onChange:s=>h("model.numFastTurns",parseInt(s.target.value)),placeholder:"0"})]})]})]})]}),e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center text-white gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-green-600"}),"Messages & Prompts"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"First Message"}),e.jsx(G,{value:(a==null?void 0:a.firstMessage)||(i==null?void 0:i.firstMessage)||"",onChange:s=>h("firstMessage",s.target.value),rows:3,placeholder:"Hello! How can I help you today?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"First Message Mode"}),e.jsxs(M,{value:(a==null?void 0:a.firstMessageMode)||"assistant-speaks-first",onValueChange:s=>h("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(d,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(d,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:(a==null?void 0:a.firstMessageInterruptionsEnabled)||!1,onChange:s=>h("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-white/70",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"System Message"}),e.jsx(G,{value:((ts=(as=(ss=a==null?void 0:a.model)==null?void 0:ss.messages)==null?void 0:as[0])==null?void 0:ts.content)||(a==null?void 0:a.systemMessage)||"",onChange:s=>Ja(s.target.value),rows:6,placeholder:"You are a helpful AI assistant..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"End Call Message"}),e.jsx(G,{value:(a==null?void 0:a.endCallMessage)||"",onChange:s=>h("endCallMessage",s.target.value),rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Voicemail Message"}),e.jsx(G,{value:(a==null?void 0:a.voicemailMessage)||"",onChange:s=>h("voicemailMessage",s.target.value),rows:2,placeholder:"Please leave a message after the beep."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"End Call Phrases"}),e.jsx(G,{value:((rs=a==null?void 0:a.endCallPhrases)==null?void 0:rs.join(`
`))||"",onChange:s=>h("endCallPhrases",s.target.value.split(`
`).filter(r=>r.trim())),rows:3,placeholder:`goodbye
bye
end call
hang up`}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Phrases that will trigger the call to end (one per line, case insensitive)"})]})]})]})]}),e.jsx(le,{value:"voice",className:"space-y-6",children:e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center text-white gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),"Voice Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:Be(((is=a==null?void 0:a.voice)==null?void 0:is.provider)||"","voice"),onValueChange:s=>h("voice.provider",s),children:[e.jsx(S,{className:"mt-1 border-white/10 text-white",children:e.jsx(k,{placeholder:((ns=a==null?void 0:a.voice)==null?void 0:ns.provider)||"Select voice provider"})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:ce.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(_,{variant:"outline",className:"text-xs",children:"API Key"}),e.jsxs("div",{className:"flex gap-1",children:[s.supportsSpeed&&e.jsx(_,{variant:"secondary",className:"text-xs",children:"Speed"}),s.supportsStability&&e.jsx(_,{variant:"secondary",className:"text-xs",children:"Stability"})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Voice"}),e.jsxs(M,{value:((ls=a==null?void 0:a.voice)==null?void 0:ls.voiceId)||"",onValueChange:s=>h("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{placeholder:"Select voice..."})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[Se(((os=a==null?void 0:a.voice)==null?void 0:os.provider)||"11labs").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-white/50",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.gender&&e.jsx(_,{variant:"outline",className:"text-xs",children:s.gender}),s.accent&&e.jsx(_,{variant:"secondary",className:"text-xs",children:s.accent})]})]})},s.id)),((cs=a==null?void 0:a.voice)==null?void 0:cs.voiceId)&&!Se(((ds=a==null?void 0:a.voice)==null?void 0:ds.provider)||"11labs").some(s=>s.id===a.voice.voiceId)&&e.jsxs(d,{value:a.voice.voiceId,children:[a.voice.voiceId," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[((ms=ce.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:ms.supportsSpeed)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Speed"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0.25",max:"4",step:"0.1",value:((hs=a==null?void 0:a.voice)==null?void 0:hs.speed)||1,onChange:s=>h("voice.speed",parseFloat(s.target.value)),placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:"0.25x to 4x speed"})]}),((xs=ce.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:xs.supportsStability)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Stability"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"1",step:"0.1",value:((us=a==null?void 0:a.voice)==null?void 0:us.stability)||.5,onChange:s=>h("voice.stability",parseFloat(s.target.value)),placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Higher = more stable"})]}),((gs=ce.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:gs.supportsSimilarityBoost)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Similarity Boost"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"1",step:"0.1",value:((ps=a==null?void 0:a.voice)==null?void 0:ps.similarityBoost)||.5,onChange:s=>h("voice.similarityBoost",parseFloat(s.target.value)),placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Higher = more similar to original"})]})]})]})]})}),e.jsxs(le,{value:"transcriber",className:"space-y-6",children:[e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center  text-white gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-purple-600"}),"Transcriber Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:((bs=a==null?void 0:a.transcriber)==null?void 0:bs.provider)||"deepgram",onValueChange:s=>h("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Ra.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(_,{variant:"outline",className:"text-xs",children:"API Key"}),s.supportsLanguages&&e.jsxs(_,{variant:"secondary",className:"text-xs",children:[s.supportsLanguages.length," Languages"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Language"}),e.jsxs(M,{value:((fs=a==null?void 0:a.transcriber)==null?void 0:fs.language)||"en",onValueChange:s=>h("transcriber.language",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"en",children:"English"}),e.jsx(d,{value:"es",children:"Spanish"}),e.jsx(d,{value:"fr",children:"French"}),e.jsx(d,{value:"de",children:"German"}),e.jsx(d,{value:"it",children:"Italian"}),e.jsx(d,{value:"pt",children:"Portuguese"}),e.jsx(d,{value:"zh",children:"Chinese"}),e.jsx(d,{value:"ja",children:"Japanese"}),e.jsx(d,{value:"ko",children:"Korean"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Model"}),e.jsxs(M,{value:((js=a==null?void 0:a.transcriber)==null?void 0:js.model)||"nova-2",onValueChange:s=>h("transcriber.model",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsx(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:Ba(((vs=a==null?void 0:a.transcriber)==null?void 0:vs.provider)||"deepgram").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-white/50",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.accuracy&&e.jsx(_,{variant:s.accuracy==="premium"?"default":s.accuracy==="enhanced"?"secondary":"outline",className:"text-xs",children:s.accuracy}),s.latency&&e.jsxs(_,{variant:"outline",className:"text-xs",children:[s.latency," latency"]})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Keywords"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",value:((Ns=(ws=a==null?void 0:a.transcriber)==null?void 0:ws.keywords)==null?void 0:Ns.join(", "))||"",onChange:s=>h("transcriber.keywords",s.target.value.split(",").map(r=>r.trim()).filter(r=>r)),placeholder:"Enter keywords separated by commas..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Confidence Threshold"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"1",step:"0.1",value:((ys=a==null?void 0:a.transcriber)==null?void 0:ys.confidenceThreshold)||.4,onChange:s=>h("transcriber.confidenceThreshold",parseFloat(s.target.value)),placeholder:"0.4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"End of Turn Confidence"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"1",step:"0.1",value:((Cs=a==null?void 0:a.transcriber)==null?void 0:Cs.endOfTurnConfidenceThreshold)||.7,onChange:s=>h("transcriber.endOfTurnConfidenceThreshold",parseFloat(s.target.value)),placeholder:"0.7"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Min End Silence (ms)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"5000",value:((Is=a==null?void 0:a.transcriber)==null?void 0:Is.minEndOfTurnSilenceWhenConfident)||160,onChange:s=>h("transcriber.minEndOfTurnSilenceWhenConfident",parseInt(s.target.value)),placeholder:"160"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Max Turn Silence (ms)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"10000",value:((Ms=a==null?void 0:a.transcriber)==null?void 0:Ms.maxTurnSilence)||400,onChange:s=>h("transcriber.maxTurnSilence",parseInt(s.target.value)),placeholder:"400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Word Finalization Wait (ms)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"5000",value:((Ss=a==null?void 0:a.transcriber)==null?void 0:Ss.wordFinalizationMaxWaitTime)||160,onChange:s=>h("transcriber.wordFinalizationMaxWaitTime",parseInt(s.target.value)),placeholder:"160"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enableUniversalStreamingApi",checked:((ks=a==null?void 0:a.transcriber)==null?void 0:ks.enableUniversalStreamingApi)||!1,onChange:s=>h("transcriber.enableUniversalStreamingApi",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"enableUniversalStreamingApi",className:"text-sm text-white/70",children:"Enable Universal Streaming API"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"formatTurns",checked:((Ts=a==null?void 0:a.transcriber)==null?void 0:Ts.formatTurns)||!1,onChange:s=>h("transcriber.formatTurns",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"formatTurns",className:"text-sm text-white/70",children:"Format Turns"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"disablePartialTranscripts",checked:((Ps=a==null?void 0:a.transcriber)==null?void 0:Ps.disablePartialTranscripts)||!1,onChange:s=>h("transcriber.disablePartialTranscripts",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"disablePartialTranscripts",className:"text-sm text-white/70",children:"Disable Partial Transcripts"})]})]})]})]}),e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center text-white gap-2",children:[e.jsx(mt,{className:"h-5 w-5 text-indigo-600"}),"Word Boost & Keywords"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Word Boost"}),e.jsx(G,{value:((Es=(Vs=a==null?void 0:a.transcriber)==null?void 0:Vs.wordBoost)==null?void 0:Es.join(`
`))||"",onChange:s=>h("transcriber.wordBoost",s.target.value.split(`
`).filter(r=>r.trim())),rows:4,placeholder:"Enter words to boost (one per line)..."}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Words that should be recognized more accurately. One word per line."})]}),((_s=a==null?void 0:a.transcriber)==null?void 0:_s.wordBoost)&&a.transcriber.wordBoost.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Current Word Boost"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg",children:a.transcriber.wordBoost.map((s,r)=>e.jsx(_,{variant:"outline",className:"mr-2 mb-2 border-white/20 text-white/80",children:s},r))})]})]})]})]}),e.jsxs(le,{value:"advanced",className:"space-y-6",children:[e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-5 w-5 text-indigo-600"}),"Call Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Max Duration (seconds)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"10",max:"43200",value:(a==null?void 0:a.maxDurationSeconds)||600,onChange:s=>h("maxDurationSeconds",parseInt(s.target.value)),placeholder:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Background Sound"}),e.jsxs(M,{value:(a==null?void 0:a.backgroundSound)||"off",onValueChange:s=>h("backgroundSound",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"off",children:"Off"}),e.jsx(d,{value:"office",children:"Office"}),e.jsx(d,{value:"cafe",children:"Cafe"}),e.jsx(d,{value:"nature",children:"Nature"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"modelOutputInMessagesEnabled",checked:(a==null?void 0:a.modelOutputInMessagesEnabled)||!1,onChange:s=>h("modelOutputInMessagesEnabled",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"modelOutputInMessagesEnabled",className:"text-sm text-white/70",children:"Model Output in Messages"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"backgroundDenoisingEnabled",checked:(a==null?void 0:a.backgroundDenoisingEnabled)||!1,onChange:s=>h("backgroundDenoisingEnabled",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"backgroundDenoisingEnabled",className:"text-sm text-white/70",children:"Background Denoising (Deprecated)"})]})]})]})]}),e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-purple-600"}),"Speech & Interruption Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/70 mb-2",children:"Start Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/70",children:"Wait Seconds"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"5",step:"0.1",value:((Fs=a==null?void 0:a.startSpeakingPlan)==null?void 0:Fs.waitSeconds)||.4,onChange:s=>h("startSpeakingPlan.waitSeconds",parseFloat(s.target.value)),placeholder:"0.4"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("input",{type:"checkbox",id:"smartEndpointingEnabled",checked:((Os=a==null?void 0:a.startSpeakingPlan)==null?void 0:Os.smartEndpointingEnabled)||!1,onChange:s=>h("startSpeakingPlan.smartEndpointingEnabled",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"smartEndpointingEnabled",className:"text-xs text-white/70",children:"Smart Endpointing"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/70 mb-2",children:"Stop Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/70",children:"Num Words"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"10",value:((Us=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Us.numWords)||0,onChange:s=>h("stopSpeakingPlan.numWords",parseInt(s.target.value)),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/70",children:"Voice Seconds"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"2",step:"0.1",value:((As=a==null?void 0:a.stopSpeakingPlan)==null?void 0:As.voiceSeconds)||.2,onChange:s=>h("stopSpeakingPlan.voiceSeconds",parseFloat(s.target.value)),placeholder:"0.2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/70",children:"Backoff Seconds"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"0",max:"5",step:"0.1",value:((Rs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Rs.backoffSeconds)||1,onChange:s=>h("stopSpeakingPlan.backoffSeconds",parseFloat(s.target.value)),placeholder:"1"})]})]})]})]})]}),e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5 text-blue-600"}),"Transport Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Provider"}),e.jsxs(M,{value:((Ls=(Bs=a==null?void 0:a.transportConfigurations)==null?void 0:Bs[0])==null?void 0:Ls.provider)||"twilio",onValueChange:s=>h("transportConfigurations.0.provider",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"twilio",children:"Twilio"}),e.jsx(d,{value:"vonage",children:"Vonage"}),e.jsx(d,{value:"vapi",children:"VAPI"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Timeout (seconds)"}),e.jsx(N,{className:"bg-white/5 border-white/10 text-white",type:"number",min:"10",max:"300",value:((zs=($s=a==null?void 0:a.transportConfigurations)==null?void 0:$s[0])==null?void 0:zs.timeout)||60,onChange:s=>h("transportConfigurations.0.timeout",parseInt(s.target.value)),placeholder:"60"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:((Ks=(qs=a==null?void 0:a.transportConfigurations)==null?void 0:qs[0])==null?void 0:Ks.record)||!1,onChange:s=>h("transportConfigurations.0.record",s.target.checked),className:"rounded border-white/30 bg-white/5"}),e.jsx("label",{htmlFor:"recordEnabled",className:"text-sm text-white/70",children:"Enable Call Recording"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Recording Channels"}),e.jsxs(M,{value:((Ws=(Hs=a==null?void 0:a.transportConfigurations)==null?void 0:Hs[0])==null?void 0:Ws.recordingChannels)||"mono",onValueChange:s=>h("transportConfigurations.0.recordingChannels",s),children:[e.jsx(S,{className:"mt-1 bg-white/5 border-white/10 text-white",children:e.jsx(k,{})}),e.jsxs(T,{className:"bg-[#0b0f2e] border-white/10 text-white",children:[e.jsx(d,{value:"mono",children:"Mono"}),e.jsx(d,{value:"dual",children:"Dual"})]})]})]})]})]})]})]}),e.jsx(le,{value:"debug",className:"space-y-6",children:e.jsxs(B,{className:"neo-card border-none",children:[e.jsx(q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-red-600"}),"Debug Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Assistant ID"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg font-mono text-sm text-white/80",children:i==null?void 0:i.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Organization ID"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg font-mono text-sm text-white/80",children:(a==null?void 0:a.orgId)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Created At"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg text-sm text-white/80",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Updated At"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg text-sm text-white/80",children:a!=null&&a.updatedAt?new Date(a.updatedAt).toLocaleString():"N/A"})]})]}),(a==null?void 0:a.metadata)&&Object.keys(a.metadata).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Metadata"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg",children:e.jsx("pre",{className:"text-xs text-white/60 whitespace-pre-wrap",children:JSON.stringify(a.metadata,null,2)})})]}),(a==null?void 0:a._rawVapiData)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70",children:"Raw VAPI Response"}),e.jsx("div",{className:"mt-1 p-3 bg-white/5 rounded-lg max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-white/60 whitespace-pre-wrap",children:JSON.stringify(a._rawVapiData,null,2)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-400/30",children:[e.jsx("label",{className:"text-xs font-medium text-blue-300",children:"Model Values"}),e.jsxs("div",{className:"text-xs text-blue-200/80 mt-1",children:[e.jsxs("div",{children:['Provider: "',(Ys=a==null?void 0:a.model)==null?void 0:Ys.provider,'" (',typeof((Gs=a==null?void 0:a.model)==null?void 0:Gs.provider),")"]}),e.jsxs("div",{children:['Model: "',(Qs=a==null?void 0:a.model)==null?void 0:Qs.model,'" (',typeof((Js=a==null?void 0:a.model)==null?void 0:Js.model),")"]}),e.jsxs("div",{children:["Temperature: ",(Xs=a==null?void 0:a.model)==null?void 0:Xs.temperature," (",typeof((Zs=a==null?void 0:a.model)==null?void 0:Zs.temperature),")"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-500/10 rounded-lg border border-green-400/30",children:[e.jsx("label",{className:"text-xs font-medium text-green-300",children:"Voice Values"}),e.jsxs("div",{className:"text-xs text-green-200/80 mt-1",children:[e.jsxs("div",{children:['Provider: "',(Ds=a==null?void 0:a.voice)==null?void 0:Ds.provider,'" (',typeof((ea=a==null?void 0:a.voice)==null?void 0:ea.provider),")"]}),e.jsxs("div",{children:['Voice ID: "',(sa=a==null?void 0:a.voice)==null?void 0:sa.voiceId,'" (',typeof((aa=a==null?void 0:a.voice)==null?void 0:aa.voiceId),")"]}),e.jsxs("div",{children:["Speed: ",(ta=a==null?void 0:a.voice)==null?void 0:ta.speed," (",typeof((ra=a==null?void 0:a.voice)==null?void 0:ra.speed),")"]})]})]})]})]})]})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"h-16 w-16 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Assistant Selected"}),e.jsx("p",{className:"text-white/50",children:"Select an assistant from the list to view details"})]})})}),e.jsx(Ee,{open:fe,onOpenChange:ee,children:e.jsxs(_e,{className:"bg-[#0b0f2e] border-white/10 text-white sm:max-w-[425px]",children:[e.jsx(Fe,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-red-400",children:[e.jsx(we,{className:"h-5 w-5"}),"Delete Assistant"]})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-red-500/10 rounded-lg border border-red-400/30",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(we,{className:"h-8 w-8 text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-300",children:"Are you sure you want to delete this assistant?"}),e.jsxs("div",{className:"mt-2 text-sm text-red-200/80",children:[e.jsxs("p",{children:[e.jsx("strong",{children:f==null?void 0:f.name})," will be permanently deleted from both VAPI and your database. This action cannot be undone."]}),e.jsxs("div",{className:"mt-2 text-xs text-red-300/70",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Agent ID:"})," ",f==null?void 0:f.id]}),(f==null?void 0:f.assistant_id)&&e.jsxs("p",{children:[e.jsx("strong",{children:"VAPI Assistant ID:"})," ",f.assistant_id]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(R,{variant:"outline",onClick:()=>ee(!1),disabled:pe.isPending,className:"border-white/20 text-white/70 hover:bg-white/10 hover:text-white",children:"Cancel"}),e.jsx(R,{variant:"destructive",onClick:Za,disabled:pe.isPending,className:"bg-red-600 hover:bg-red-700",children:pe.isPending?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Delete Assistant"]})})]})]})}),E&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>b(!1)}),e.jsxs("div",{className:"ml-auto relative bg-[#0b0f2e] w-1/2 h-full shadow-2xl border-l border-white/10 transform transition-transform duration-300 ease-in-out",children:[e.jsx("div",{className:"bg-[#0b0f2e] border-b border-white/10 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ce,{className:"h-10 w-10 ring-2 ring-white/10",children:e.jsx(Ie,{className:"text-white bg-gradient-to-br from-indigo-500/30 to-purple-500/30 font-medium",children:je((i==null?void 0:i.name)||"")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:i==null?void 0:i.name}),e.jsx("p",{className:"text-white/50 text-sm",children:"AI Voice Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{id:"call-button-container",className:"min-w-[100px] min-h-[40px] bg-red-500/20 border border-red-400/30 rounded flex items-center justify-center"}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>b(!1),className:"text-white/40 hover:text-white hover:bg-white/10 h-8 w-8 p-0 rounded-full",children:"Ã—"})]})]})}),e.jsx("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:i&&e.jsx(Mt,{agentId:String(i.id),agentName:i.name||"Unknown Agent",agentConfig:{...a,assistant_id:i.assistant_id||(a==null?void 0:a.assistant_id),firstMessage:(a==null?void 0:a.firstMessage)||`Hello! I'm ${i.name}. How can I help you today?`,systemMessage:((la=(na=(ia=a==null?void 0:a.model)==null?void 0:ia.messages)==null?void 0:na[0])==null?void 0:la.content)||`You are ${i.name}, a helpful AI assistant.`},onCallStart:()=>{console.log("ðŸŽ™ï¸ Started call with assistant:",i.name),console.log("ðŸ” Agent data:",i),console.log("ðŸ” Agent details:",a),u.success(`Connected to ${i.name}`)},onCallEnd:()=>{console.log("ðŸŽ™ï¸ Ended call with assistant:",i.name),u.info("Call ended")},onError:s=>{console.error("ðŸŽ™ï¸ Call error:",s),u.error(`Call error: ${s.message}`)}})})]})]}),e.jsx(St,{open:ae,onOpenChange:A,onTemplateSelect:Ga,onCreateCustom:Qa})]})};export{Bt as default};
//# sourceMappingURL=VapiStyleAgents-DNWrx-AV.js.map
