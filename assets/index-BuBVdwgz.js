import{r as s}from"./vendor-D6QveUxv.js";import{a1 as O}from"./index-CnGOntes.js";import{j as g}from"./ui-Bcnk-Zux.js";var S=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{};function h(n,e){return s.useReducer((t,o)=>e[t][o]??t,n)}var C=n=>{const{present:e,children:t}=n,o=T(e),r=typeof t=="function"?t({present:o.isPresent}):s.Children.only(t),m=O(o.ref,R(r));return typeof t=="function"||o.isPresent?s.cloneElement(r,{ref:m}):null};C.displayName="Presence";function T(n){const[e,t]=s.useState(),o=s.useRef({}),r=s.useRef(n),m=s.useRef("none"),a=n?"mounted":"unmounted",[u,c]=h(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=A(o.current);m.current=u==="mounted"?i:"none"},[u]),S(()=>{const i=o.current,N=r.current;if(N!==n){const f=m.current,p=A(i);n?c("MOUNT"):p==="none"||(i==null?void 0:i.display)==="none"?c("UNMOUNT"):c(N&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),S(()=>{if(e){let i;const N=e.ownerDocument.defaultView??window,d=p=>{const M=A(o.current).includes(p.animationName);if(p.target===e&&M&&(c("ANIMATION_END"),!r.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",i=N.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=p=>{p.target===e&&(m.current=A(o.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{N.clearTimeout(i),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(i=>{i&&(o.current=getComputedStyle(i)),t(i)},[])}}function A(n){return(n==null?void 0:n.animationName)||"none"}function R(n){var o,r;let e=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function I(n,e=[]){let t=[];function o(m,a){const u=s.createContext(a),c=t.length;t=[...t,a];const i=d=>{var P;const{scope:f,children:p,...l}=d,M=((P=f==null?void 0:f[n])==null?void 0:P[c])||u,x=s.useMemo(()=>l,Object.values(l));return g.jsx(M.Provider,{value:x,children:p})};i.displayName=m+"Provider";function N(d,f){var M;const p=((M=f==null?void 0:f[n])==null?void 0:M[c])||u,l=s.useContext(p);if(l)return l;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${m}\``)}return[i,N]}const r=()=>{const m=t.map(a=>s.createContext(a));return function(u){const c=(u==null?void 0:u[n])||m;return s.useMemo(()=>({[`__scope${n}`]:{...u,[n]:c}}),[u,c])}};return r.scopeName=n,[o,w(r,...e)]}function w(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const o=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(m){const a=o.reduce((u,{useScope:c,scopeName:i})=>{const d=c(m)[`__scope${i}`];return{...u,...d}},{});return s.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function U(n){const e=s.useRef(n);return s.useEffect(()=>{e.current=n}),s.useMemo(()=>(...t)=>{var o;return(o=e.current)==null?void 0:o.call(e,...t)},[])}function _(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}export{C as P,S as a,_ as b,I as c,U as u};
//# sourceMappingURL=index-BuBVdwgz.js.map
