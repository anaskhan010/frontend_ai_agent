import{j as e,aS as A,aj as D,as as j}from"./ui-CZ40mCLE.js";import{r as u}from"./vendor-DG599jyl.js";import{u as Q,b as L,c as k}from"./query-Dkjx6fBT.js";import{a as p,t as c,u as B,C as i,b as o,B as H,q as U,r as $,s as V,v as Z,x as z,P as G,Q as J,R as E,U as F,c as h,d as g,e as W,n as X}from"./index-gfvc66g_.js";import{P as q}from"./Page-BeutzHE5.js";import"./router-BnJytTjr.js";async function Y(){try{return(await p.get("/api/models/available")).data}catch(t){throw console.error("Error fetching available models:",t),c.error("Failed to fetch available models"),t}}async function _(t){var d,x;try{const a=await p.post("/api/models/config",t);return c.success("Model configuration created successfully"),a.data}catch(a){console.error("Error creating model config:",a);const f=((x=(d=a.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to create model configuration";throw c.error(f),a}}async function ee(t){var d,x;try{const a=await p.post("/api/models/test",t);return c.success("Model test completed successfully"),a.data}catch(a){console.error("Error testing model:",a);const f=((x=(d=a.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to test model";throw c.error(f),a}}async function se(){try{return(await p.get("/api/models/stats")).data}catch(t){throw console.error("Error fetching model stats:",t),c.error("Failed to fetch model statistics"),t}}const ue=()=>{var b,w,C,M,T,S;const[t,d]=u.useState(""),[x,a]=u.useState(""),[f,te]=u.useState("Hello, how are you?"),[ae,re]=u.useState(.7),[ne,le]=u.useState(!1),[I,N]=u.useState(!1),O=Q(),{user:m}=B(),{data:y,isLoading:P,error:R}=L({queryKey:["models","available",m==null?void 0:m.id],queryFn:Y,retry:1,enabled:!!(m!=null&&m.id),staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:n=>n}),{data:r,isLoading:K}=L({queryKey:["models","stats"],queryFn:se,retry:1});k({mutationFn:ee,onSuccess:n=>{c.success("Model test completed successfully"),console.log("Test result:",n)},onError:n=>{var l,s;console.error("Model test failed:",n),c.error(((s=(l=n.response)==null?void 0:l.data)==null?void 0:s.message)||"Model test failed")}}),k({mutationFn:_,onSuccess:()=>{O.invalidateQueries({queryKey:["models"]}),N(!1),c.success("Model configuration created successfully")},onError:n=>{var l,s;c.error(((s=(l=n.response)==null?void 0:l.data)==null?void 0:s.message)||"Failed to create model configuration")}});const v=(y==null?void 0:y.data)||{};return R?e.jsx(q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and configure AI models from different providers"})]}),e.jsx(i,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to connect to the backend API. Please ensure the backend server is running."}),e.jsx(H,{onClick:()=>window.location.reload(),children:"Retry Connection"})]})})})]})}):e.jsx(q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and configure AI models from different providers"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(U,{open:I,onOpenChange:N,children:e.jsxs($,{children:[e.jsxs(V,{children:[e.jsx(Z,{children:"Create Model Configuration"}),e.jsx(z,{children:"Create a new model configuration for your assistants"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Model configuration form will be implemented here."})})]})})})]}),e.jsxs(G,{defaultValue:"providers",className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(E,{value:"providers",children:"Available Models"}),e.jsx(E,{value:"stats",children:"Statistics"})]}),e.jsx(F,{value:"providers",className:"space-y-4",children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"grid gap-6",children:Object.keys(v).length===0?e.jsx(i,{children:e.jsx(o,{className:"pt-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No models available. Please check your backend configuration."})})})}):Object.entries(v).map(([n,l])=>e.jsxs(i,{children:[e.jsxs(h,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),n]}),e.jsxs(W,{children:[Array.isArray(l)?l.length:0," models available"]})]}),e.jsx(o,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.isArray(l)&&l.map(s=>e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx(X,{variant:"secondary",children:s.provider||n})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),s.contextLength&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Context: ",s.contextLength.toLocaleString()," tokens"]}),s.pricing&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Input: $",s.pricing.input,"/1K â€¢ Output: $",s.pricing.output,"/1K"]})]})},s.id||s.name))})})]},n))})}),e.jsx(F,{value:"stats",className:"space-y-4",children:K?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(i,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:((w=(b=r==null?void 0:r.data)==null?void 0:b.totalRequests)==null?void 0:w.toLocaleString())||0})})]}),e.jsxs(i,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Total Tokens"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:((M=(C=r==null?void 0:r.data)==null?void 0:C.totalTokens)==null?void 0:M.toLocaleString())||0})})]}),e.jsxs(i,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Avg Latency"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((T=r==null?void 0:r.data)==null?void 0:T.averageLatency)||0,"ms"]})})]}),e.jsxs(i,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Error Rate"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((((S=r==null?void 0:r.data)==null?void 0:S.errorRate)||0)*100).toFixed(1),"%"]})})]})]})})]})]})})};export{ue as default};
//# sourceMappingURL=Models-DuCzcGhE.js.map
