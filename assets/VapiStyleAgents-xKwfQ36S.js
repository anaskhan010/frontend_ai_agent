import{j as e,br as Sr,M as xe,ar as ke,au as vr,aT as A,bs as Mr,b5 as he,aM as Se,aP as Tr,D as er,N as Pr,bt as Vr,T as sr,B as ve,O as ee,bu as fe,ac as ar,a_ as rr,am as lr,bv as nr,a7 as ir,aQ as me,G as Er,g as be,F as tr,az as Fr}from"./ui-C7wuVsKo.js";import{r as y,a as Or}from"./vendor-DG599jyl.js";import{u as _r,b as Br,c as Ne}from"./query-BI4h7QWD.js";import{a as Rr,c as Ur,b as qr,u as Lr,d as $r}from"./agentService-iu3dQ7HS.js";import{t as w,u as zr}from"./index-CUjvNcD6.js";import{B as F}from"./button-DAfv1lEn.js";import{I as x}from"./input-qfwdyloT.js";import{B as O}from"./badge-DTmq5TA0.js";import{C,b as I,c as k,a as S}from"./card-aEf8HYk2.js";import{T as Kr,a as Wr,b as q,c as L}from"./tabs-B365V6_b.js";import{A as ye,a as we}from"./avatar-CwBYu1bQ.js";import{_ as se}from"./vapi-CWmUDqtF.js";import{M as or,g as Ce,V as ae,a as Ie,T as cr,b as dr,c as mr,d as xr,e as hr}from"./vapiProviders-CxDkCpCc.js";import{D as ur,f as Hr,a as gr,b as pr,c as jr}from"./dialog-D2hWIkvB.js";import{T as V}from"./textarea-DHW21YBW.js";import{S as j,a as v,b as f,c as b,d as n}from"./select-CsZI97Jz.js";import"./router-BavLd_S0.js";import"./index-HDeFwIcs.js";const Jr=({agentId:K,agentName:$="AI Assistant",agentConfig:i,onCallStart:G,onCallEnd:a,onError:z})=>{const H="eb3b26e3-7dbb-4fd6-a545-a954756a43aa",M=y.useRef(null),[T,R]=y.useState({isConnected:!1,isConnecting:!1,isMuted:!1,volumeLevel:0,callDuration:0,status:"idle"}),[re,X]=y.useState([]),Y=y.useRef(null),le=H!=="your-vapi-public-key-here";console.log("ðŸ” VAPI Debug Info:"),console.log("- Vapi class available:",typeof se),console.log("- Public API Key:",`${H.substring(0,8)}...`),console.log("- Is configured:",le),y.useEffect(()=>{console.log("ðŸ”§ Initializing VAPI for agent:",K),console.log("ðŸ”‘ Public API Key:",`${H.substring(0,8)}...`),console.log("âœ… Is VAPI Configured:",le);try{console.log("ðŸ§ª Testing VAPI import..."),console.log("- Vapi constructor:",se),console.log("- typeof Vapi:",typeof se),typeof se=="function"?console.log("âœ… VAPI import successful"):console.error("âŒ VAPI import failed - not a constructor")}catch(r){console.error("âŒ VAPI import test failed:",r)}try{M.current=new se(H),console.log("âœ… VAPI instance created successfully"),Me()}catch(r){console.error("âŒ Failed to initialize VAPI:",r),w.error("Failed to initialize VAPI. Please check your API key.")}return()=>{M.current&&M.current.stop(),Y.current&&clearInterval(Y.current)}},[H,K]);const Me=()=>{M.current&&(M.current.on("call-start",()=>{console.log("ðŸŽ™ï¸ VAPI call started"),R(r=>({...r,isConnected:!0,isConnecting:!1,status:"connected"})),Te(),w.success("Call connected! You can now speak."),G==null||G()}),M.current.on("call-end",()=>{console.log("ðŸ“ž VAPI call ended"),R(r=>({...r,isConnected:!1,isConnecting:!1,status:"ended"})),Y.current&&(clearInterval(Y.current),Y.current=null),w.info("Call ended"),a==null||a()}),M.current.on("speech-start",()=>{console.log("ðŸ—£ï¸ Speech started")}),M.current.on("speech-end",()=>{console.log("ðŸ¤ Speech ended")}),M.current.on("volume-level",r=>{R(m=>({...m,volumeLevel:r}))}),M.current.on("message",r=>{if(console.log("ðŸ“¨ VAPI message:",r),r.type==="transcript"&&r.transcript){const m={role:r.role||"assistant",content:r.transcript,timestamp:new Date,type:"transcript"};X(_=>[..._,m])}}),M.current.on("error",r=>{console.error("âŒ VAPI error:",r),R(_=>({..._,isConnected:!1,isConnecting:!1,status:"error"}));let m="Unknown error";r.message&&(m=r.message,r.message.includes("assistant")&&r.message.includes("not found")?m="Assistant not found in VAPI. Please ensure the agent is properly synced with VAPI dashboard.":r.message.includes("unauthorized")||r.message.includes("401")?m="Unauthorized access. Please check your VAPI API key configuration.":(r.message.includes("microphone")||r.message.includes("permission"))&&(m="Microphone permission denied. Please allow microphone access and try again.")),w.error(`Call error: ${m}`),z==null||z(r)}))},Te=()=>{Y.current=setInterval(()=>{R(r=>({...r,callDuration:r.callDuration+1}))},1e3)},W=r=>{const m=Math.floor(r/60),_=r%60;return`${m}:${_.toString().padStart(2,"0")}`},ne=()=>{const r={name:$,firstMessage:(i==null?void 0:i.firstMessage)||`Hello! I'm ${$}. How can I help you today?`,model:{provider:"openai",model:"gpt-4",temperature:.7,messages:[{role:"system",content:(i==null?void 0:i.systemMessage)||`You are ${$}, a helpful AI assistant. Keep responses conversational and under 30 words when possible.`}]},voice:{provider:"vapi",voiceId:(i==null?void 0:i.voiceId)||"Cole"}};return console.log("ðŸ“‹ Assistant config created:",r),r},ue=async()=>{if(console.log("ðŸš€ Starting VAPI agent call for:",K),console.log("ðŸ”‘ VAPI Public Key:",`${H.substring(0,8)}...`),console.log("ðŸ¤– Agent Config:",i),!M.current){w.error("VAPI not initialized. Please check your API key configuration.");return}try{R(m=>({...m,isConnecting:!0,status:"connecting",callDuration:0})),X([]);const r=(i==null?void 0:i.assistant_id)||(i==null?void 0:i.assistantId);if(r){console.log("ðŸ“ž Using existing assistant ID from database:",r);const m={metadata:{portalAgentId:K,agentName:$,initiatedFrom:"portal"}};console.log("ðŸ“‹ Starting call with assistant ID:",r),console.log("ðŸ“‹ Assistant overrides:",m),await M.current.start(r,m)}else{console.log("ðŸ”„ Creating assistant configuration...");const m=ne();console.log("ðŸ“ž Starting agent call with assistant config"),console.log("ðŸ¤– Agent Name:",$);const _=m;console.log("ðŸ“‹ Call config:",_),await new Promise(B=>setTimeout(B,100)),await M.current.start(_)}}catch(r){console.error("âŒ Error starting agent call:",r),R(_=>({..._,isConnecting:!1,status:"error"}));let m="Failed to start call";r.message?(m=r.message,r.message.includes("Authentication")||r.message.includes("401")?m="Authentication failed. Please check your VAPI API key.":r.message.includes("assistant")||r.message.includes("404")?m="Assistant not found. The assistant may not exist in VAPI.":r.message.includes("permission")||r.message.includes("microphone")?m="Microphone permission denied. Please allow microphone access.":(r.message.includes("network")||r.message.includes("fetch"))&&(m="Network error. Please check your internet connection.")):r.code?m=`Error code: ${r.code}`:typeof r=="string"&&(m=r),w.error(`Failed to start call: ${m}`),console.error("ðŸ“‹ Full error details:",r)}},Z=()=>{console.log("ðŸ›‘ Stopping VAPI agent call..."),M.current&&M.current.stop()},u=()=>{if(M.current){const r=!T.isMuted;M.current.setMuted(r),R(m=>({...m,isMuted:r})),w.info(r?"Microphone muted":"Microphone unmuted")}},ie=()=>{const r=document.getElementById("call-button-container");return console.log("ðŸŽ¯ Looking for call-button-container:",r),r?(console.log("ðŸŽ¯ Rendering call button, call state:",T),Or.createPortal(e.jsxs("div",{className:"flex items-center gap-2",children:[T.isConnected&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-800 bg-white px-3 py-1 rounded-md border border-gray-200",children:W(T.callDuration)}),e.jsx(F,{onClick:u,variant:"outline",size:"sm",className:`border-gray-300 ${T.isMuted?"bg-red-50  text-red-700 hover:bg-red-100":"bg-white hover:bg-gray-50 text-gray-700"}`,children:T.isMuted?e.jsx(Sr,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(F,{variant:"outline",size:"sm",className:"border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:e.jsx(ke,{className:"h-4 w-4"})})]}),!T.isConnected&&!T.isConnecting?e.jsxs(F,{onClick:ue,size:"sm",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),"Call"]}):T.isConnecting?e.jsxs(F,{size:"sm",className:"px-4 py-2 bg-amber-500 text-white text-sm font-medium rounded-md",disabled:!0,children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting"]}):e.jsxs(F,{onClick:Z,size:"sm",className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),r)):(console.warn("âš ï¸ call-button-container not found!"),null)};console.log("ðŸŽ¯ VapiAgentCall render - isVapiConfigured:",le),console.log("ðŸŽ¯ VapiAgentCall render - callState:",T),console.log("ðŸŽ¯ VapiAgentCall render - agentId:",K),console.log("ðŸŽ¯ VapiAgentCall render - agentName:",$);const[Q,te]=y.useState(!1);return y.useEffect(()=>{const r=()=>document.getElementById("call-button-container")?(console.log("âœ… Found call-button-container"),te(!0),!0):(console.warn("âŒ call-button-container not found"),!1);if(r())return;const m=setInterval(()=>{r()&&clearInterval(m)},100);return()=>{clearInterval(m)}},[]),e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[ie(),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Conversation"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:re.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(he,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-center text-sm",children:T.isConnected?"Conversation will appear here...":"Start a call to begin the conversation"})]}):e.jsx("div",{className:"space-y-6",children:re.map((r,m)=>e.jsxs("div",{className:`flex gap-3 ${r.role==="user"?"justify-end":"justify-start"}`,children:[r.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Se,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:`max-w-[75%] ${r.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 border border-gray-200"} rounded-lg px-4 py-3`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${r.role==="user"?"text-blue-100":"text-gray-500"}`,children:r.role==="user"?"You":$}),e.jsx("span",{className:`text-xs ${r.role==="user"?"text-blue-200":"text-gray-400"}`,children:r.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm leading-relaxed",children:r.content})]}),r.role==="user"&&e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Tr,{className:"h-4 w-4 text-blue-600"})})]},m))})})]}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Assistant"}),e.jsx("p",{className:"font-medium text-gray-900",children:$})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Connection"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${T.status==="connected"?"bg-green-500":T.status==="connecting"?"bg-amber-500 animate-pulse":T.status==="error"?"bg-red-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:T.status==="idle"?"Ready":T.status==="connecting"?"Connecting":T.status==="connected"?"Active":T.status==="ended"?"Ended":"Error"})]})]})]})})]})},Gr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BASE_URL:"https://ai.research-hero.com",VITE_FACEBOOK_REDIRECT_URI:"https://ai.research-hero.com/api/auth/facebook/callback",VITE_FRONTEND_URL:"https://aiagent.research-hero.com",VITE_GMAIL_CLIENT_ID:"686955346191-el9qo3bhbgfo7fk4juanq8bq7g7iis7d.apps.googleusercontent.com",VITE_GMAIL_REDIRECT_URI:"https://ai.research-hero.com/api/gmail/auth/callback",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51S8GFm2MMm3Fy1PB45KAluHAtFTOmAY9qKUE4sITR1TA1zfX97ON36OAcAALplq6LbLgqXaTyY0hRB7ae55LzpBQ00DfkbC8oy",VITE_VAPI_BASE_URL:"https://api.vapi.ai",VITE_VAPI_PUBLIC_KEY:"eb3b26e3-7dbb-4fd6-a545-a954756a43aa"},xl=()=>{var Ee,Fe,Oe,_e,Be,Re,Ue,qe,Le,$e,ze,Ke,We,He,Je,Ge,Ye,Qe,Xe,Ze,Ae,De,es,ss,as,rs,ls,ns,is,ts,os,cs,ds,ms,xs,hs,us,gs,ps,js,vs,fs,bs,Ns,ys,ws,Cs,Is,ks,Ss,Ms,Ts,Ps,Vs,Es,Fs,Os,_s,Bs,Rs,Us,qs,Ls,$s,zs,Ks,Ws,Hs,Js,Gs,Ys,Qs,Xs,Zs,As,Ds,ea,sa,aa,ra,la,na,ia,ta,oa,ca,da,ma,xa,ha,ua,ga,pa,ja,va,fa,ba,Na,ya,wa,Ca,Ia;const[K,$]=y.useState(""),[i,G]=y.useState(null),[a,z]=y.useState(null),[H,M]=y.useState(!1),[T,R]=y.useState(!1),[re,X]=y.useState(!1),[Y,le]=y.useState(!1),[Me,Te]=y.useState(null),[W,ne]=y.useState(null),[ue,Z]=y.useState(!1),[u,ie]=y.useState(null),[Q,te]=y.useState(new Set);console.log("ðŸ” Environment Debug:"),console.log("- VITE_VAPI_PUBLIC_KEY:",`${"eb3b26e3-7dbb-4fd6-a545-a954756a43aa".substring(0,8)}...`),console.log("- All env vars:",Gr);const[r,m]=y.useState({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"vapi",voiceId:"Cole",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),_=_r(),{user:B}=zr(),{data:ge,isLoading:fr}=Br({queryKey:["syncedAgents",B==null?void 0:B.id,K],queryFn:()=>Rr(K),staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!(B!=null&&B.id),placeholderData:s=>s}),oe=Ne({mutationFn:Ur,onSuccess:s=>{console.log("âœ… Assistant created successfully:",s),w.success(`Assistant "${r.name}" created successfully!`),X(!1),m({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),_.invalidateQueries({queryKey:["syncedAgents"]}),_.invalidateQueries({queryKey:["agents"]})},onError:s=>{var d,c,h,g,N,p;console.error("âŒ Error creating assistant:",s);let l="Failed to create assistant";(c=(d=s.response)==null?void 0:d.data)!=null&&c.message?l=s.response.data.message:(g=(h=s.response)==null?void 0:h.data)!=null&&g.error?l=s.response.data.error:s.message&&(l=s.message),w.error(`Creation failed: ${l}`),console.error("Detailed error:",{status:(N=s.response)==null?void 0:N.status,data:(p=s.response)==null?void 0:p.data,message:s.message})}}),ce=Ne({mutationFn:({id:s,data:l})=>Lr(s,l),onSuccess:(s,l)=>{console.log("âœ… Assistant updated successfully:",s);const d=Object.keys(l.data)[0];w.success(`${d} updated successfully`),_.invalidateQueries({queryKey:["syncedAgents",B==null?void 0:B.id]}),i&&Pe(i.id)},onError:(s,l)=>{var h,g,N,p,E,D;console.error("âŒ Error updating assistant:",s);let d="Failed to update assistant";(g=(h=s.response)==null?void 0:h.data)!=null&&g.message?d=s.response.data.message:(p=(N=s.response)==null?void 0:N.data)!=null&&p.error?d=s.response.data.error:s.message&&(d=s.message);const c=Object.keys(l.data)[0];w.error(`Failed to update ${c}: ${d}`),console.error("Update error details:",{field:c,value:l.data[c],status:(E=s.response)==null?void 0:E.status,data:(D=s.response)==null?void 0:D.data,message:s.message})}}),de=Ne({mutationFn:$r,onSuccess:s=>{console.log("âœ… Delete success:",s),w.success(`Assistant "${u==null?void 0:u.name}" deleted successfully!`),Z(!1),ie(null),i&&u&&i.id===u.id&&(G(null),z(null)),_.invalidateQueries({queryKey:["syncedAgents",B==null?void 0:B.id]})},onError:s=>{var c,h,g,N,p,E;console.error("âŒ Error deleting assistant:",s);let l="Unknown error occurred";(h=(c=s.response)==null?void 0:c.data)!=null&&h.message?l=s.response.data.message:(N=(g=s.response)==null?void 0:g.data)!=null&&N.error?l=s.response.data.error:s.message&&(l=s.message);const d=(u==null?void 0:u.name)||"Assistant";w.error(`Failed to delete ${d}: ${l}`),console.error("Delete error details:",{assistantId:u==null?void 0:u.id,assistantName:u==null?void 0:u.name,status:(p=s.response)==null?void 0:p.status,data:(E=s.response)==null?void 0:E.data,message:s.message})}}),U=(ge==null?void 0:ge.data)||[];y.useEffect(()=>{if(U.length>0){console.log("ðŸ” Agent data structure (first agent):",U[0]),console.log("ðŸ” Total agents loaded:",U.length);const s=new Set;U.forEach((l,d)=>{((l.assistant_data||{}).metadata||{}).published===!0&&s.add(String(l.id)),d<3&&console.log(`ðŸ” Agent ${d+1}:`,{name:l.name,localId:l.id,assistantId:l.assistant_id,hasAssistantId:!!l.assistant_id,structure:Object.keys(l)})}),te(s),console.log("ðŸ“Š Initialized published agents from metadata:",Array.from(s))}},[U]),y.useEffect(()=>{var s,l;U.length>0&&!i&&(console.log("Available agents:",U),console.log("First agent ID:",(s=U[0])==null?void 0:s.id,"Type:",typeof((l=U[0])==null?void 0:l.id)),G(U[0]))},[U,i]),y.useEffect(()=>{if(i&&i.id){const s=i.assistant_id||i.id;console.log("ðŸ” Loading agent details:",{agentName:i.name,localId:i.id,assistantId:i.assistant_id,usingId:s,idType:i.assistant_id?"VAPI UUID":"Local ID"}),Pe(s)}},[i]);const br=s=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s),Pe=async s=>{var l,d,c,h,g,N,p,E,D,ka,Sa,Ma,Ta,Pa,Va,Ea,Fa,Oa,_a,Ba,Ra,Ua,qa,La,$a,za,Ka,Wa,Ha,Ja,Ga,Ya,Qa,Xa,Za,Aa,Da;M(!0);try{const J=String(s);br(J)||console.warn("Agent ID is not a valid UUID:",J,"- will try to load details anyway"),console.log("ðŸ” Fetching complete VAPI details for agent:",J);const je=await qr(J);console.log("ðŸ“‹ Complete VAPI agent details:",je);const o=je.data||je;z({name:o.name||(i==null?void 0:i.name),firstMessage:o.firstMessage||(i==null?void 0:i.firstMessage),firstMessageMode:o.firstMessageMode||"assistant-speaks-first",firstMessageInterruptionsEnabled:o.firstMessageInterruptionsEnabled||!1,model:{provider:((l=o.model)==null?void 0:l.provider)||"openai",model:((d=o.model)==null?void 0:d.model)||"gpt-4",temperature:((c=o.model)==null?void 0:c.temperature)||.7,maxTokens:((h=o.model)==null?void 0:h.maxTokens)||1e3,numFastTurns:((g=o.model)==null?void 0:g.numFastTurns)||0,messages:((N=o.model)==null?void 0:N.messages)||[],tools:((p=o.model)==null?void 0:p.tools)||[],toolIds:((E=o.model)==null?void 0:E.toolIds)||[],knowledgeBase:(D=o.model)==null?void 0:D.knowledgeBase,knowledgeBaseId:(ka=o.model)==null?void 0:ka.knowledgeBaseId,emotionRecognitionEnabled:((Sa=o.model)==null?void 0:Sa.emotionRecognitionEnabled)||!1,thinking:((Ma=o.model)==null?void 0:Ma.thinking)||{type:"disabled"}},voice:{provider:((Ta=o.voice)==null?void 0:Ta.provider)||"11labs",voiceId:((Pa=o.voice)==null?void 0:Pa.voiceId)||"21m00Tcm4TlvDq8ikWAM",speed:((Va=o.voice)==null?void 0:Va.speed)||1,stability:(Ea=o.voice)==null?void 0:Ea.stability,similarityBoost:(Fa=o.voice)==null?void 0:Fa.similarityBoost,cachingEnabled:((Oa=o.voice)==null?void 0:Oa.cachingEnabled)||!1,chunkPlan:((_a=o.voice)==null?void 0:_a.chunkPlan)||{enabled:!1},fallbackPlan:(Ba=o.voice)==null?void 0:Ba.fallbackPlan},transcriber:{provider:((Ra=o.transcriber)==null?void 0:Ra.provider)||"deepgram",model:((Ua=o.transcriber)==null?void 0:Ua.model)||"nova-2",language:((qa=o.transcriber)==null?void 0:qa.language)||"en",confidenceThreshold:((La=o.transcriber)==null?void 0:La.confidenceThreshold)||.4,endOfTurnConfidenceThreshold:(($a=o.transcriber)==null?void 0:$a.endOfTurnConfidenceThreshold)||.7,minEndOfTurnSilenceWhenConfident:((za=o.transcriber)==null?void 0:za.minEndOfTurnSilenceWhenConfident)||160,maxTurnSilence:((Ka=o.transcriber)==null?void 0:Ka.maxTurnSilence)||400,wordFinalizationMaxWaitTime:((Wa=o.transcriber)==null?void 0:Wa.wordFinalizationMaxWaitTime)||160,enableUniversalStreamingApi:((Ha=o.transcriber)==null?void 0:Ha.enableUniversalStreamingApi)||!1,formatTurns:((Ja=o.transcriber)==null?void 0:Ja.formatTurns)||!1,disablePartialTranscripts:((Ga=o.transcriber)==null?void 0:Ga.disablePartialTranscripts)||!1,keywords:((Ya=o.transcriber)==null?void 0:Ya.keywords)||[],wordBoost:((Qa=o.transcriber)==null?void 0:Qa.wordBoost)||[]},systemMessage:((Aa=(Za=(Xa=o.model)==null?void 0:Xa.messages)==null?void 0:Za[0])==null?void 0:Aa.content)||o.systemMessage||"You are a helpful AI assistant.",endCallMessage:o.endCallMessage,voicemailMessage:o.voicemailMessage,endCallPhrases:o.endCallPhrases||[],functions:o.functions||[],tools:o.tools||[],customFunctions:o.customFunctions,variableValues:o.variableValues,maxDurationSeconds:o.maxDurationSeconds||600,backgroundSound:o.backgroundSound||"off",modelOutputInMessagesEnabled:o.modelOutputInMessagesEnabled||!1,backgroundDenoisingEnabled:o.backgroundDenoisingEnabled||!1,clientMessages:o.clientMessages,serverMessages:o.serverMessages,transportConfigurations:o.transportConfigurations||[],server:o.server,observabilityPlan:o.observabilityPlan,startSpeakingPlan:o.startSpeakingPlan,stopSpeakingPlan:o.stopSpeakingPlan,credentialIds:o.credentialIds||[],metadata:o.metadata||{},createdAt:o.createdAt,updatedAt:o.updatedAt,_rawVapiData:o})}catch(J){console.error("Error loading agent details:",J),console.error("Error details:",((Da=J.response)==null?void 0:Da.data)||J.message),z({model:{provider:"OpenAI",model:"GPT-4"},voice:{provider:"11Labs",voiceId:"Default Voice"},transcriber:{provider:"Deepgram"},systemMessage:"You are a helpful AI assistant."})}finally{M(!1)}},pe=s=>s?s.split(" ").map(l=>l.charAt(0)).join("").toUpperCase().substring(0,2):"NA",P=(s,l)=>{if(s.includes(".")){const[d,c]=s.split(".");m(h=>({...h,[d]:{...h[d],[c]:l}}))}else m(d=>({...d,[s]:l}))},Nr=()=>{var l,d,c;const s=[];return(l=r.name)!=null&&l.trim()||s.push("Assistant name is required"),(d=r.firstMessage)!=null&&d.trim()||s.push("First message is required"),(c=r.systemMessage)!=null&&c.trim()||s.push("System message is required"),r.model.provider||s.push("Model provider is required"),r.model.model||s.push("Model selection is required"),(r.model.temperature<0||r.model.temperature>2)&&s.push("Temperature must be between 0 and 2"),(r.model.maxTokens<1||r.model.maxTokens>32e3)&&s.push("Max tokens must be between 1 and 32000"),r.voice.provider||s.push("Voice provider is required"),r.voice.voiceId||s.push("Voice selection is required"),(r.voice.speed<.25||r.voice.speed>4)&&s.push("Voice speed must be between 0.25 and 4"),r.transcriber.provider||s.push("Transcriber provider is required"),r.transcriber.model||s.push("Transcriber model is required"),r.transcriber.language||s.push("Transcriber language is required"),(r.maxDurationSeconds<10||r.maxDurationSeconds>43200)&&s.push("Max duration must be between 10 and 43200 seconds"),s},yr=()=>{const s=Nr();if(s.length>0){w.error(`Please fix the following errors:
${s.join(`
`)}`);return}if(r.name.length>40){w.error("Assistant name must be 40 characters or less");return}if(r.endCallMessage&&r.endCallMessage.length>1e3){w.error("End call message must be 1000 characters or less");return}if(r.voicemailMessage&&r.voicemailMessage.length>1e3){w.error("Voicemail message must be 1000 characters or less");return}console.log("âœ… Form validation passed, creating assistant...");const l={...r,firstMessageMode:r.firstMessageMode,backgroundSound:r.backgroundSound,transcriber:{...r.transcriber,provider:r.transcriber.provider},voice:{...r.voice,provider:r.voice.provider},systemMessage:void 0,model:{...r.model,provider:r.model.provider,messages:[{role:"system",content:r.systemMessage}]}};console.log("ðŸ”„ Transformed form data for VAPI:",l),oe.mutate(l)},Ve=(s,l)=>{if(!s)return"";const d=s.toLowerCase().trim();return(l==="model"?{openai:"openai","open-ai":"openai",anthropic:"anthropic",groq:"groq",together:"together",anyscale:"anyscale"}:{"11labs":"11labs",elevenlabs:"11labs","eleven-labs":"11labs",openai:"openai","open-ai":"openai",azure:"azure",playht:"playht","play-ht":"playht",deepgram:"deepgram",cartesia:"cartesia",lmnt:"lmnt"})[d]||d},t=(s,l)=>{if(!i){console.warn("No selected agent for field update");return}console.log("ðŸ”„ Field update:",s,"Value:",l,"Type:",typeof l,"Agent ID:",i.id),W&&clearTimeout(W),z(c=>{const h={...c};if(s.includes(".")){const[g,N]=s.split(".");if(h[g]={...h[g],[N]:l},s==="model.provider"){const p=mr(l);p&&(h.model.model=p,console.log("ðŸ¤– Auto-selected model:",p,"for provider:",l))}else if(s==="voice.provider"){const p=xr(l);p&&(h.voice.voiceId=p,console.log("ðŸŽ¤ Auto-selected voice:",p,"for provider:",l))}else if(s==="transcriber.provider"){const p=hr(l);p&&(h.transcriber.model=p,console.log("ðŸ“ Auto-selected transcriber model:",p,"for provider:",l))}}else h[s]=l;return h});const d=setTimeout(()=>{const c={},h=["status","published","publishedAt","systemMessage"];if(s.includes(".")){const[N,p]=s.split(".");if(h.includes(N)||h.includes(p)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}if(c[N]={...a[N],[p]:l},s==="model.provider"){const E=mr(l);E&&(c.model.model=E)}else if(s==="voice.provider"){const E=xr(l);E&&(c.voice.voiceId=E)}else if(s==="transcriber.provider"){const E=hr(l);E&&(c.transcriber.model=E)}}else{if(h.includes(s)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}c[s]=l}console.log("ðŸ”„ Auto-saving field:",s,"with value:",l,"updateData:",c);const g=i.assistant_id||i.id;console.log("ðŸ” Using assistant ID for VAPI:",g,"Type:",typeof g),ce.mutate({id:String(g),data:c})},1e3);ne(d)},wr=s=>{if(!i){console.warn("No selected agent for system message update");return}console.log("ðŸ”„ System message update:",s),W&&clearTimeout(W),z(d=>{const c={...d};return c.systemMessage=s,c.model||(c.model={}),c.model.messages||(c.model.messages=[]),c.model.messages.length===0?c.model.messages.push({role:"system",content:s}):c.model.messages[0].role==="system"?c.model.messages[0].content=s:c.model.messages.unshift({role:"system",content:s}),c});const l=setTimeout(()=>{var N;const c=[...((N=a==null?void 0:a.model)==null?void 0:N.messages)||[]];c.length===0?c.push({role:"system",content:s}):c[0].role==="system"?c[0].content=s:c.unshift({role:"system",content:s});const h={model:{...a==null?void 0:a.model,messages:c}};console.log("ðŸ”„ Auto-saving system message via model.messages:",h);const g=i.assistant_id||i.id;console.log("ðŸ” Using assistant ID for system message update:",g),ce.mutate({id:String(g),data:h})},1e3);ne(l)};y.useEffect(()=>()=>{W&&clearTimeout(W)},[W]);const Cr=s=>{ie(s),Z(!0)},Ir=()=>{if(u){const s=u.assistant_id||u.id;console.log("ðŸ—‘ï¸ Deleting agent:",u.id,u.name,"Using assistant_id:",s),de.mutate(String(s))}else w.error("No agent selected for deletion")},kr=async s=>{var c,h;if(!s||!s.id)return;const l=String(s.id),d=Q.has(l);try{console.log(`ðŸ”„ ${d?"Unpublishing":"Publishing"} agent:`,s.name);const g={metadata:{...a==null?void 0:a.metadata,published:!d,publishedAt:d?null:new Date().toISOString()}},N=s.assistant_id||s.id;console.log("ðŸ” Using assistant ID for VAPI publish:",N,"Type:",typeof N),await ce.mutateAsync({id:String(N),data:g});const p=new Set(Q);d?(p.delete(l),w.success(`${s.name} unpublished successfully`)):(p.add(l),w.success(`${s.name} published successfully`)),te(p),i&&i.id===s.id&&z(E=>({...E,metadata:g.metadata}))}catch(g){console.error("âŒ Error toggling publish status:",g);let N="Failed to update publish status";(h=(c=g.response)==null?void 0:c.data)!=null&&h.message?N=g.response.data.message:g.message&&(N=g.message),w.error(`Failed to ${d?"unpublish":"publish"} ${s.name}: ${N}`)}};return e.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-white to-gray-50",children:[e.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white/80 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Assistants"}),e.jsxs(ur,{open:re,onOpenChange:X,children:[e.jsx(Hr,{asChild:!0,children:e.jsxs(F,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),"Create Assistant"]})}),e.jsxs(gr,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(pr,{children:e.jsxs(jr,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600"}),"Create New Assistant"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name *"}),e.jsx(x,{value:r.name,onChange:s=>P("name",s.target.value),placeholder:"Enter assistant name",className:`mt-1 ${(Ee=r.name)!=null&&Ee.trim()?"":"border-red-300"}`,maxLength:40}),!((Fe=r.name)!=null&&Fe.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Assistant name is required"}),r.name&&r.name.length>40&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Name must be 40 characters or less"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message *"}),e.jsx(V,{value:r.firstMessage,onChange:s=>P("firstMessage",s.target.value),placeholder:"Hello! How can I help you today?",className:`mt-1 ${(Oe=r.firstMessage)!=null&&Oe.trim()?"":"border-red-300"}`,rows:3}),!((_e=r.firstMessage)!=null&&_e.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"First message is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message *"}),e.jsx(V,{value:r.systemMessage,onChange:s=>P("systemMessage",s.target.value),placeholder:"You are a helpful AI assistant...",className:`mt-1 ${(Be=r.systemMessage)!=null&&Be.trim()?"":"border-red-300"}`,rows:4}),!((Re=r.systemMessage)!=null&&Re.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"System message is required"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Model Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:r.model.provider,onValueChange:s=>P("model.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:or.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(j,{value:r.model.model,onValueChange:s=>P("model.model",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:Ce(r.model.provider).map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(x,{type:"number",min:"0",max:"2",step:"0.1",value:r.model.temperature,onChange:s=>P("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(x,{type:"number",min:"1",max:"32000",value:r.model.maxTokens,onChange:s=>P("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(x,{type:"number",min:"0",max:"10",value:r.model.numFastTurns,onChange:s=>P("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Voice Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:r.voice.provider,onValueChange:s=>P("voice.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:ae.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(j,{value:r.voice.voiceId,onValueChange:s=>P("voice.voiceId",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:Ie(r.voice.provider).map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(x,{type:"number",min:"0.25",max:"4",step:"0.1",value:r.voice.speed,onChange:s=>P("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Transcriber Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:r.transcriber.provider,onValueChange:s=>P("transcriber.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:cr.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(j,{value:r.transcriber.model,onValueChange:s=>P("transcriber.model",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:dr(r.transcriber.provider).map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(j,{value:r.transcriber.language,onValueChange:s=>P("transcriber.language",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"en",children:"English"}),e.jsx(n,{value:"es",children:"Spanish"}),e.jsx(n,{value:"fr",children:"French"}),e.jsx(n,{value:"de",children:"German"}),e.jsx(n,{value:"it",children:"Italian"}),e.jsx(n,{value:"pt",children:"Portuguese"}),e.jsx(n,{value:"ru",children:"Russian"}),e.jsx(n,{value:"ja",children:"Japanese"}),e.jsx(n,{value:"ko",children:"Korean"}),e.jsx(n,{value:"zh",children:"Chinese"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Advanced Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(j,{value:r.firstMessageMode,onValueChange:s=>P("firstMessageMode",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(n,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(n,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(x,{type:"number",min:"10",max:"43200",value:r.maxDurationSeconds,onChange:s=>P("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(j,{value:r.backgroundSound,onValueChange:s=>P("backgroundSound",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"off",children:"Off"}),e.jsx(n,{value:"office",children:"Office"}),e.jsx(n,{value:"cafe",children:"Cafe"}),e.jsx(n,{value:"nature",children:"Nature"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:r.firstMessageInterruptionsEnabled,onChange:s=>P("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(V,{value:r.endCallMessage,onChange:s=>P("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(V,{value:r.voicemailMessage,onChange:s=>P("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(F,{variant:"outline",onClick:()=>X(!1),disabled:oe.isPending,children:"Cancel"}),e.jsx(F,{onClick:yr,disabled:oe.isPending||!r.name||!r.firstMessage,className:"bg-blue-600 hover:bg-blue-700",children:oe.isPending?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),"Create Assistant"]})})]})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(x,{placeholder:"Search Assistants",value:K,onChange:s=>$(s.target.value),className:"pl-10 bg-gray-50 border-gray-200"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:fr?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(A,{className:"h-6 w-6 animate-spin text-gray-400"})}):e.jsx("div",{className:"p-2",children:U.filter(s=>s&&s.id&&s.name).map(s=>e.jsx("div",{onClick:()=>G(s),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 mb-2 ${(i==null?void 0:i.id)===s.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ye,{className:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(we,{className:"text-white font-medium",children:pe(s.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.name}),Q.has(String(s.id))&&e.jsx(O,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs",children:"Published"})]}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:s.assistant_id?`${String(s.assistant_id).substring(0,12)}...`:"No Assistant ID"})]})]})},s.id))})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ye,{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(we,{className:"text-white font-medium text-lg",children:pe(i.name)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx(O,{variant:"secondary",className:"bg-green-100 text-green-700",children:"Active"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",String(i.id).substring(0,12),"..."]}),ce.isPending&&e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(A,{className:"h-3 w-3 mr-1 animate-spin"}),"Auto-saving..."]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(F,{size:"sm",onClick:()=>R(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Talk to Assistant"]}),e.jsx(F,{variant:Q.has(String(i.id))?"default":"outline",size:"sm",onClick:()=>kr(i),className:Q.has(String(i.id))?"bg-green-600 hover:bg-green-700 text-white":"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:Q.has(String(i.id))?"Published":"Unpublished"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>Cr(i),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:e.jsx(sr,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:H?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-gray-400"})}):e.jsxs(Kr,{defaultValue:"model",className:"w-full",children:[e.jsxs(Wr,{className:"grid w-full grid-cols-11 mb-6",children:[e.jsxs(q,{value:"model",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Model"]}),e.jsxs(q,{value:"voice",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Voice"]}),e.jsxs(q,{value:"transcriber",className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Transcriber"]}),e.jsxs(q,{value:"functions",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Functions"]}),e.jsxs(q,{value:"variables",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Variables"]}),e.jsxs(q,{value:"knowledge",className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-4 w-4"}),"Knowledge"]}),e.jsxs(q,{value:"workflows",className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4"}),"Workflows"]}),e.jsxs(q,{value:"analysis",className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-4 w-4"}),"Analysis"]}),e.jsxs(q,{value:"advanced",className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-4 w-4"}),"Advanced"]}),e.jsxs(q,{value:"server",className:"flex items-center gap-2",children:[e.jsx(ir,{className:"h-4 w-4"}),"Server"]}),e.jsxs(q,{value:"debug",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Debug"]})]}),e.jsxs(L,{value:"model",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-600"}),"Model Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:Ve(((Ue=a==null?void 0:a.model)==null?void 0:Ue.provider)||"","model"),onValueChange:s=>t("model.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{placeholder:((qe=a==null?void 0:a.model)==null?void 0:qe.provider)||"Select provider"})}),e.jsx(b,{children:or.map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(O,{variant:"outline",className:"text-xs",children:"API Key"})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(j,{value:((Le=a==null?void 0:a.model)==null?void 0:Le.model)||"",onValueChange:s=>t("model.model",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{placeholder:(($e=a==null?void 0:a.model)==null?void 0:$e.model)||"Select model"})}),e.jsxs(b,{children:[Ce(((ze=a==null?void 0:a.model)==null?void 0:ze.provider)||"openai").map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.supportsTools&&e.jsx(O,{variant:"outline",className:"text-xs",children:"Tools"}),s.supportsVision&&e.jsx(O,{variant:"outline",className:"text-xs",children:"Vision"}),s.costTier&&e.jsx(O,{variant:s.costTier==="low"?"secondary":s.costTier==="medium"?"default":"destructive",className:"text-xs",children:s.costTier})]})]})},s.id)),((Ke=a==null?void 0:a.model)==null?void 0:Ke.model)&&!Ce(((We=a==null?void 0:a.model)==null?void 0:We.provider)||"openai").some(s=>s.id===a.model.model)&&e.jsxs(n,{value:a.model.model,children:[a.model.model," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(x,{type:"number",min:"0",max:"2",step:"0.1",value:((He=a==null?void 0:a.model)==null?void 0:He.temperature)||.7,onChange:s=>t("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(x,{type:"number",min:"1",max:"32000",value:((Je=a==null?void 0:a.model)==null?void 0:Je.maxTokens)||1e3,onChange:s=>t("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(x,{type:"number",min:"0",max:"10",value:((Ge=a==null?void 0:a.model)==null?void 0:Ge.numFastTurns)||0,onChange:s=>t("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-green-600"}),"Messages & Prompts"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message"}),e.jsx(V,{value:(a==null?void 0:a.firstMessage)||(i==null?void 0:i.firstMessage)||"",onChange:s=>t("firstMessage",s.target.value),className:"mt-1",rows:3,placeholder:"Hello! How can I help you today?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(j,{value:(a==null?void 0:a.firstMessageMode)||"assistant-speaks-first",onValueChange:s=>t("firstMessageMode",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(n,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(n,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:(a==null?void 0:a.firstMessageInterruptionsEnabled)||!1,onChange:s=>t("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message"}),e.jsx(V,{value:((Xe=(Qe=(Ye=a==null?void 0:a.model)==null?void 0:Ye.messages)==null?void 0:Qe[0])==null?void 0:Xe.content)||(a==null?void 0:a.systemMessage)||"",onChange:s=>wr(s.target.value),className:"mt-1",rows:6,placeholder:"You are a helpful AI assistant..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(V,{value:(a==null?void 0:a.endCallMessage)||"",onChange:s=>t("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(V,{value:(a==null?void 0:a.voicemailMessage)||"",onChange:s=>t("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Phrases"}),e.jsx(V,{value:((Ze=a==null?void 0:a.endCallPhrases)==null?void 0:Ze.join(`
`))||"",onChange:s=>t("endCallPhrases",s.target.value.split(`
`).filter(l=>l.trim())),className:"mt-1",rows:3,placeholder:`goodbye
bye
end call
hang up`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Phrases that will trigger the call to end (one per line, case insensitive)"})]})]})]})]}),e.jsx(L,{value:"voice",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),"Voice Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:Ve(((Ae=a==null?void 0:a.voice)==null?void 0:Ae.provider)||"","voice"),onValueChange:s=>t("voice.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{placeholder:((De=a==null?void 0:a.voice)==null?void 0:De.provider)||"Select voice provider"})}),e.jsx(b,{children:ae.map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(O,{variant:"outline",className:"text-xs",children:"API Key"}),e.jsxs("div",{className:"flex gap-1",children:[s.supportsSpeed&&e.jsx(O,{variant:"secondary",className:"text-xs",children:"Speed"}),s.supportsStability&&e.jsx(O,{variant:"secondary",className:"text-xs",children:"Stability"})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(j,{value:((es=a==null?void 0:a.voice)==null?void 0:es.voiceId)||"",onValueChange:s=>t("voice.voiceId",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{placeholder:"Select voice..."})}),e.jsxs(b,{children:[Ie(((ss=a==null?void 0:a.voice)==null?void 0:ss.provider)||"11labs").map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.gender&&e.jsx(O,{variant:"outline",className:"text-xs",children:s.gender}),s.accent&&e.jsx(O,{variant:"secondary",className:"text-xs",children:s.accent})]})]})},s.id)),((as=a==null?void 0:a.voice)==null?void 0:as.voiceId)&&!Ie(((rs=a==null?void 0:a.voice)==null?void 0:rs.provider)||"11labs").some(s=>s.id===a.voice.voiceId)&&e.jsxs(n,{value:a.voice.voiceId,children:[a.voice.voiceId," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[((ls=ae.find(s=>{var l;return s.id===((l=a==null?void 0:a.voice)==null?void 0:l.provider)}))==null?void 0:ls.supportsSpeed)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(x,{type:"number",min:"0.25",max:"4",step:"0.1",value:((ns=a==null?void 0:a.voice)==null?void 0:ns.speed)||1,onChange:s=>t("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"0.25x to 4x speed"})]}),((is=ae.find(s=>{var l;return s.id===((l=a==null?void 0:a.voice)==null?void 0:l.provider)}))==null?void 0:is.supportsStability)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Stability"}),e.jsx(x,{type:"number",min:"0",max:"1",step:"0.1",value:((ts=a==null?void 0:a.voice)==null?void 0:ts.stability)||.5,onChange:s=>t("voice.stability",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more stable"})]}),((os=ae.find(s=>{var l;return s.id===((l=a==null?void 0:a.voice)==null?void 0:l.provider)}))==null?void 0:os.supportsSimilarityBoost)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Similarity Boost"}),e.jsx(x,{type:"number",min:"0",max:"1",step:"0.1",value:((cs=a==null?void 0:a.voice)==null?void 0:cs.similarityBoost)||.5,onChange:s=>t("voice.similarityBoost",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more similar to original"})]})]})]})]})}),e.jsxs(L,{value:"transcriber",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-purple-600"}),"Transcriber Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:((ds=a==null?void 0:a.transcriber)==null?void 0:ds.provider)||"deepgram",onValueChange:s=>t("transcriber.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:cr.map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(O,{variant:"outline",className:"text-xs",children:"API Key"}),s.supportsLanguages&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[s.supportsLanguages.length," Languages"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(j,{value:((ms=a==null?void 0:a.transcriber)==null?void 0:ms.language)||"en",onValueChange:s=>t("transcriber.language",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"en",children:"English"}),e.jsx(n,{value:"es",children:"Spanish"}),e.jsx(n,{value:"fr",children:"French"}),e.jsx(n,{value:"de",children:"German"}),e.jsx(n,{value:"it",children:"Italian"}),e.jsx(n,{value:"pt",children:"Portuguese"}),e.jsx(n,{value:"zh",children:"Chinese"}),e.jsx(n,{value:"ja",children:"Japanese"}),e.jsx(n,{value:"ko",children:"Korean"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(j,{value:((xs=a==null?void 0:a.transcriber)==null?void 0:xs.model)||"nova-2",onValueChange:s=>t("transcriber.model",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsx(b,{children:dr(((hs=a==null?void 0:a.transcriber)==null?void 0:hs.provider)||"deepgram").map(s=>e.jsx(n,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.accuracy&&e.jsx(O,{variant:s.accuracy==="premium"?"default":s.accuracy==="enhanced"?"secondary":"outline",className:"text-xs",children:s.accuracy}),s.latency&&e.jsxs(O,{variant:"outline",className:"text-xs",children:[s.latency," latency"]})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Keywords"}),e.jsx(x,{value:((gs=(us=a==null?void 0:a.transcriber)==null?void 0:us.keywords)==null?void 0:gs.join(", "))||"",onChange:s=>t("transcriber.keywords",s.target.value.split(",").map(l=>l.trim()).filter(l=>l)),className:"mt-1",placeholder:"Enter keywords separated by commas..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confidence Threshold"}),e.jsx(x,{type:"number",min:"0",max:"1",step:"0.1",value:((ps=a==null?void 0:a.transcriber)==null?void 0:ps.confidenceThreshold)||.4,onChange:s=>t("transcriber.confidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End of Turn Confidence"}),e.jsx(x,{type:"number",min:"0",max:"1",step:"0.1",value:((js=a==null?void 0:a.transcriber)==null?void 0:js.endOfTurnConfidenceThreshold)||.7,onChange:s=>t("transcriber.endOfTurnConfidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Min End Silence (ms)"}),e.jsx(x,{type:"number",min:"0",max:"5000",value:((vs=a==null?void 0:a.transcriber)==null?void 0:vs.minEndOfTurnSilenceWhenConfident)||160,onChange:s=>t("transcriber.minEndOfTurnSilenceWhenConfident",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Turn Silence (ms)"}),e.jsx(x,{type:"number",min:"0",max:"10000",value:((fs=a==null?void 0:a.transcriber)==null?void 0:fs.maxTurnSilence)||400,onChange:s=>t("transcriber.maxTurnSilence",parseInt(s.target.value)),className:"mt-1",placeholder:"400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Finalization Wait (ms)"}),e.jsx(x,{type:"number",min:"0",max:"5000",value:((bs=a==null?void 0:a.transcriber)==null?void 0:bs.wordFinalizationMaxWaitTime)||160,onChange:s=>t("transcriber.wordFinalizationMaxWaitTime",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enableUniversalStreamingApi",checked:((Ns=a==null?void 0:a.transcriber)==null?void 0:Ns.enableUniversalStreamingApi)||!1,onChange:s=>t("transcriber.enableUniversalStreamingApi",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"enableUniversalStreamingApi",className:"text-sm text-gray-700",children:"Enable Universal Streaming API"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"formatTurns",checked:((ys=a==null?void 0:a.transcriber)==null?void 0:ys.formatTurns)||!1,onChange:s=>t("transcriber.formatTurns",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"formatTurns",className:"text-sm text-gray-700",children:"Format Turns"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"disablePartialTranscripts",checked:((ws=a==null?void 0:a.transcriber)==null?void 0:ws.disablePartialTranscripts)||!1,onChange:s=>t("transcriber.disablePartialTranscripts",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"disablePartialTranscripts",className:"text-sm text-gray-700",children:"Disable Partial Transcripts"})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-indigo-600"}),"Word Boost & Keywords"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Boost"}),e.jsx(V,{value:((Is=(Cs=a==null?void 0:a.transcriber)==null?void 0:Cs.wordBoost)==null?void 0:Is.join(`
`))||"",onChange:s=>t("transcriber.wordBoost",s.target.value.split(`
`).filter(l=>l.trim())),className:"mt-1",rows:4,placeholder:"Enter words to boost (one per line)..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Words that should be recognized more accurately. One word per line."})]}),((ks=a==null?void 0:a.transcriber)==null?void 0:ks.wordBoost)&&a.transcriber.wordBoost.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Word Boost"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:a.transcriber.wordBoost.map((s,l)=>e.jsx(O,{variant:"outline",className:"mr-2 mb-2",children:s},l))})]})]})]})]}),e.jsxs(L,{value:"functions",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-orange-600"}),"Model Tools & Functions"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tool IDs"}),e.jsx(V,{value:((Ms=(Ss=a==null?void 0:a.model)==null?void 0:Ss.toolIds)==null?void 0:Ms.join(`
`))||"",onChange:s=>t("model.toolIds",s.target.value.split(`
`).filter(l=>l.trim())),className:"mt-1",rows:3,placeholder:"Enter tool IDs (one per line)..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"IDs of tools that this assistant can use. One ID per line."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Knowledge Base ID"}),e.jsx(x,{value:((Ts=a==null?void 0:a.model)==null?void 0:Ts.knowledgeBaseId)||"",onChange:s=>t("model.knowledgeBaseId",s.target.value),className:"mt-1",placeholder:"Enter knowledge base ID..."})]}),(Ps=a==null?void 0:a.model)!=null&&Ps.tools&&a.model.tools.length>0?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Model Tools"}),e.jsx("div",{className:"space-y-3",children:a.model.tools.map((s,l)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name||`Tool ${l+1}`}),e.jsx(O,{variant:"secondary",children:s.type||"Tool"})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),s.url&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[e.jsx("strong",{children:"URL:"})," ",s.url]}),s.method&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[e.jsx("strong",{children:"Method:"})," ",s.method]}),s.timeoutSeconds&&e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:"Timeout:"})," ",s.timeoutSeconds,"s"]})]},l))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No model tools configured"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Tools are configured separately and referenced by ID"})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-pink-600"}),"Advanced Model Features"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"emotionRecognitionEnabled",checked:((Vs=a==null?void 0:a.model)==null?void 0:Vs.emotionRecognitionEnabled)||!1,onChange:s=>t("model.emotionRecognitionEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"emotionRecognitionEnabled",className:"text-sm text-gray-700",children:"Enable Emotion Recognition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Thinking Mode"}),e.jsxs(j,{value:((Fs=(Es=a==null?void 0:a.model)==null?void 0:Es.thinking)==null?void 0:Fs.type)||"disabled",onValueChange:s=>t("model.thinking.type",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"disabled",children:"Disabled"}),e.jsx(n,{value:"enabled",children:"Enabled"})]})]})]}),((_s=(Os=a==null?void 0:a.model)==null?void 0:Os.thinking)==null?void 0:_s.type)==="enabled"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Thinking Budget Tokens"}),e.jsx(x,{type:"number",min:"0",max:"10000",value:((Rs=(Bs=a==null?void 0:a.model)==null?void 0:Bs.thinking)==null?void 0:Rs.budgetTokens)||1e3,onChange:s=>t("model.thinking.budgetTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-5 w-5 text-green-600"}),"Multilingual Support"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Primary Language"}),e.jsxs(j,{value:(a==null?void 0:a.language)||"en",onValueChange:s=>t("language",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"en",children:"English"}),e.jsx(n,{value:"es",children:"Spanish"}),e.jsx(n,{value:"fr",children:"French"}),e.jsx(n,{value:"de",children:"German"}),e.jsx(n,{value:"it",children:"Italian"}),e.jsx(n,{value:"pt",children:"Portuguese"}),e.jsx(n,{value:"zh",children:"Chinese"}),e.jsx(n,{value:"ja",children:"Japanese"}),e.jsx(n,{value:"ko",children:"Korean"}),e.jsx(n,{value:"ar",children:"Arabic"}),e.jsx(n,{value:"hi",children:"Hindi"}),e.jsx(n,{value:"ru",children:"Russian"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language Detection"}),e.jsxs(j,{value:(a==null?void 0:a.languageDetection)||"auto",onValueChange:s=>t("languageDetection",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"auto",children:"Auto-detect"}),e.jsx(n,{value:"manual",children:"Manual"}),e.jsx(n,{value:"disabled",children:"Disabled"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Supported Languages"}),e.jsx(V,{value:((Us=a==null?void 0:a.supportedLanguages)==null?void 0:Us.join(", "))||"",onChange:s=>t("supportedLanguages",s.target.value.split(",").map(l=>l.trim()).filter(l=>l)),className:"mt-1",rows:2,placeholder:"en, es, fr, de, it..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated list of language codes the assistant can handle"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoTranslate",checked:(a==null?void 0:a.autoTranslate)||!1,onChange:s=>t("autoTranslate",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"autoTranslate",className:"text-sm text-gray-700",children:"Enable automatic translation for unsupported languages"})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-indigo-600"}),"Custom Tools"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Custom Functions"}),e.jsx(V,{value:a!=null&&a.customFunctions?JSON.stringify(a.customFunctions,null,2):"",onChange:s=>{try{const l=JSON.parse(s.target.value);t("customFunctions",l)}catch{}},className:"mt-1 font-mono text-sm",rows:8,placeholder:`[
  {
    "name": "get_weather",
    "description": "Get current weather for a location",
    "parameters": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string",
          "description": "City name"
        }
      },
      "required": ["location"]
    },
    "server": {
      "url": "https://api.weather.com/webhook",
      "secret": "your-webhook-secret"
    }
  }
]`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define custom functions in JSON format for external API integrations"})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-2",children:"Popular Tool Integrations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-indigo-700",children:[e.jsx("div",{children:"â€¢ Google Calendar"}),e.jsx("div",{children:"â€¢ Google Sheets"}),e.jsx("div",{children:"â€¢ Slack"}),e.jsx("div",{children:"â€¢ GoHighLevel"}),e.jsx("div",{children:"â€¢ Zapier"}),e.jsx("div",{children:"â€¢ Make.com"}),e.jsx("div",{children:"â€¢ Custom Webhooks"}),e.jsx("div",{children:"â€¢ Database Queries"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"text-indigo-700 border-indigo-300",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"Tool Documentation"]})})]})]})]})]}),e.jsx(L,{value:"variables",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-purple-600"}),"Dynamic Variables"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:"Available Default Variables"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-purple-700",children:[e.jsxs("div",{children:[e.jsx("code",{children:"{{now}}"})," - Current date and time"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{date}}"})," - Current date"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{time}}"})," - Current time"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{month}}"})," - Current month"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{day}}"})," - Current day"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{year}}"})," - Current year"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{customer.number}}"})," - Customer phone"]}),e.jsxs("div",{children:[e.jsx("code",{children:"{{customer.name}}"})," - Customer name"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Custom Variables"}),e.jsx(V,{value:a!=null&&a.variableValues?JSON.stringify(a.variableValues,null,2):"",onChange:s=>{try{const l=JSON.parse(s.target.value);t("variableValues",l)}catch{}},className:"mt-1 font-mono text-sm",rows:8,placeholder:`{
  "customerName": "John Doe",
  "companyName": "Acme Corp",
  "productName": "Premium Plan",
  "supportEmail": "support@company.com"
}`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Define custom variables in JSON format. Use ","{{variableName}}"," in your prompts."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Variable Usage Examples"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"System Message:"}),' "Hello ',"{{customerName}}",", welcome to ","{{companyName}}",'!"']}),e.jsxs("div",{children:[e.jsx("strong",{children:"First Message:"}),` "Hi there! It's `,"{{time}}"," and I'm here to help with ","{{productName}}",'."']}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date Formatting:"})," ",'{{"now" | date: "%A, %B %d, %Y", "America/New_York"}}']})]})})]})]})]})}),e.jsx(L,{value:"knowledge",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-5 w-5 text-blue-600"}),"Knowledge Base"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Knowledge Base ID"}),e.jsx(x,{value:((qs=a==null?void 0:a.model)==null?void 0:qs.knowledgeBaseId)||"",onChange:s=>t("model.knowledgeBaseId",s.target.value),className:"mt-1",placeholder:"Enter knowledge base ID..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Connect your assistant to a VAPI knowledge base for enhanced responses"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"File IDs"}),e.jsx(V,{value:((Ls=a==null?void 0:a.fileIds)==null?void 0:Ls.join(`
`))||"",onChange:s=>t("fileIds",s.target.value.split(`
`).filter(l=>l.trim())),className:"mt-1",rows:4,placeholder:"Enter file IDs (one per line)..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload files to VAPI dashboard and reference them here"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Query Tool Provider"}),e.jsxs(j,{value:(($s=a==null?void 0:a.queryTool)==null?void 0:$s.provider)||"google",onValueChange:s=>t("queryTool.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"google",children:"Google (Gemini)"}),e.jsx(n,{value:"openai",children:"OpenAI"}),e.jsx(n,{value:"anthropic",children:"Anthropic"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Results"}),e.jsx(x,{type:"number",min:"1",max:"20",value:((zs=a==null?void 0:a.queryTool)==null?void 0:zs.maxResults)||5,onChange:s=>t("queryTool.maxResults",parseInt(s.target.value)),className:"mt-1",placeholder:"5"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Knowledge Base Setup"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("div",{children:"1. Upload files (.txt, .pdf, .docx) to VAPI dashboard"}),e.jsx("div",{children:"2. Copy file IDs and paste them above"}),e.jsx("div",{children:"3. Configure query tool settings"}),e.jsx("div",{children:"4. Test with knowledge-based questions"})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"text-blue-700 border-blue-300",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"VAPI Dashboard"]}),e.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"text-blue-700 border-blue-300",children:[e.jsx(tr,{className:"h-3 w-3 mr-1"}),"Documentation"]})]})]})]})]})}),e.jsxs(L,{value:"workflows",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-5 w-5 text-teal-600"}),"VAPI Workflows"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Workflow ID"}),e.jsx(x,{value:(a==null?void 0:a.workflowId)||"",onChange:s=>t("workflowId",s.target.value),className:"mt-1",placeholder:"Enter VAPI workflow ID..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Connect this assistant to a VAPI workflow for complex conversation flows"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Workflow Trigger"}),e.jsxs(j,{value:(a==null?void 0:a.workflowTrigger)||"manual",onValueChange:s=>t("workflowTrigger",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"manual",children:"Manual"}),e.jsx(n,{value:"auto",children:"Automatic"}),e.jsx(n,{value:"keyword",children:"Keyword-based"}),e.jsx(n,{value:"intent",children:"Intent-based"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Workflow Priority"}),e.jsxs(j,{value:(a==null?void 0:a.workflowPriority)||"normal",onValueChange:s=>t("workflowPriority",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"low",children:"Low"}),e.jsx(n,{value:"normal",children:"Normal"}),e.jsx(n,{value:"high",children:"High"}),e.jsx(n,{value:"critical",children:"Critical"})]})]})]})]}),(a==null?void 0:a.workflowTrigger)==="keyword"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Trigger Keywords"}),e.jsx(V,{value:((Ks=a==null?void 0:a.workflowKeywords)==null?void 0:Ks.join(", "))||"",onChange:s=>t("workflowKeywords",s.target.value.split(",").map(l=>l.trim()).filter(l=>l)),className:"mt-1",rows:2,placeholder:"transfer, escalate, manager, supervisor..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keywords that will trigger the workflow execution"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"workflowEnabled",checked:(a==null?void 0:a.workflowEnabled)||!1,onChange:s=>t("workflowEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"workflowEnabled",className:"text-sm text-gray-700",children:"Enable workflow integration for this assistant"})]}),e.jsxs("div",{className:"p-4 bg-teal-50 rounded-lg border border-teal-200",children:[e.jsx("h4",{className:"text-sm font-medium text-teal-900 mb-2",children:"Workflow Features"}),e.jsxs("div",{className:"text-xs text-teal-700 space-y-1",children:[e.jsx("div",{children:"â€¢ Multi-step conversation flows"}),e.jsx("div",{children:"â€¢ Conditional branching logic"}),e.jsx("div",{children:"â€¢ External API integrations"}),e.jsx("div",{children:"â€¢ Data collection and validation"}),e.jsx("div",{children:"â€¢ Call transfer and escalation"}),e.jsx("div",{children:"â€¢ Custom business logic"})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"text-teal-700 border-teal-300",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"Workflow Builder"]}),e.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"text-teal-700 border-teal-300",children:[e.jsx(tr,{className:"h-3 w-3 mr-1"}),"Documentation"]})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"h-5 w-5 text-orange-600"}),"Squad Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Squad Members"}),e.jsx(V,{value:a!=null&&a.squadMembers?JSON.stringify(a.squadMembers,null,2):"",onChange:s=>{try{const l=JSON.parse(s.target.value);t("squadMembers",l)}catch{}},className:"mt-1 font-mono text-sm",rows:6,placeholder:`[
  {
    "assistantId": "assistant-id-1",
    "name": "Technical Support",
    "transferConditions": ["technical", "bug", "error"]
  },
  {
    "assistantId": "assistant-id-2",
    "name": "Sales Team",
    "transferConditions": ["pricing", "purchase", "upgrade"]
  }
]`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define squad members for call transfers and escalations"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Transfer Timeout"}),e.jsx(x,{type:"number",min:"5",max:"300",value:(a==null?void 0:a.transferTimeout)||30,onChange:s=>t("transferTimeout",parseInt(s.target.value)),className:"mt-1",placeholder:"30"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Seconds to wait for transfer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Transfers"}),e.jsx(x,{type:"number",min:"1",max:"10",value:(a==null?void 0:a.maxTransfers)||3,onChange:s=>t("maxTransfers",parseInt(s.target.value)),className:"mt-1",placeholder:"3"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum transfers per call"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"squadEnabled",checked:(a==null?void 0:a.squadEnabled)||!1,onChange:s=>t("squadEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"squadEnabled",className:"text-sm text-gray-700",children:"Enable squad functionality for this assistant"})]})]})]})]}),e.jsx(L,{value:"analysis",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsx(k,{children:"Analysis & Metrics"})}),e.jsx(S,{children:e.jsx("p",{className:"text-gray-600",children:"Analysis and metrics will be displayed here."})})]})}),e.jsxs(L,{value:"advanced",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-5 w-5 text-indigo-600"}),"Call Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(x,{type:"number",min:"10",max:"43200",value:(a==null?void 0:a.maxDurationSeconds)||600,onChange:s=>t("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(j,{value:(a==null?void 0:a.backgroundSound)||"off",onValueChange:s=>t("backgroundSound",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"off",children:"Off"}),e.jsx(n,{value:"office",children:"Office"}),e.jsx(n,{value:"cafe",children:"Cafe"}),e.jsx(n,{value:"nature",children:"Nature"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"modelOutputInMessagesEnabled",checked:(a==null?void 0:a.modelOutputInMessagesEnabled)||!1,onChange:s=>t("modelOutputInMessagesEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"modelOutputInMessagesEnabled",className:"text-sm text-gray-700",children:"Model Output in Messages"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"backgroundDenoisingEnabled",checked:(a==null?void 0:a.backgroundDenoisingEnabled)||!1,onChange:s=>t("backgroundDenoisingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"backgroundDenoisingEnabled",className:"text-sm text-gray-700",children:"Background Denoising (Deprecated)"})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-purple-600"}),"Speech & Interruption Settings"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Start Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Wait Seconds"}),e.jsx(x,{type:"number",min:"0",max:"5",step:"0.1",value:((Ws=a==null?void 0:a.startSpeakingPlan)==null?void 0:Ws.waitSeconds)||.4,onChange:s=>t("startSpeakingPlan.waitSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("input",{type:"checkbox",id:"smartEndpointingEnabled",checked:((Hs=a==null?void 0:a.startSpeakingPlan)==null?void 0:Hs.smartEndpointingEnabled)||!1,onChange:s=>t("startSpeakingPlan.smartEndpointingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"smartEndpointingEnabled",className:"text-xs text-gray-700",children:"Smart Endpointing"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Stop Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Num Words"}),e.jsx(x,{type:"number",min:"0",max:"10",value:((Js=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Js.numWords)||0,onChange:s=>t("stopSpeakingPlan.numWords",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Voice Seconds"}),e.jsx(x,{type:"number",min:"0",max:"2",step:"0.1",value:((Gs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Gs.voiceSeconds)||.2,onChange:s=>t("stopSpeakingPlan.voiceSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Backoff Seconds"}),e.jsx(x,{type:"number",min:"0",max:"5",step:"0.1",value:((Ys=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Ys.backoffSeconds)||1,onChange:s=>t("stopSpeakingPlan.backoffSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"1"})]})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-blue-600"}),"Message Configuration"]})}),e.jsx(S,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Client Messages"}),e.jsxs(j,{value:(a==null?void 0:a.clientMessages)||"conversation-update",onValueChange:s=>t("clientMessages",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"conversation-update",children:"Conversation Update"}),e.jsx(n,{value:"function-call",children:"Function Call"}),e.jsx(n,{value:"hang",children:"Hang"}),e.jsx(n,{value:"speech-update",children:"Speech Update"}),e.jsx(n,{value:"status-update",children:"Status Update"}),e.jsx(n,{value:"transcript",children:"Transcript"}),e.jsx(n,{value:"tool-calls",children:"Tool Calls"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Server Messages"}),e.jsxs(j,{value:(a==null?void 0:a.serverMessages)||"conversation-update",onValueChange:s=>t("serverMessages",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"conversation-update",children:"Conversation Update"}),e.jsx(n,{value:"end-of-call-report",children:"End of Call Report"}),e.jsx(n,{value:"function-call",children:"Function Call"}),e.jsx(n,{value:"hang",children:"Hang"}),e.jsx(n,{value:"speech-update",children:"Speech Update"}),e.jsx(n,{value:"status-update",children:"Status Update"}),e.jsx(n,{value:"tool-calls",children:"Tool Calls"})]})]})]})]})})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-5 w-5 text-blue-600"}),"Transport Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:((Xs=(Qs=a==null?void 0:a.transportConfigurations)==null?void 0:Qs[0])==null?void 0:Xs.provider)||"twilio",onValueChange:s=>t("transportConfigurations.0.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"twilio",children:"Twilio"}),e.jsx(n,{value:"vonage",children:"Vonage"}),e.jsx(n,{value:"vapi",children:"VAPI"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeout (seconds)"}),e.jsx(x,{type:"number",min:"10",max:"300",value:((As=(Zs=a==null?void 0:a.transportConfigurations)==null?void 0:Zs[0])==null?void 0:As.timeout)||60,onChange:s=>t("transportConfigurations.0.timeout",parseInt(s.target.value)),className:"mt-1",placeholder:"60"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:((ea=(Ds=a==null?void 0:a.transportConfigurations)==null?void 0:Ds[0])==null?void 0:ea.record)||!1,onChange:s=>t("transportConfigurations.0.record",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"recordEnabled",className:"text-sm text-gray-700",children:"Enable Call Recording"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recording Channels"}),e.jsxs(j,{value:((aa=(sa=a==null?void 0:a.transportConfigurations)==null?void 0:sa[0])==null?void 0:aa.recordingChannels)||"mono",onValueChange:s=>t("transportConfigurations.0.recordingChannels",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"mono",children:"Mono"}),e.jsx(n,{value:"dual",children:"Dual"})]})]})]})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-5 w-5 text-purple-600"}),"Observability & Analytics"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(j,{value:((ra=a==null?void 0:a.observabilityPlan)==null?void 0:ra.provider)||"langfuse",onValueChange:s=>t("observabilityPlan.provider",s),children:[e.jsx(v,{className:"mt-1",children:e.jsx(f,{})}),e.jsxs(b,{children:[e.jsx(n,{value:"langfuse",children:"Langfuse"}),e.jsx(n,{value:"langsmith",children:"LangSmith"}),e.jsx(n,{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tags"}),e.jsx(x,{value:((na=(la=a==null?void 0:a.observabilityPlan)==null?void 0:la.tags)==null?void 0:na.join(", "))||"",onChange:s=>t("observabilityPlan.tags",s.target.value.split(",").map(l=>l.trim()).filter(l=>l)),className:"mt-1",placeholder:"production, customer-service, v1.0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Metadata (JSON)"}),e.jsx(V,{value:JSON.stringify(((ia=a==null?void 0:a.observabilityPlan)==null?void 0:ia.metadata)||{},null,2),onChange:s=>{try{const l=JSON.parse(s.target.value);t("observabilityPlan.metadata",l)}catch{}},className:"mt-1 font-mono text-sm",rows:4,placeholder:'{"environment": "production", "version": "1.0"}'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional metadata for observability tracking"})]})]})]})]}),e.jsxs(L,{value:"server",className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ir,{className:"h-5 w-5 text-green-600"}),"Server Configuration"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Server URL"}),e.jsx(x,{value:((ta=a==null?void 0:a.server)==null?void 0:ta.url)||"",onChange:s=>t("server.url",s.target.value),className:"mt-1",placeholder:"https://your-server.com/webhook"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL where VAPI will send webhooks and server messages"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeout (seconds)"}),e.jsx(x,{type:"number",min:"1",max:"300",value:((oa=a==null?void 0:a.server)==null?void 0:oa.timeoutSeconds)||20,onChange:s=>t("server.timeoutSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Headers (JSON)"}),e.jsx(V,{value:JSON.stringify(((ca=a==null?void 0:a.server)==null?void 0:ca.headers)||{},null,2),onChange:s=>{try{const l=JSON.parse(s.target.value);t("server.headers",l)}catch{}},className:"mt-1",rows:4,placeholder:'{"Authorization": "Bearer token", "Content-Type": "application/json"}'})]})]})]}),e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-orange-600"}),"Credentials"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Credential IDs"}),e.jsx(V,{value:((da=a==null?void 0:a.credentialIds)==null?void 0:da.join(`
`))||"",onChange:s=>t("credentialIds",s.target.value.split(`
`).filter(l=>l.trim())),className:"mt-1",rows:3,placeholder:"Enter credential IDs (one per line)..."})]}),(a==null?void 0:a.credentials)&&a.credentials.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Dynamic Credentials"}),e.jsx("div",{className:"space-y-3",children:a.credentials.map((s,l)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name||`Credential ${l+1}`}),e.jsx(O,{variant:"secondary",children:s.provider})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Provider: ",s.provider]})]},l))})]})]})]})]}),e.jsx(L,{value:"debug",className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-red-600"}),"Debug Information"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assistant ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:i==null?void 0:i.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Organization ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:(a==null?void 0:a.orgId)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Created At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Updated At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.updatedAt?new Date(a.updatedAt).toLocaleString():"N/A"})]})]}),(a==null?void 0:a.metadata)&&Object.keys(a.metadata).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Metadata"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a.metadata,null,2)})})]}),(a==null?void 0:a._rawVapiData)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Raw VAPI Response"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a._rawVapiData,null,2)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("label",{className:"text-xs font-medium text-blue-700",children:"Model Values"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(ma=a==null?void 0:a.model)==null?void 0:ma.provider,'" (',typeof((xa=a==null?void 0:a.model)==null?void 0:xa.provider),")"]}),e.jsxs("div",{children:['Model: "',(ha=a==null?void 0:a.model)==null?void 0:ha.model,'" (',typeof((ua=a==null?void 0:a.model)==null?void 0:ua.model),")"]}),e.jsxs("div",{children:["Temperature: ",(ga=a==null?void 0:a.model)==null?void 0:ga.temperature," (",typeof((pa=a==null?void 0:a.model)==null?void 0:pa.temperature),")"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"text-xs font-medium text-green-700",children:"Voice Values"}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(ja=a==null?void 0:a.voice)==null?void 0:ja.provider,'" (',typeof((va=a==null?void 0:a.voice)==null?void 0:va.provider),")"]}),e.jsxs("div",{children:['Voice ID: "',(fa=a==null?void 0:a.voice)==null?void 0:fa.voiceId,'" (',typeof((ba=a==null?void 0:a.voice)==null?void 0:ba.voiceId),")"]}),e.jsxs("div",{children:["Speed: ",(Na=a==null?void 0:a.voice)==null?void 0:Na.speed," (",typeof((ya=a==null?void 0:a.voice)==null?void 0:ya.speed),")"]})]})]})]})]})]})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Se,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Assistant Selected"}),e.jsx("p",{className:"text-gray-500",children:"Select an assistant from the list to view details"})]})})}),e.jsx(ur,{open:ue,onOpenChange:Z,children:e.jsxs(gr,{className:"sm:max-w-[425px]",children:[e.jsx(pr,{children:e.jsxs(jr,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(me,{className:"h-5 w-5"}),"Delete Assistant"]})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(me,{className:"h-8 w-8 text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this assistant?"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:u==null?void 0:u.name})," will be permanently deleted from both VAPI and your database. This action cannot be undone."]}),e.jsxs("div",{className:"mt-2 text-xs text-red-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Agent ID:"})," ",u==null?void 0:u.id]}),(u==null?void 0:u.assistant_id)&&e.jsxs("p",{children:[e.jsx("strong",{children:"VAPI Assistant ID:"})," ",u.assistant_id]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(F,{variant:"outline",onClick:()=>Z(!1),disabled:de.isPending,children:"Cancel"}),e.jsx(F,{variant:"destructive",onClick:Ir,disabled:de.isPending,className:"bg-red-600 hover:bg-red-700",children:de.isPending?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Delete Assistant"]})})]})]})}),T&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:()=>R(!1)}),e.jsxs("div",{className:"ml-auto relative bg-white w-1/2 h-full shadow-2xl border-l border-gray-200 transform transition-transform duration-300 ease-in-out",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{className:"h-10 w-10 bg-gray-100 border border-gray-200",children:e.jsx(we,{className:"text-gray-700 font-medium",children:pe((i==null?void 0:i.name)||"")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i==null?void 0:i.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"AI Voice Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{id:"call-button-container",className:"min-w-[100px] min-h-[40px] bg-red-100 border  rounded flex items-center justify-center"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 h-8 w-8 p-0 rounded-full",children:"Ã—"})]})]})}),e.jsx("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:i&&e.jsx(Jr,{agentId:String(i.id),agentName:i.name||"Unknown Agent",agentConfig:{...a,assistant_id:i.assistant_id||(a==null?void 0:a.assistant_id),firstMessage:(a==null?void 0:a.firstMessage)||`Hello! I'm ${i.name}. How can I help you today?`,systemMessage:((Ia=(Ca=(wa=a==null?void 0:a.model)==null?void 0:wa.messages)==null?void 0:Ca[0])==null?void 0:Ia.content)||`You are ${i.name}, a helpful AI assistant.`},onCallStart:()=>{console.log("ðŸŽ™ï¸ Started call with assistant:",i.name),console.log("ðŸ” Agent data:",i),console.log("ðŸ” Agent details:",a),w.success(`Connected to ${i.name}`)},onCallEnd:()=>{console.log("ðŸŽ™ï¸ Ended call with assistant:",i.name),w.info("Call ended")},onError:s=>{console.error("ðŸŽ™ï¸ Call error:",s),w.error(`Call error: ${s.message}`)}})})]})]})]})};export{xl as default};
//# sourceMappingURL=VapiStyleAgents-xKwfQ36S.js.map
