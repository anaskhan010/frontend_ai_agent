{"version":3,"file":"PhoneNumbers-D2sLtnUn.js","sources":["../../src/components/PhoneNumbers/RetellNumberSearch.tsx","../../src/components/PhoneNumbers/SuperAdminPhoneNumberManagement.tsx","../../src/components/Debug/PhoneNumberDebug.tsx","../../src/pages/PhoneNumbers/PhoneNumbers.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Loader2, Search, ShoppingCart, ShieldCheck, CheckCircle2, AlertTriangle } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { searchAvailablePhoneNumbers, buyPhoneNumber } from \"@/api/services/phoneNumbers/phoneNumberService\";\nimport axiosInstance from \"@/api/axios/axiosInstance\";\n\n// Types\ninterface RetellNumberSearchProps {\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nconst RetellNumberSearch: React.FC<RetellNumberSearchProps> = ({ onSuccess, onCancel }) => {\n  const [searchParams, setSearchParams] = useState({\n    country: \"US\",\n    areaCode: \"\",\n    limit: 10,\n    contains: \"\"\n  });\n  \n  // Twilio Credentials State (User must provide these)\n  const [twilioCreds, setTwilioCreds] = useState({\n    accountSid: \"\",\n    authToken: \"\"\n  });\n  \n  const [activeStep, setActiveStep] = useState<\"creds\" | \"search\" | \"kyc\" | \"success\">(\"creds\");\n  const [selectedNumber, setSelectedNumber] = useState<any>(null);\n  const [kycStatus, setKycStatus] = useState<\"pending\" | \"submitted\" | \"verified\">(\"pending\");\n  const [verificationId, setVerificationId] = useState<string | null>(null);\n\n  const queryClient = useQueryClient();\n\n  // Search Query\n  const { data: availableNumbers, isLoading: searchLoading, refetch: searchNumbers } = useQuery({\n    queryKey: [\"phoneNumbers\", \"available-retell\", searchParams],\n    queryFn: async () => {\n        // Pass credentials in headers as per backend implementation\n        const config = {\n            headers: {\n                'x-twilio-account-sid': twilioCreds.accountSid,\n                'x-twilio-auth-token': twilioCreds.authToken\n            }\n        };\n        // We need to modify the service or call axios directly here since the service might not support custom headers easily without modification\n        // For expediency, I'll call axios directly but respecting the service pattern would be better.\n        // Let's assume we modify the service or for now just use axios to the endpoint\n        const response = await axiosInstance.get('/phone-numbers/search/available', {\n            params: searchParams,\n            headers: {\n                'x-twilio-account-sid': twilioCreds.accountSid,\n                'x-twilio-auth-token': twilioCreds.authToken\n            }\n        });\n        return response.data;\n    },\n    enabled: false,\n  });\n\n  // Buy Mutation\n  const buyMutation = useMutation({\n    mutationFn: async (number: any) => {\n      const response = await axiosInstance.post('/phone-numbers/buy', {\n        phoneNumber: number.phoneNumber,\n        areaCode: searchParams.areaCode, // Fallback\n        provider: 'retell', // Explicitly Retell flow\n        twilioAccountSid: twilioCreds.accountSid,\n        twilioAuthToken: twilioCreds.authToken\n      });\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success(\"Phone number purchased and registered with Retell!\");\n      setActiveStep(\"kyc\");\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || \"Failed to purchase number\");\n    }\n  });\n\n  // KYC Mutation (Mock)\n  const startKycMutation = useMutation({\n    mutationFn: async () => {\n        const response = await axiosInstance.post('/phone-numbers/kyc/start', { type: 'individual' });\n        return response.data;\n    },\n    onSuccess: (data) => {\n        setVerificationId(data.data.verificationId);\n        setKycStatus(\"submitted\");\n        // Poll for status or simulate verification\n        setTimeout(() => {\n            setKycStatus(\"verified\");\n        }, 3000); // Simulate 3s verification\n    }\n  });\n\n  const handleSearch = () => {\n    if (!twilioCreds.accountSid || !twilioCreds.authToken) {\n        toast.error(\"Please provide Twilio credentials\");\n        return;\n    }\n    searchNumbers();\n  };\n\n  const handleBuy = (number: any) => {\n      setSelectedNumber(number);\n      // If we wanted to confirm price etc.\n      if(confirm(`Buy ${number.phoneNumber} for ${number.cost}?`)) {\n          buyMutation.mutate(number);\n      }\n  };\n\n  const handleFinish = () => {\n      queryClient.invalidateQueries({ queryKey: [\"phoneNumbers\"] });\n      onSuccess();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Stepper / Progress */}\n      <div className=\"flex justify-between items-center mb-6\">\n          <div className={`flex flex-col items-center flex-1 ${activeStep === 'creds' ? 'text-[#12a594]' : 'text-white/40'}`}>\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full border-2 border-current mb-2 font-bold\">1</div>\n              <span className=\"text-xs\">Credentials</span>\n          </div>\n          <div className={`h-0.5 w-10 bg-white/20`}></div>\n          <div className={`flex flex-col items-center flex-1 ${activeStep === 'search' ? 'text-[#12a594]' : 'text-white/40'}`}>\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full border-2 border-current mb-2 font-bold\">2</div>\n              <span className=\"text-xs\">Choose Number</span>\n          </div>\n          <div className={`h-0.5 w-10 bg-white/20`}></div>\n           <div className={`flex flex-col items-center flex-1 ${activeStep === 'kyc' ? 'text-[#12a594]' : 'text-white/40'}`}>\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full border-2 border-current mb-2 font-bold\">3</div>\n              <span className=\"text-xs\">Verification</span>\n          </div>\n      </div>\n\n      {/* STEP 1: CREDENTIALS */}\n      {activeStep === 'creds' && (\n          <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium text-white\">Enter Twilio Credentials</h3>\n              <p className=\"text-sm text-white/60\">\n                  Retell requires numbers to be purchased via your Twilio account. Please provide your SID and Token. \n                  These are passed securely to the backend.\n              </p>\n              \n              <div>\n                <Label htmlFor=\"sid\" className=\"text-white\">Account SID</Label>\n                <Input \n                    id=\"sid\" \n                    value={twilioCreds.accountSid} \n                    onChange={(e) => setTwilioCreds(prev => ({...prev, accountSid: e.target.value}))}\n                    placeholder=\"AC...\"\n                    className=\"mt-1 font-mono\"\n                />\n              </div>\n              \n              <div>\n                <Label htmlFor=\"token\" className=\"text-white\">Auth Token</Label>\n                <Input \n                    id=\"token\" \n                    type=\"password\"\n                    value={twilioCreds.authToken} \n                    onChange={(e) => setTwilioCreds(prev => ({...prev, authToken: e.target.value}))}\n                    placeholder=\"Auth Token\"\n                    className=\"mt-1 font-mono\"\n                />\n              </div>\n\n              <div className=\"flex justify-end pt-4\">\n                  <Button \n                    onClick={() => {\n                        if(twilioCreds.accountSid && twilioCreds.authToken) setActiveStep('search');\n                        else toast.error(\"Please fill in both fields\");\n                    }}\n                    className=\"neo-btn\"\n                  >\n                      Next\n                  </Button>\n              </div>\n          </div>\n      )}\n\n      {/* STEP 2: SEARCH */}\n      {activeStep === 'search' && (\n          <div className=\"space-y-4\">\n             <div className=\"grid grid-cols-3 gap-4\">\n                <div>\n                  <Label className=\"text-white\">Country</Label>\n                  <Select\n                    value={searchParams.country}\n                    onValueChange={(value) => setSearchParams(prev => ({ ...prev, country: value }))}\n                  >\n                    <SelectTrigger><SelectValue /></SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"US\">United States</SelectItem>\n                      <SelectItem value=\"CA\">Canada</SelectItem>\n                      <SelectItem value=\"GB\">United Kingdom</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label className=\"text-white\">Area Code</Label>\n                  <Input\n                    value={searchParams.areaCode}\n                    onChange={(e) => setSearchParams(prev => ({ ...prev, areaCode: e.target.value }))}\n                    placeholder=\"e.g. 415\"\n                  />\n                </div>\n                <div className=\"flex items-end\">\n                  <Button onClick={handleSearch} disabled={searchLoading} className=\"w-full neo-btn\">\n                    {searchLoading ? <Loader2 className=\"animate-spin mr-2 h-4 w-4\"/> : <Search className=\"mr-2 h-4 w-4\"/>}\n                    Search\n                  </Button>\n                </div>\n              </div>\n\n              {/* RESULTS */}\n              <div className=\"border border-white/10 rounded-md overflow-hidden max-h-[300px] overflow-y-auto\">\n                  <Table>\n                      <TableHeader className=\"bg-white/5 sticky top-0\">\n                          <TableRow className=\"border-white/10\">\n                             <TableHead className=\"text-white\">Number</TableHead>\n                             <TableHead className=\"text-white\">Region</TableHead>\n                             <TableHead className=\"text-white\">Price</TableHead>\n                             <TableHead className=\"text-white\">Action</TableHead>\n                          </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {availableNumbers?.data?.map((num: any) => (\n                            <TableRow key={num.phoneNumber} className=\"border-white/10\">\n                                <TableCell className=\"text-white font-mono\">{num.phoneNumber}</TableCell>\n                                <TableCell className=\"text-white/70\">{num.locality}, {num.region}</TableCell>\n                                <TableCell className=\"text-white\">{num.cost || \"$1.15\"}</TableCell>\n                                <TableCell>\n                                    <Button \n                                        size=\"sm\" \n                                        className=\"neo-btn h-8\"\n                                        disabled={buyMutation.isPending}\n                                        onClick={() => handleBuy(num)}\n                                    >\n                                        {buyMutation.isPending && selectedNumber?.phoneNumber === num.phoneNumber ? (\n                                            <Loader2 className=\"animate-spin h-3 w-3\"/>\n                                        ) : (\n                                            \"Buy\"\n                                        )}\n                                    </Button>\n                                </TableCell>\n                            </TableRow>\n                        ))}\n                         {!availableNumbers?.data?.length && !searchLoading && (\n                             <TableRow>\n                                 <TableCell colSpan={4} className=\"text-center text-white/40 py-8\">\n                                     No numbers found or click search to start\n                                 </TableCell>\n                             </TableRow>\n                         )}\n                      </TableBody>\n                  </Table>\n              </div>\n          </div>\n      )}\n\n      {/* STEP 3: KYC */}\n      {activeStep === 'kyc' && (\n          <div className=\"space-y-6 text-center py-6\">\n              <div className=\"flex justify-center mb-4\">\n                  {kycStatus === 'pending' && <ShieldCheck className=\"w-16 h-16 text-yellow-500\" />}\n                  {kycStatus === 'submitted' && <Loader2 className=\"w-16 h-16 text-blue-500 animate-spin\" />}\n                  {kycStatus === 'verified' && <CheckCircle2 className=\"w-16 h-16 text-green-500\" />}\n              </div>\n              \n              <h3 className=\"text-xl font-bold text-white\">\n                  {kycStatus === 'verified' ? \"Verification Complete\" : \"Identity Verification Required\"}\n              </h3>\n              \n              <p className=\"text-white/70 max-w-md mx-auto\">\n                  {kycStatus === 'pending' && \"To comply with regulations, Retell requires identity verification before you can use this number for outbound calls.\"}\n                  {kycStatus === 'submitted' && \"Verifying your identity...\"}\n                  {kycStatus === 'verified' && \"Your identity has been verified. The number is now active and ready to use.\"}\n              </p>\n\n              {kycStatus === 'pending' && (\n                  <Button \n                    onClick={() => startKycMutation.mutate()} \n                    disabled={startKycMutation.isPending}\n                    className=\"neo-btn px-8\"\n                  >\n                      Start Verification\n                  </Button>\n              )}\n\n              {kycStatus === 'verified' && (\n                  <Button onClick={handleFinish} className=\"neo-btn bg-green-600 hover:bg-green-700 px-8\">\n                      Finish & Go to Dashboard\n                  </Button>\n              )}\n          </div>\n      )}\n\n    </div>\n  );\n};\n\nexport default RetellNumberSearch;\n","import React, { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Loader2, Phone, UserPlus, UserMinus, Users, Shield } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport axiosInstance from \"@/api/axios/axiosInstance\";\n\nimport {\n  getAllPhoneNumbersForAdmin,\n  getAllVapiPhoneNumbersForAdmin,\n  assignPhoneNumberToUser,\n  unassignPhoneNumber\n} from \"@/api/services/phoneNumbers/phoneNumberService\";\nimport { getAllUsersWithRoles } from \"@/api/services/user/userService\";\nimport type { PhoneNumber } from \"@/api/services/phoneNumbers/phoneNumberService\";\n\ninterface AdminUser {\n  id: number;\n  username?: string;\n  email: string;\n  first_name?: string;\n  last_name?: string;\n  is_active: boolean;\n}\n\nconst SuperAdminPhoneNumberManagement = () => {\n  const [selectedPhoneNumber, setSelectedPhoneNumber] = useState<PhoneNumber | null>(null);\n  const [selectedUserId, setSelectedUserId] = useState<string>(\"\");\n  const [isAssignDialogOpen, setIsAssignDialogOpen] = useState(false);\n\n  const queryClient = useQueryClient();\n\n  // Fetch all VAPI phone numbers with assignment info for admin\n  const { data: phoneNumbersData, isLoading: numbersLoading, error: numbersError } = useQuery({\n    queryKey: [\"admin-vapi-phone-numbers\"],\n    queryFn: () => getAllVapiPhoneNumbersForAdmin(),\n    retry: 1,\n  });\n\n  // Fetch all users for assignment\n  const { data: usersData, isLoading: usersLoading } = useQuery({\n    queryKey: [\"all-users\"],\n    queryFn: () => getAllUsersWithRoles(),\n    retry: 1,\n  });\n\n  // Assignment mutation\n  const assignMutation = useMutation({\n    mutationFn: ({ phoneNumberId, userId, vapiId }: { phoneNumberId: string; userId: string; vapiId?: string }) => {\n      // For VAPI phone numbers, send both the VAPI ID and user ID\n      if (vapiId) {\n        return axiosInstance.post(`/api/phone-numbers/${vapiId}/assign`, {\n          user_id: userId,\n          vapi_id: vapiId\n        });\n      } else {\n        // Traditional assignment for existing local records\n        return assignPhoneNumberToUser(phoneNumberId, userId);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"admin-vapi-phone-numbers\"] });\n      queryClient.invalidateQueries({ queryKey: [\"admin-phone-numbers\"] });\n      toast.success(\"Phone number assigned successfully!\");\n      setIsAssignDialogOpen(false);\n      setSelectedPhoneNumber(null);\n      setSelectedUserId(\"\");\n    },\n    onError: (error: any) => {\n      toast.error(\"Failed to assign phone number: \" + (error.response?.data?.message || error.message));\n    },\n  });\n\n  // Unassignment mutation\n  const unassignMutation = useMutation({\n    mutationFn: (phoneNumberId: string) => unassignPhoneNumber(phoneNumberId),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"admin-vapi-phone-numbers\"] });\n      queryClient.invalidateQueries({ queryKey: [\"admin-phone-numbers\"] });\n      toast.success(\"Phone number unassigned successfully!\");\n    },\n    onError: (error: any) => {\n      toast.error(\"Failed to unassign phone number: \" + (error.response?.data?.message || error.message));\n    },\n  });\n\n  const handleAssignClick = (phoneNumber: PhoneNumber) => {\n    setSelectedPhoneNumber(phoneNumber);\n    setIsAssignDialogOpen(true);\n  };\n\n  const handleAssignSubmit = () => {\n    if (!selectedPhoneNumber || !selectedUserId) {\n      toast.error(\"Please select a user to assign the phone number to.\");\n      return;\n    }\n\n    assignMutation.mutate({\n      phoneNumberId: selectedPhoneNumber.local_id || selectedPhoneNumber.id,\n      userId: selectedUserId,\n      vapiId: selectedPhoneNumber.vapi_id || selectedPhoneNumber.id // Use VAPI ID for assignment\n    });\n  };\n\n  const handleUnassign = (phoneNumber: PhoneNumber) => {\n    if (!phoneNumber.local_id) {\n      toast.error(\"Cannot unassign phone number that is not in local database.\");\n      return;\n    }\n\n    if (window.confirm(`Are you sure you want to unassign phone number ${phoneNumber.number}?`)) {\n      unassignMutation.mutate(phoneNumber.local_id);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">Active</Badge>;\n      case \"inactive\":\n        return <Badge variant=\"secondary\">Inactive</Badge>;\n      case \"pending\":\n        return <Badge variant=\"outline\">Pending</Badge>;\n      default:\n        return <Badge variant=\"secondary\">Unknown</Badge>;\n    }\n  };\n\n  const phoneNumbers = phoneNumbersData?.data || [];\n  const users = usersData?.data || [];\n\n  if (numbersLoading) {\n    return (\n      <Card>\n        <CardContent className=\"flex items-center justify-center h-32\">\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-blue-600\" />\n            <CardTitle>Super Admin - Phone Number Management</CardTitle>\n          </div>\n          <CardDescription>\n            Manage phone number assignments for all users. Shows all VAPI phone numbers including Twilio numbers.\n            Assign any available phone number to specific users to control access.\n          </CardDescription>\n          {phoneNumbersData?.debug_info && (\n            <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                <div>\n                  <span className=\"font-medium text-blue-900\">Total VAPI Numbers:</span>\n                  <div className=\"text-blue-700\">{phoneNumbersData.debug_info.total_vapi_numbers}</div>\n                </div>\n                <div>\n                  <span className=\"font-medium text-green-900\">Assigned:</span>\n                  <div className=\"text-green-700\">{phoneNumbersData.debug_info.assigned_numbers}</div>\n                </div>\n                <div>\n                  <span className=\"font-medium text-orange-900\">Available:</span>\n                  <div className=\"text-orange-700\">{phoneNumbersData.debug_info.unassigned_numbers}</div>\n                </div>\n                <div>\n                  <span className=\"font-medium text-purple-900\">In Local DB:</span>\n                  <div className=\"text-purple-700\">{phoneNumbersData.debug_info.in_local_db}</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </CardHeader>\n        <CardContent>\n          {phoneNumbers.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <Phone className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">No phone numbers found</h3>\n              <p className=\"text-muted-foreground\">\n                No phone numbers are available for assignment.\n              </p>\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Phone Number</TableHead>\n                  <TableHead>Provider</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead>Assigned User</TableHead>\n                  <TableHead>Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {phoneNumbers.map((phoneNumber: PhoneNumber) => (\n                  <TableRow key={phoneNumber.id}>\n                    <TableCell className=\"font-mono\">{phoneNumber.number || \"Unknown\"}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\" className={phoneNumber.provider === 'vapi' ? 'bg-blue-50 text-blue-700' : 'bg-gray-50 text-gray-700'}>\n                        {phoneNumber.provider?.toUpperCase() || 'VAPI'}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex gap-2\">\n                        {phoneNumber.is_assigned ? (\n                          <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">Assigned</Badge>\n                        ) : (\n                          <Badge variant=\"outline\" className=\"text-orange-600\">Available</Badge>\n                        )}\n                        {phoneNumber.is_in_local_db ? (\n                          <Badge variant=\"secondary\" className=\"text-xs\">In DB</Badge>\n                        ) : (\n                          <Badge variant=\"outline\" className=\"text-xs text-blue-600\">VAPI Only</Badge>\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      {phoneNumber.user_name ? (\n                        <div className=\"flex flex-col\">\n                          <span className=\"font-medium\">{phoneNumber.user_name}</span>\n                          <span className=\"text-xs text-muted-foreground\">{phoneNumber.user_email}</span>\n                        </div>\n                      ) : (\n                        <Badge variant=\"outline\" className=\"text-orange-600\">Unassigned</Badge>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex gap-2\">\n                        {phoneNumber.is_assigned ? (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleUnassign(phoneNumber)}\n                            disabled={unassignMutation.isPending || !phoneNumber.is_in_local_db}\n                            title={!phoneNumber.is_in_local_db ? \"Cannot unassign phone number not in local database\" : \"\"}\n                          >\n                            <UserMinus className=\"h-3 w-3 mr-1\" />\n                            Unassign\n                          </Button>\n                        ) : (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleAssignClick(phoneNumber)}\n                            disabled={assignMutation.isPending}\n                          >\n                            <UserPlus className=\"h-3 w-3 mr-1\" />\n                            Assign\n                          </Button>\n                        )}\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Assignment Dialog */}\n      <Dialog open={isAssignDialogOpen} onOpenChange={setIsAssignDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Assign Phone Number</DialogTitle>\n            <DialogDescription>\n              Assign phone number {selectedPhoneNumber?.number} to a user. Only the assigned user will be able to see and use this phone number.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium\">Select User</label>\n              <Select value={selectedUserId} onValueChange={setSelectedUserId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Choose a user to assign the phone number to\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {users.map((user: any) => (\n                    <SelectItem key={user.id} value={user.id.toString()}>\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"h-4 w-4\" />\n                        <div>\n                          <div className=\"font-medium\">{user.first_name || ''} {user.last_name || ''}</div>\n                          <div className=\"text-xs text-muted-foreground\">{user.email}</div>\n                        </div>\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={() => setIsAssignDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button \n                onClick={handleAssignSubmit}\n                disabled={!selectedUserId || assignMutation.isPending}\n              >\n                {assignMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Assigning...\n                  </>\n                ) : (\n                  <>\n                    <UserPlus className=\"h-4 w-4 mr-2\" />\n                    Assign Phone Number\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default SuperAdminPhoneNumberManagement;\n","import React from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Loader2, Bug, Phone, User } from \"lucide-react\";\nimport axiosInstance from \"@/api/axios/axiosInstance\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst PhoneNumberDebug = () => {\n  const { isSuperAdmin } = usePermissions();\n\n  // Debug: Get all assignments\n  const { data: allAssignments, isLoading: assignmentsLoading, refetch: refetchAssignments } = useQuery({\n    queryKey: [\"debug-assignments\"],\n    queryFn: async () => {\n      const response = await axiosInstance.get(\"/api/phone-numbers/debug/assignments\");\n      return response.data;\n    },\n    retry: 1,\n  });\n\n  // Debug: Get user's phone numbers\n  const { data: userNumbers, isLoading: userLoading, refetch: refetchUser } = useQuery({\n    queryKey: [\"debug-user-numbers\"],\n    queryFn: async () => {\n      const response = await axiosInstance.get(\"/api/phone-numbers/debug/user-numbers\");\n      return response.data;\n    },\n    retry: 1,\n  });\n\n  // Regular phone numbers API\n  const { data: regularNumbers, isLoading: regularLoading, refetch: refetchRegular } = useQuery({\n    queryKey: [\"regular-phone-numbers\"],\n    queryFn: async () => {\n      const response = await axiosInstance.get(\"/api/phone-numbers\");\n      return response.data;\n    },\n    retry: 1,\n  });\n\n  const handleRefreshAll = () => {\n    refetchAssignments();\n    refetchUser();\n    refetchRegular();\n  };\n\n  if (assignmentsLoading || userLoading || regularLoading) {\n    return (\n      <Card>\n        <CardContent className=\"flex items-center justify-center h-32\">\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Bug className=\"h-5 w-5 text-orange-600\" />\n              <CardTitle>Phone Number Assignment Debug</CardTitle>\n            </div>\n            <Button onClick={handleRefreshAll} variant=\"outline\" size=\"sm\">\n              Refresh All\n            </Button>\n          </div>\n          <CardDescription>\n            Debug information for phone number assignments. This helps identify why assigned phone numbers might not be showing up for users.\n          </CardDescription>\n        </CardHeader>\n      </Card>\n\n      {/* User Debug Info */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <User className=\"h-4 w-4\" />\n            Current User Debug Info\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {userNumbers && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <strong>User ID:</strong> {userNumbers.debug_info?.user_id}\n                </div>\n                <div>\n                  <strong>Is Super Admin:</strong> {userNumbers.debug_info?.is_super_admin ? \"Yes\" : \"No\"}\n                </div>\n                <div>\n                  <strong>Phone Count:</strong> {userNumbers.debug_info?.phone_count}\n                </div>\n                <div>\n                  <strong>Is Super Admin (Hook):</strong> {isSuperAdmin ? \"Yes\" : \"No\"}\n                </div>\n              </div>\n              \n              <div>\n                <strong>Phone Number IDs:</strong>\n                <div className=\"mt-2\">\n                  {userNumbers.debug_info?.phone_number_ids?.length > 0 ? (\n                    userNumbers.debug_info.phone_number_ids.map((id: string) => (\n                      <Badge key={id} variant=\"outline\" className=\"mr-2 mb-2\">\n                        {id}\n                      </Badge>\n                    ))\n                  ) : (\n                    <Badge variant=\"destructive\">No phone number IDs found</Badge>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <strong>User's Phone Numbers:</strong>\n                {userNumbers.data?.length > 0 ? (\n                  <Table className=\"mt-2\">\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>DB ID</TableHead>\n                        <TableHead>Phone Number ID</TableHead>\n                        <TableHead>Number</TableHead>\n                        <TableHead>User ID</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {userNumbers.data.map((phone: any) => (\n                        <TableRow key={phone.id}>\n                          <TableCell>{phone.id}</TableCell>\n                          <TableCell>{phone.phone_number_id || \"N/A\"}</TableCell>\n                          <TableCell>{phone.number || \"N/A\"}</TableCell>\n                          <TableCell>{phone.user_id}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                ) : (\n                  <Badge variant=\"destructive\" className=\"mt-2\">No phone numbers found for user</Badge>\n                )}\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* All Assignments (Super Admin Only) */}\n      {isSuperAdmin && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Phone className=\"h-4 w-4\" />\n              All Phone Number Assignments\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {allAssignments && (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <strong>Total:</strong> {allAssignments.debug_info?.total_count}\n                  </div>\n                  <div>\n                    <strong>Assigned:</strong> {allAssignments.debug_info?.assigned_count}\n                  </div>\n                  <div>\n                    <strong>Unassigned:</strong> {allAssignments.debug_info?.unassigned_count}\n                  </div>\n                </div>\n\n                {allAssignments.data?.length > 0 ? (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>DB ID</TableHead>\n                        <TableHead>Phone Number ID</TableHead>\n                        <TableHead>Number</TableHead>\n                        <TableHead>Assigned User</TableHead>\n                        <TableHead>User ID</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {allAssignments.data.map((phone: any) => (\n                        <TableRow key={phone.id}>\n                          <TableCell>{phone.id}</TableCell>\n                          <TableCell>{phone.phone_number_id || \"N/A\"}</TableCell>\n                          <TableCell>{phone.number || \"N/A\"}</TableCell>\n                          <TableCell>\n                            {phone.user_name ? (\n                              <div>\n                                <div className=\"font-medium\">{phone.user_name}</div>\n                                <div className=\"text-xs text-muted-foreground\">{phone.user_email}</div>\n                              </div>\n                            ) : (\n                              <Badge variant=\"outline\">Unassigned</Badge>\n                            )}\n                          </TableCell>\n                          <TableCell>{phone.user_id || \"NULL\"}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                ) : (\n                  <Badge variant=\"destructive\">No phone numbers found in database</Badge>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Regular API Response */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Phone className=\"h-4 w-4\" />\n            Regular Phone Numbers API Response\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {regularNumbers && (\n            <div className=\"space-y-4\">\n              <div>\n                <strong>Success:</strong> {regularNumbers.success ? \"Yes\" : \"No\"}\n              </div>\n              <div>\n                <strong>Count:</strong> {regularNumbers.data?.length || 0}\n              </div>\n              \n              {regularNumbers.data?.length > 0 ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>ID</TableHead>\n                      <TableHead>Number</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Created By</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {regularNumbers.data.map((phone: any) => (\n                      <TableRow key={phone.id}>\n                        <TableCell>{phone.id}</TableCell>\n                        <TableCell>{phone.number || \"N/A\"}</TableCell>\n                        <TableCell>{phone.status || \"N/A\"}</TableCell>\n                        <TableCell>{phone.created_by || phone.user_name || \"N/A\"}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <Badge variant=\"destructive\">No phone numbers returned by regular API</Badge>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default PhoneNumberDebug;\n","import React, { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger, DialogClose } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Loader2, Phone, Plus, Search, ShoppingCart, Edit, Trash2, X } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport Page from \"@/components/Page\";\nimport CreatePhoneNumberForm from \"@/components/PhoneNumbers/CreatePhoneNumberForm\";\nimport RetellNumberSearch from \"@/components/PhoneNumbers/RetellNumberSearch\";\nimport SuperAdminPhoneNumberManagement from \"@/components/PhoneNumbers/SuperAdminPhoneNumberManagement\";\nimport PhoneNumberDebug from \"@/components/Debug/PhoneNumberDebug\";\n\nimport {\n  getAllPhoneNumbers,\n  searchAvailablePhoneNumbers,\n  buyPhoneNumber,\n  updatePhoneNumber,\n  deletePhoneNumber\n} from \"@/api/services/phoneNumbers/phoneNumberService\";\nimport { fetchAllAgentsComplete, fetchRetellAgents } from \"@/api/services/agents/agentService\";\nimport usePermissions from \"@/hooks/usePermissions\";\nimport type { PhoneNumber, AvailablePhoneNumber, PhoneNumberSearchParams } from \"@/api/services/phoneNumbers/phoneNumberService\";\n\nconst PhoneNumbers = () => {\n  const [searchParams, setSearchParams] = useState<PhoneNumberSearchParams>({\n    country: \"US\",\n    limit: 10,\n  });\n  const [selectedNumber, setSelectedNumber] = useState<PhoneNumber | null>(null);\n  const [selectedProvider, setSelectedProvider] = useState<\"vapi\" | \"retell\" | null>(null);\n  const [isSearchDialogOpen, setIsSearchDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<\"user\" | \"admin\" | \"debug\">(\"user\");\n  const [editForm, setEditForm] = useState({\n    friendlyName: \"\",\n    assistantId: \"\",\n  });\n\n  const queryClient = useQueryClient();\n  const { isSuperAdmin } = usePermissions();\n\n  // Fetch owned phone numbers\n  const { data: phoneNumbersData, isLoading: numbersLoading, error: numbersError } = useQuery({\n    queryKey: [\"phoneNumbers\"],\n    queryFn: () => getAllPhoneNumbers(),\n    retry: 1,\n  });\n\n  // Handle success/error with useEffect\n  React.useEffect(() => {\n    if (phoneNumbersData) {\n      console.log(\"Phone numbers data received:\", phoneNumbersData);\n      if (phoneNumbersData?.data?.length > 0) {\n        console.log(\"First phone number structure:\", phoneNumbersData.data[0]);\n      }\n    }\n  }, [phoneNumbersData]);\n\n  React.useEffect(() => {\n    if (numbersError) {\n      console.error(\"Phone numbers fetch error:\", numbersError);\n    }\n  }, [numbersError]);\n\n  // Fetch available phone numbers for purchase\n  const { data: availableNumbers, isLoading: searchLoading, refetch: searchNumbers } = useQuery({\n    queryKey: [\"phoneNumbers\", \"available\", searchParams],\n    queryFn: () => searchAvailablePhoneNumbers(searchParams),\n    enabled: false,\n  });\n\n  // Fetch assistants for assignment (Vapi agents)\n  const { data: assistantsData, isLoading: assistantsLoading } = useQuery({\n    queryKey: [\"assistants\"],\n    queryFn: () => fetchAllAgentsComplete(\"\"),\n    retry: 1,\n  });\n\n  // Fetch Retell agents for super admin\n  const { data: retellAgentsData, isLoading: retellAgentsLoading } = useQuery({\n    queryKey: [\"retellAgents\"],\n    queryFn: () => fetchRetellAgents(),\n    enabled: isSuperAdmin,\n    retry: 1,\n  });\n\n  // Buy phone number mutation\n  const buyNumberMutation = useMutation({\n    mutationFn: buyPhoneNumber,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"phoneNumbers\"] });\n      toast.success(\"Phone number purchased successfully\");\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || \"Failed to purchase phone number\");\n    },\n  });\n\n  // Update phone number mutation\n  const updateNumberMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: any }) => updatePhoneNumber(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"phoneNumbers\"] });\n      setIsEditDialogOpen(false);\n      toast.success(\"Phone number updated successfully\");\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || \"Failed to update phone number\");\n    },\n  });\n\n  // Delete phone number mutation\n  const deleteNumberMutation = useMutation({\n    mutationFn: deletePhoneNumber,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"phoneNumbers\"] });\n      toast.success(\"Phone number deleted successfully\");\n    },\n    onError: (error: any) => {\n      toast.error(error.response?.data?.message || \"Failed to delete phone number\");\n    },\n  });\n\n  const handleSearch = () => {\n    searchNumbers();\n  };\n\n  const handleBuyNumber = (number: AvailablePhoneNumber) => {\n    buyNumberMutation.mutate({\n      number: number.number,\n      friendlyName: number.friendlyName,\n    });\n  };\n\n  const handleEditNumber = (phoneNumber: PhoneNumber) => {\n    setSelectedNumber(phoneNumber);\n    setEditForm({\n      friendlyName: phoneNumber.friendlyName || \"\",\n      assistantId: phoneNumber.assistantId || \"unassigned\",\n    });\n    setIsEditDialogOpen(true);\n  };\n\n  const handleUpdateNumber = () => {\n    if (!selectedNumber) return;\n\n    updateNumberMutation.mutate({\n      id: selectedNumber.id,\n      data: {\n        ...editForm,\n        assistantId: editForm.assistantId === \"unassigned\" ? \"\" : editForm.assistantId,\n      },\n    });\n  };\n\n  const handleDeleteNumber = (id: string | undefined) => {\n    console.log(\"handleDeleteNumber called with ID:\", id);\n    if (!id) {\n      toast.error(\"Cannot delete: Phone number ID is missing\");\n      return;\n    }\n    if (confirm(\"Are you sure you want to delete this phone number?\")) {\n      console.log(\"Deleting phone number with ID:\", id);\n      deleteNumberMutation.mutate(id);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\n      active: \"default\",\n      inactive: \"secondary\",\n      pending: \"outline\",\n    };\n    return <Badge variant={variants[status] || \"outline\"}>{status}</Badge>;\n  };\n\n  // Helper function to get the phone number ID from various possible fields\n  const getPhoneNumberId = (phoneNumber: PhoneNumber): string => {\n    const id = phoneNumber.id || phoneNumber.vapi_id || phoneNumber.local_id || \"\";\n    if (!id) {\n      console.error(\"Phone number missing ID:\", phoneNumber);\n      console.error(\"Available keys:\", Object.keys(phoneNumber));\n    }\n    return id;\n  };\n\n  // Combine Vapi and Retell agents for super admin\n  // fetchAllAgentsComplete returns { data: [...], total: number }\n  const vapiAssistants = assistantsData?.data || [];\n  const retellAgents = isSuperAdmin ? (retellAgentsData?.data || []) : [];\n  \n  // Debug logging\n  React.useEffect(() => {\n    console.log('Assistants Data:', assistantsData);\n    console.log('Vapi Assistants:', vapiAssistants);\n    console.log('Retell Agents Data:', retellAgentsData);\n    console.log('Retell Agents:', retellAgents);\n  }, [assistantsData, vapiAssistants, retellAgentsData, retellAgents]);\n  \n  // Combine both types of agents with proper labeling\n  // Normalize Retell agents to have consistent field names\n  const assistants = [\n    ...vapiAssistants.map((agent: any) => ({ ...agent, provider: 'vapi' })),\n    ...retellAgents.map((agent: any) => ({ \n      ...agent, \n      provider: 'retell', \n      id: agent.agent_id || agent.id,\n      name: agent.agent_name || agent.name || 'Unnamed Retell Agent'\n    }))\n  ];\n  \n  console.log('Combined Assistants:', assistants);\n\n  if (numbersError) {\n    return (\n      <div className=\"app-shell-bg min-h-screen p-8\">\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight text-white\">Phone Numbers</h1>\n            <p className=\"text-white/65\">\n              Manage your phone numbers and purchase new ones\n            </p>\n          </div>\n          <div className=\"neo-card p-6\">\n            <div className=\"text-center\">\n              <p className=\"text-white/65 mb-4\">\n                Unable to connect to the backend API. Please ensure the backend server is running.\n              </p>\n              <button className=\"neo-btn\" onClick={() => window.location.reload()}>\n                Retry Connection\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app-shell-bg min-h-screen\">\n      <div className=\"p-8 space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight text-white\">Phone Numbers</h1>\n            <p className=\"text-white/65\">\n              {viewMode === \"admin\" ? \"Manage phone number assignments for all users\" : \"Get free AI CRUITMENT phone numbers.\"}\n            </p>\n          </div>\n          {isSuperAdmin && (\n            <div className=\"flex gap-2 mr-4\">\n              <button\n                className={viewMode === \"user\" ? \"neo-btn\" : \"neo-topbar-btn px-4 py-2 rounded-lg text-white\"}\n                onClick={() => setViewMode(\"user\")}\n              >\n                User View\n              </button>\n              <button\n                className={viewMode === \"admin\" ? \"neo-btn\" : \"neo-topbar-btn px-4 py-2 rounded-lg text-white\"}\n                onClick={() => setViewMode(\"admin\")}\n              >\n                Admin Management\n              </button>\n              <button\n                className={viewMode === \"debug\" ? \"neo-btn\" : \"neo-topbar-btn px-4 py-2 rounded-lg text-white\"}\n                onClick={() => setViewMode(\"debug\")}\n              >\n                Debug\n              </button>\n            </div>\n          )}\n          {viewMode === \"user\" && (\n            <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n              <DialogTrigger asChild>\n                <button className=\"neo-btn flex items-center\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Phone Number\n                </button>\n              </DialogTrigger>\n            <DialogContent className=\"max-w-7xl max-h-[90vh] overflow-y-auto bg-[#0b0f2e] border border-white/10\">\n              <DialogHeader>\n                <DialogTitle className=\"text-white\">Create New Phone Number</DialogTitle>\n                <DialogDescription className=\"text-white/65\">\n                  Select a provider to get started.\n                </DialogDescription>\n              </DialogHeader>\n              \n              {!selectedProvider ? (\n                  <div className=\"grid grid-cols-2 gap-6 p-6\">\n                      {/* VAPI OPTION */}\n                      <button \n                        onClick={() => setSelectedProvider('vapi')} \n                        className=\"neo-card p-6 text-left hover:border-[#12a594] transition-all group\"\n                      >\n                          <div className=\"mb-4 w-12 h-12 rounded-full bg-[#12a594]/20 flex items-center justify-center text-[#12a594] group-hover:scale-110 transition-transform\">\n                              <Phone className=\"w-6 h-6\" />\n                          </div>\n                          <h3 className=\"text-xl font-bold text-white mb-2\">Vapi</h3>\n                          <p className=\"text-white/60 text-sm\">\n                              Get instant free US numbers or import your own. Best for quick setup and testing.\n                          </p>\n                      </button>\n\n                      {/* RETELL OPTION */}\n                      <button \n                        onClick={() => setSelectedProvider('retell')} \n                        className=\"neo-card p-6 text-left hover:border-[#12a594] transition-all group\"\n                      >\n                          <div className=\"mb-4 w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform\">\n                              <Search className=\"w-6 h-6\" />\n                          </div>\n                          <h3 className=\"text-xl font-bold text-white mb-2\">Retell AI</h3>\n                          <p className=\"text-white/60 text-sm\">\n                              Buy premium numbers directly from Twilio and register them with Retell. Includes KYC verification.\n                          </p>\n                      </button>\n                  </div>\n              ) : selectedProvider === 'vapi' ? (\n                  <CreatePhoneNumberForm\n                    onSuccess={() => {\n                        setIsCreateDialogOpen(false);\n                        setSelectedProvider(null);\n                    }}\n                    onCancel={() => {\n                        setSelectedProvider(null); \n                    }}\n                  />\n              ) : (\n                  <RetellNumberSearch \n                    onSuccess={() => {\n                        setIsCreateDialogOpen(false);\n                        setSelectedProvider(null);\n                        queryClient.invalidateQueries({ queryKey: [\"phoneNumbers\"] });\n                    }}\n                    onCancel={() => setSelectedProvider(null)}\n                  />\n              )}\n            </DialogContent>\n          </Dialog>\n          )}\n        </div>\n\n        {/* Conditional Content Based on View Mode */}\n        {viewMode === \"admin\" ? (\n          <SuperAdminPhoneNumberManagement />\n        ) : viewMode === \"debug\" ? (\n          <PhoneNumberDebug />\n        ) : (\n          <>\n        <Dialog open={isSearchDialogOpen} onOpenChange={setIsSearchDialogOpen}>\n          {/* <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Buy Number\n            </Button>\n          </DialogTrigger> */}\n          <DialogContent className=\"max-w-4xl bg-[#0b0f2e] border border-white/10\">\n            <DialogHeader>\n              <DialogTitle className=\"text-white\">Search & Buy Phone Numbers</DialogTitle>\n              <DialogDescription className=\"text-white/65\">\n                Search for available phone numbers to purchase\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div>\n                  <Label htmlFor=\"country\" className=\"text-white\">Country</Label>\n                  <Select\n                    value={searchParams.country}\n                    onValueChange={(value) => setSearchParams(prev => ({ ...prev, country: value }))}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"US\">United States</SelectItem>\n                      <SelectItem value=\"CA\">Canada</SelectItem>\n                      <SelectItem value=\"GB\">United Kingdom</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"areaCode\" className=\"text-white\">Area Code</Label>\n                  <Input\n                    id=\"areaCode\"\n                    value={searchParams.areaCode || \"\"}\n                    onChange={(e) => setSearchParams(prev => ({ ...prev, areaCode: e.target.value }))}\n                    placeholder=\"e.g., 415\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"contains\" className=\"text-white\">Contains</Label>\n                  <Input\n                    id=\"contains\"\n                    value={searchParams.contains || \"\"}\n                    onChange={(e) => setSearchParams(prev => ({ ...prev, contains: e.target.value }))}\n                    placeholder=\"e.g., 1234\"\n                  />\n                </div>\n                <div className=\"flex items-end\">\n                  <button onClick={handleSearch} disabled={searchLoading} className=\"neo-btn w-full flex items-center justify-center\">\n                    {searchLoading ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Search className=\"h-4 w-4 mr-2\" />}\n                    Search\n                  </button>\n                </div>\n              </div>\n\n              {availableNumbers && (\n                <div className=\"neo-card p-4 mt-4\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow className=\"border-white/10\">\n                        <TableHead className=\"text-white\">Number</TableHead>\n                        <TableHead className=\"text-white\">Location</TableHead>\n                        <TableHead className=\"text-white\">Capabilities</TableHead>\n                        <TableHead className=\"text-white\">Price/Month</TableHead>\n                        <TableHead className=\"text-white\">Action</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {availableNumbers.data?.map((number: AvailablePhoneNumber) => (\n                        <TableRow key={number.number} className=\"border-white/10\">\n                          <TableCell className=\"font-mono text-white\">{number.number}</TableCell>\n                          <TableCell className=\"text-white\">\n                            {number.locality && number.region\n                              ? `${number.locality}, ${number.region}`\n                              : number.locality || number.region || \"Unknown Location\"\n                            }\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"flex gap-1\">\n                              {number.capabilities?.voice && <Badge variant=\"outline\">Voice</Badge>}\n                              {number.capabilities?.sms && <Badge variant=\"outline\">SMS</Badge>}\n                              {number.capabilities?.mms && <Badge variant=\"outline\">MMS</Badge>}\n                              {!number.capabilities && <Badge variant=\"outline\">Unknown</Badge>}\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"text-white\">\n                            {number.monthlyPrice !== undefined\n                              ? `$${number.monthlyPrice}`\n                              : \"Contact for pricing\"\n                            }\n                          </TableCell>\n                          <TableCell>\n                            <button\n                              className=\"neo-btn text-sm py-1 px-3 flex items-center\"\n                              onClick={() => handleBuyNumber(number)}\n                              disabled={buyNumberMutation.isPending}\n                            >\n                              {buyNumberMutation.isPending ? (\n                                <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n                              ) : (\n                                <ShoppingCart className=\"h-3 w-3 mr-1\" />\n                              )}\n                              Buy\n                            </button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </div>\n              )}\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {/* Phone Numbers List */}\n      <div className=\"neo-card\">\n        <div className=\"p-6 border-b border-white/10\">\n          <h3 className=\"flex items-center gap-2 text-xl font-semibold text-white\">\n            <Phone className=\"h-5 w-5\" />\n            Your Phone Numbers\n          </h3>\n          <p className=\"text-white/65 mt-1\">\n            Manage your purchased phone numbers and their assignments\n          </p>\n        </div>\n        <div className=\"p-6\">\n          {numbersLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-white\" />\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow className=\"border-white/10\">\n                  <TableHead className=\"text-white\">Number</TableHead>\n                  <TableHead className=\"text-white\">Created By</TableHead>\n                  <TableHead className=\"text-white\">Status</TableHead>\n                  <TableHead className=\"text-white\">Assigned Assistant</TableHead>\n                  <TableHead className=\"text-white\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {phoneNumbersData?.data?.length === 0 ? (\n                  <TableRow className=\"border-white/10\">\n                    <TableCell colSpan={6} className=\"text-center text-white/65\">\n                      No phone numbers found. Purchase your first number to get started.\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  phoneNumbersData?.data?.map((phoneNumber: PhoneNumber) => (\n                    <TableRow key={getPhoneNumberId(phoneNumber)} className=\"border-white/10\">\n                      <TableCell className=\"font-mono text-white\">{phoneNumber.number || \"Unknown\"}</TableCell>\n                      <TableCell>\n                        <div className=\"flex flex-col\">\n                          <span className=\"font-medium text-white\">{phoneNumber.created_by || phoneNumber.user_name || \"Unknown User\"}</span>\n                          {phoneNumber.user_email && (\n                            <span className=\"text-xs text-white/65\">{phoneNumber.user_email}</span>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>{getStatusBadge(phoneNumber.status || \"inactive\")}</TableCell>\n                   \n                      <TableCell>\n                        {phoneNumber.assistantId ? (\n                          <Badge variant=\"secondary\" >Assigned</Badge>\n                        ) : (\n                          <Badge variant=\"outline\" className=\"text-white\">Unassigned</Badge>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex gap-2\">\n                          <button\n                            className=\"neo-topbar-btn px-3 py-1 rounded-lg text-white flex items-center\"\n                            onClick={() => handleEditNumber(phoneNumber)}\n                          >\n                            <Edit className=\"h-3 w-3\" />\n                          </button>\n                          <button\n                            className=\"neo-topbar-btn px-3 py-1 rounded-lg text-white flex items-center\"\n                            onClick={() => handleDeleteNumber(getPhoneNumberId(phoneNumber))}\n                            disabled={deleteNumberMutation.isPending}\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Dialog */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"bg-[#0b0f2e] border border-white/10\">\n          <DialogHeader>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <DialogTitle className=\"text-white\">Edit Phone Number</DialogTitle>\n                <DialogDescription className=\"text-white/65\">\n                  Update the phone number settings\n                </DialogDescription>\n              </div>\n              <DialogClose className=\"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n                <X className=\"h-4 w-4 text-white\" />\n                <span className=\"sr-only\">Close</span>\n              </DialogClose>\n            </div>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"friendlyName\" className=\"text-white\">Friendly Name</Label>\n              <Input\n                id=\"friendlyName\"\n                value={editForm.friendlyName}\n                onChange={(e) => setEditForm(prev => ({ ...prev, friendlyName: e.target.value }))}\n                placeholder=\"Enter a friendly name...\"\n                className=\"text-white\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"assistantId\" className=\"text-white\">Assign to Assistant</Label>\n              {(assistantsLoading || retellAgentsLoading) ? (\n                <div className=\"flex items-center justify-center p-3 text-white/65\">\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Loading assistants...\n                </div>\n              ) : (\n                <Select\n                  value={editForm.assistantId}\n                  onValueChange={(value) => setEditForm(prev => ({ ...prev, assistantId: value }))}\n                >\n                  <SelectTrigger className=\"text-white\">\n                    <SelectValue placeholder=\"Select an assistant\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"bg-[#0b0f2e] border border-white/10\">\n                    <SelectItem value=\"unassigned\" className=\"text-white\">Unassigned</SelectItem>\n                    {assistants.length === 0 ? (\n                      <SelectItem value=\"no-agents\" className=\"text-white/65\" disabled>\n                        No assistants available\n                      </SelectItem>\n                    ) : (\n                      assistants.map((assistant: any) => (\n                        <SelectItem key={assistant.id} value={assistant.id} className=\"text-white\">\n                          {assistant.name} {assistant.provider && `(${assistant.provider === 'vapi' ? 'Vapi' : 'Retell'})`}\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              )}\n            </div>\n            <button\n              onClick={handleUpdateNumber}\n              disabled={updateNumberMutation.isPending}\n              className=\"neo-btn w-full flex items-center justify-center\"\n            >\n              {updateNumberMutation.isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              Update Phone Number\n            </button>\n          </div>\n        </DialogContent>\n      </Dialog>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PhoneNumbers;\n"],"names":["RetellNumberSearch","onSuccess","onCancel","searchParams","setSearchParams","useState","twilioCreds","setTwilioCreds","activeStep","setActiveStep","selectedNumber","setSelectedNumber","kycStatus","setKycStatus","verificationId","setVerificationId","queryClient","useQueryClient","availableNumbers","searchLoading","searchNumbers","useQuery","axiosInstance","buyMutation","useMutation","number","toast","error","_b","_a","startKycMutation","data","handleSearch","handleBuy","handleFinish","jsxs","jsx","Label","Input","e","prev","Button","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Loader2","Search","Table","TableHeader","TableRow","TableHead","TableBody","num","TableCell","ShieldCheck","CheckCircle2","SuperAdminPhoneNumberManagement","selectedPhoneNumber","setSelectedPhoneNumber","selectedUserId","setSelectedUserId","isAssignDialogOpen","setIsAssignDialogOpen","phoneNumbersData","numbersLoading","numbersError","getAllVapiPhoneNumbersForAdmin","usersData","usersLoading","getAllUsersWithRoles","assignMutation","phoneNumberId","userId","vapiId","assignPhoneNumberToUser","unassignMutation","unassignPhoneNumber","handleAssignClick","phoneNumber","handleAssignSubmit","handleUnassign","phoneNumbers","users","Card","CardContent","CardHeader","Shield","CardTitle","CardDescription","Phone","Badge","UserMinus","UserPlus","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","user","Users","Fragment","PhoneNumberDebug","isSuperAdmin","usePermissions","allAssignments","assignmentsLoading","refetchAssignments","userNumbers","userLoading","refetchUser","regularNumbers","regularLoading","refetchRegular","handleRefreshAll","Bug","User","_c","_e","_d","id","_f","phone","_g","_h","_i","_j","_k","_l","PhoneNumbers","selectedProvider","setSelectedProvider","isSearchDialogOpen","setIsSearchDialogOpen","isEditDialogOpen","setIsEditDialogOpen","isCreateDialogOpen","setIsCreateDialogOpen","viewMode","setViewMode","editForm","setEditForm","getAllPhoneNumbers","React","searchAvailablePhoneNumbers","assistantsData","assistantsLoading","fetchAllAgentsComplete","retellAgentsData","retellAgentsLoading","fetchRetellAgents","buyNumberMutation","buyPhoneNumber","updateNumberMutation","updatePhoneNumber","deleteNumberMutation","deletePhoneNumber","handleBuyNumber","handleEditNumber","handleUpdateNumber","handleDeleteNumber","getStatusBadge","status","variants","getPhoneNumberId","vapiAssistants","retellAgents","assistants","agent","DialogTrigger","Plus","CreatePhoneNumberForm","ShoppingCart","Edit","Trash2","DialogClose","X","assistant"],"mappings":"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"}