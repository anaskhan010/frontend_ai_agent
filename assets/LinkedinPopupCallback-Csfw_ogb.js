import{j as e,bA as u,aS as g,bx as p,bz as f}from"./ui-B8VyAbFl.js";import{r as x}from"./vendor-DG599jyl.js";import{d as w}from"./router-BnJytTjr.js";const C=()=>{const[a]=w(),[o,c]=x.useState("loading"),[d,l]=x.useState("Processing LinkedIn authentication...");return x.useEffect(()=>{(async()=>{try{const n=a.get("success"),m=a.get("email"),r=a.get("error");console.log("ðŸ” LinkedinPopupCallback params:",{success:n,email:m,error:r});const h=t=>{let i=!1;if(window.opener&&!window.opener.closed)try{window.opener.postMessage(t,"*"),i=!0}catch(s){console.log("âš ï¸ window.opener.postMessage failed:",s)}try{const s=new BroadcastChannel("linkedin_oauth_channel");s.postMessage(t),s.close(),i=!0}catch(s){console.log("âš ï¸ BroadcastChannel failed:",s)}try{localStorage.setItem("linkedin_oauth_result",JSON.stringify({...t,timestamp:Date.now()})),i=!0}catch(s){console.log("âš ï¸ localStorage failed:",s)}return i};if(n==="true"){c("success"),l("LinkedIn account connected successfully!");const t={type:"LINKEDIN_AUTH_SUCCESS",data:{email:m?decodeURIComponent(m):null,isConnected:!0}};h(t),setTimeout(()=>{window.close()},2e3)}else if(r){c("error"),l(`Authentication failed: ${decodeURIComponent(r)}`);const t={type:"LINKEDIN_AUTH_ERROR",message:decodeURIComponent(r)};h(t),setTimeout(()=>{window.close()},3e3)}else c("error"),l("Invalid callback parameters"),setTimeout(()=>{window.close()},3e3)}catch(n){console.error("Error handling LinkedIn callback:",n),c("error"),l("An unexpected error occurred"),setTimeout(()=>{window.close()},3e3)}})()},[a]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[o==="loading"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(u,{className:"h-8 w-8 text-blue-600"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"h-3 w-3 text-white animate-spin"})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processing Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:d})]})]}),o==="success"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(p,{className:"h-16 w-16 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Successfully Connected!"}),e.jsx("p",{className:"text-sm text-green-700",children:d}),e.jsx("p",{className:"text-xs text-gray-500",children:"This window will close automatically..."})]})]}),o==="error"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(f,{className:"h-16 w-16 text-red-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Connection Failed"}),e.jsx("p",{className:"text-sm text-red-700",children:d}),e.jsx("p",{className:"text-xs text-gray-500",children:"This window will close automatically..."})]})]})]})})};export{C as default};
//# sourceMappingURL=LinkedinPopupCallback-Csfw_ogb.js.map
