import{j as e,bi as sr,M as fe,bk as ar,bl as rr,at as ke,aw as Ka,aU as te,bj as tr,ar as Te,a5 as ne,aQ as nr,bz as lr,ah as ir,D as Pe,N as Ha,K as or,i as cr,bB as dr,bC as mr,T as Ua,B as Ba,O as xr,bD as ur,aR as ye}from"./ui-S570Xcny.js";import{r as y,a as hr}from"./vendor-DG599jyl.js";import{b as Ve,u as gr,c as Ne}from"./query-Cab5P5bd.js";import{b as pr,c as fr,e as jr,u as vr,d as br}from"./agentService-BT8OEtxt.js";import{t as h,u as yr}from"./index-CVuMn1_A.js";import{B as _}from"./button-BSd9MMPp.js";import{I as N}from"./input-jxB46izN.js";import{B as F}from"./badge-ij7fArnn.js";import{C as $,b as z,c as K,a as L}from"./card-DMfGhRm1.js";import{T as Nr,a as wr,b as we,c as ie}from"./tabs-CbOWgAXT.js";import{A as Ce,a as Ie}from"./avatar-Cwu0Oo_-.js";import{_ as oe}from"./vapi-CWmUDqtF.js";import{D as Ee,a as Fe,b as _e,c as Oe}from"./dialog-Cc2g-8Kh.js";import{S as M,a as S,b as k,c as T,d}from"./select-D0_OqHwT.js";import{g as Cr,a as Ir,u as Mr}from"./defaultAssistantTemplateService-C22J8pbB.js";import{M as Ra,g as Me,V as ce,a as Se,T as $a,b as La,c as Aa,d as qa,e as za}from"./vapiProviders-BYqqoEod.js";import{T as G}from"./textarea-Cw4zrZDH.js";import"./router-BavLd_S0.js";import"./index-HDeFwIcs.js";const Sr=({agentId:A,agentName:O="AI Assistant",agentConfig:n,onCallStart:W,onCallEnd:a,onError:U})=>{const B="eb3b26e3-7dbb-4fd6-a545-a954756a43aa",w=y.useRef(null),E=y.useRef(null),[f,V]=y.useState({isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,volumeLevel:0,callDuration:0,status:"idle",callId:void 0}),[Y,ae]=y.useState([]),R=y.useRef(null),re=B!=="your-vapi-public-key-here";console.log("🔍 VAPI Debug Info:"),console.log("- Vapi class available:",typeof oe),console.log("- Public API Key:",`${B.substring(0,8)}...`),console.log("- Is configured:",re),y.useEffect(()=>{console.log("🔧 Initializing VAPI for agent:",A),console.log("🔑 Public API Key:",`${B.substring(0,8)}...`),console.log("✅ Is VAPI Configured:",re);try{console.log("🧪 Testing VAPI import..."),console.log("- Vapi constructor:",oe),console.log("- typeof Vapi:",typeof oe),typeof oe=="function"?console.log("✅ VAPI import successful"):console.error("❌ VAPI import failed - not a constructor")}catch(r){console.error("❌ VAPI import test failed:",r)}try{w.current=new oe(B),console.log("✅ VAPI instance created successfully"),de()}catch(r){console.error("❌ Failed to initialize VAPI:",r),h.error("Failed to initialize VAPI. Please check your API key.")}return()=>{w.current&&w.current.stop(),R.current&&clearInterval(R.current),E.current&&(E.current.getTracks().forEach(r=>r.stop()),E.current=null)}},[B,A]);const de=()=>{w.current&&(w.current.on("call-start",()=>{console.log("🎙️ VAPI call started"),V(r=>({...r,isConnected:!0,isConnecting:!1,status:"connected",callId:Date.now().toString()})),b(),h.success("Call connected! You can now speak."),W==null||W()}),w.current.on("call-end",()=>{console.log("📞 VAPI call ended successfully"),V(r=>({...r,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"ended",callId:void 0})),R.current&&(clearInterval(R.current),R.current=null),E.current&&(E.current.getTracks().forEach(r=>r.stop()),E.current=null),h.success("Call ended successfully"),a==null||a()}),w.current.on("error",r=>{console.error("❌ VAPI call error:",r),V(o=>({...o,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"error",callId:void 0})),R.current&&(clearInterval(R.current),R.current=null),h.error(`Call error: ${r.message||"Unknown error"}`),U==null||U(r)}),w.current.on("speech-start",()=>{console.log("🗣️ Speech started")}),w.current.on("speech-end",()=>{console.log("🤐 Speech ended")}),w.current.on("volume-level",r=>{V(o=>({...o,volumeLevel:r}))}),w.current.on("message",r=>{if(console.log("📨 VAPI message:",r),r.type==="transcript"&&r.transcript){const o={role:r.role||"assistant",content:r.transcript,timestamp:new Date,type:"transcript"};ae(C=>[...C,o])}}),w.current.on("error",r=>{console.error("❌ VAPI error:",r),V(C=>({...C,isConnected:!1,isConnecting:!1,status:"error"}));let o="Unknown error";r.message&&(o=r.message,r.message.includes("assistant")&&r.message.includes("not found")?o="Assistant not found in VAPI. Please ensure the agent is properly synced with VAPI dashboard.":r.message.includes("unauthorized")||r.message.includes("401")?o="Unauthorized access. Please check your VAPI API key configuration.":(r.message.includes("microphone")||r.message.includes("permission"))&&(o="Microphone permission denied. Please allow microphone access and try again.")),h.error(`Call error: ${o}`),U==null||U(r)}))},b=()=>{R.current=setInterval(()=>{V(r=>({...r,callDuration:r.callDuration+1}))},1e3)},Q=r=>{const o=Math.floor(r/60),C=r%60;return`${o}:${C.toString().padStart(2,"0")}`},J=()=>{const r={name:O,firstMessage:(n==null?void 0:n.firstMessage)||`Hello! I'm ${O}. How can I help you today?`,model:{provider:"openai",model:"gpt-4",temperature:.7,messages:[{role:"system",content:(n==null?void 0:n.systemMessage)||`You are ${O}, a helpful AI assistant. Keep responses conversational and under 30 words when possible.`}]},voice:{provider:"vapi",voiceId:(n==null?void 0:n.voiceId)||"Cole"}};return console.log("📋 Assistant config created:",r),r},me=async()=>{if(console.log("🚀 Starting VAPI agent call for:",A),console.log("🔑 VAPI Public Key:",`${B.substring(0,8)}...`),console.log("🤖 Agent Config:",n),!w.current){h.error("VAPI not initialized. Please check your API key configuration.");return}try{V(o=>({...o,isConnecting:!0,status:"connecting",callDuration:0})),ae([]);const r=(n==null?void 0:n.assistant_id)||(n==null?void 0:n.assistantId);if(r){console.log("📞 Using existing assistant ID from database:",r);const o={metadata:{portalAgentId:A,agentName:O,initiatedFrom:"portal"}};console.log("📋 Starting call with assistant ID:",r),console.log("📋 Assistant overrides:",o),await w.current.start(r,o)}else{console.log("🔄 Creating assistant configuration...");const o=J();console.log("📞 Starting agent call with assistant config"),console.log("🤖 Agent Name:",O);const C=o;console.log("📋 Call config:",C),await new Promise(H=>setTimeout(H,100)),await w.current.start(C)}}catch(r){console.error("❌ Error starting agent call:",r),V(C=>({...C,isConnecting:!1,status:"error"}));let o="Failed to start call";r.message?(o=r.message,r.message.includes("Authentication")||r.message.includes("401")?o="Authentication failed. Please check your VAPI API key.":r.message.includes("assistant")||r.message.includes("404")?o="Assistant not found. The assistant may not exist in VAPI.":r.message.includes("permission")||r.message.includes("microphone")?o="Microphone permission denied. Please allow microphone access.":(r.message.includes("network")||r.message.includes("fetch"))&&(o="Network error. Please check your internet connection.")):r.code?o=`Error code: ${r.code}`:typeof r=="string"&&(o=r),h.error(`Failed to start call: ${o}`),console.error("📋 Full error details:",r)}},je=()=>{console.log("🛑 Stopping VAPI agent call...");try{w.current?(console.log("📞 VAPI instance found, stopping call..."),w.current.stop(),V(r=>({...r,isConnecting:!1})),console.log("✅ VAPI stop method called successfully")):(console.warn("⚠️ No VAPI instance found to stop"),h.warning("No active call to end"))}catch(r){console.error("❌ Error stopping call:",r),h.error(`Failed to end call: ${(r==null?void 0:r.message)||"Unknown error"}`),V(o=>({...o,isConnected:!1,isConnecting:!1,isMuted:!1,isOnHold:!1,status:"ended",callId:void 0})),E.current&&(E.current.getTracks().forEach(o=>o.stop()),E.current=null)}},ee=async()=>{try{if(!E.current){const r=await navigator.mediaDevices.getUserMedia({audio:!0});E.current=r}return E.current}catch(r){throw console.error("Error initializing media stream:",r),r}},j=()=>{try{if(!f.isConnected||!w.current){h.warning("No active call to mute");return}const r=!f.isMuted;w.current.setMuted(r),V(o=>({...o,isMuted:r})),h.info(r?"Microphone muted":"Microphone unmuted"),console.log(`🎤 Mute toggled: ${r}`)}catch(r){console.error("Error toggling mute:",r),h.error(`Failed to toggle mute: ${(r==null?void 0:r.message)||"Unknown error"}`),xe()}},xe=async()=>{try{console.log("🔄 Using fallback mute method...");const o=(await ee()).getAudioTracks();if(o.length>0){const C=!f.isMuted;o.forEach(H=>{H.enabled=!C}),V(H=>({...H,isMuted:C})),h.info(C?"Microphone muted (fallback)":"Microphone unmuted (fallback)")}else h.error("No audio tracks found")}catch(r){console.error("Fallback mute also failed:",r),h.error("Failed to toggle mute. Please check microphone permissions.")}},X=async()=>{try{if(!f.isConnected){h.warning("No active call to hold");return}const r=!f.isOnHold;(await ee()).getAudioTracks().forEach(H=>{H.enabled=!r}),V(H=>({...H,isOnHold:r,isMuted:r})),h.info(r?"Call on hold":"Call resumed")}catch(r){console.error("Error toggling hold:",r),h.error("Failed to toggle hold. Please check microphone permissions.")}},ue=()=>{const r=document.getElementById("call-button-container");return console.log("🎯 Looking for call-button-container:",r),r?(console.log("🎯 Rendering call button, call state:",f),hr.createPortal(e.jsxs("div",{className:"flex items-center gap-2",children:[f.isConnected&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-800 bg-white px-3 py-1 rounded-md border border-gray-200",children:Q(f.callDuration)}),e.jsx(_,{onClick:j,variant:"outline",size:"sm",className:`border-gray-300 ${f.isMuted?"bg-red-50 text-red-700 hover:bg-red-100":"bg-white hover:bg-gray-50 text-gray-700"}`,title:f.isMuted?"Unmute microphone":"Mute microphone",children:f.isMuted?e.jsx(sr,{className:"h-4 w-4"}):e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(_,{onClick:X,variant:"outline",size:"sm",className:`border-gray-300 ${f.isOnHold?"bg-yellow-50 text-yellow-700 hover:bg-yellow-100":"bg-white hover:bg-gray-50 text-gray-700"}`,title:f.isOnHold?"Resume call":"Hold call",children:f.isOnHold?e.jsx(ar,{className:"h-4 w-4"}):e.jsx(rr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",className:"border-gray-300 bg-white hover:bg-gray-50 text-gray-700",title:"Volume control",children:e.jsx(ke,{className:"h-4 w-4"})})]}),!f.isConnected&&!f.isConnecting?e.jsxs(_,{onClick:me,size:"sm",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Call"]}):f.isConnecting?e.jsxs(_,{size:"sm",className:"px-4 py-2 bg-amber-500 text-white text-sm font-medium rounded-md",disabled:!0,children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting"]}):e.jsxs(_,{onClick:je,size:"sm",className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(tr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),r)):(console.warn("⚠️ call-button-container not found!"),null)};console.log("🎯 VapiAgentCall render - isVapiConfigured:",re),console.log("🎯 VapiAgentCall render - callState:",f),console.log("🎯 VapiAgentCall render - agentId:",A),console.log("🎯 VapiAgentCall render - agentName:",O);const[l,se]=y.useState(!1);return y.useEffect(()=>{const r=()=>document.getElementById("call-button-container")?(console.log("✅ Found call-button-container"),se(!0),!0):(console.warn("❌ call-button-container not found"),!1);if(r())return;const o=setInterval(()=>{r()&&clearInterval(o)},100);return()=>{clearInterval(o)}},[]),e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[ue(),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Conversation"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:Y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Te,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-center text-sm",children:f.isConnected?"Conversation will appear here...":"Start a call to begin the conversation"})]}):e.jsx("div",{className:"space-y-6",children:Y.map((r,o)=>e.jsxs("div",{className:`flex gap-3 ${r.role==="user"?"justify-end":"justify-start"}`,children:[r.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ne,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:`max-w-[75%] ${r.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 border border-gray-200"} rounded-lg px-4 py-3`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${r.role==="user"?"text-blue-100":"text-gray-500"}`,children:r.role==="user"?"You":O}),e.jsx("span",{className:`text-xs ${r.role==="user"?"text-blue-200":"text-gray-400"}`,children:r.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm leading-relaxed",children:r.content})]}),r.role==="user"&&e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(nr,{className:"h-4 w-4 text-blue-600"})})]},o))})})]}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Assistant"}),e.jsx("p",{className:"font-medium text-gray-900",children:O})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Connection"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f.status==="connected"?"bg-green-500":f.status==="connecting"?"bg-amber-500 animate-pulse":f.status==="error"?"bg-red-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:f.status==="idle"?"Ready":f.status==="connecting"?"Connecting":f.status==="connected"?"Active":f.status==="ended"?"Ended":"Error"})]})]})]})})]})},kr=({open:A,onOpenChange:O,onTemplateSelect:n,onCreateCustom:W})=>{const[a,U]=y.useState(""),[B,w]=y.useState("all"),{data:E,isLoading:f}=Ve({queryKey:["defaultAssistantTemplates",{category:B!=="all"?B:void 0}],queryFn:()=>{const b={is_active:!0};return B!=="all"&&(b.category=B),Cr(b)},enabled:A}),{data:V}=Ve({queryKey:["templateCategories"],queryFn:Ir,enabled:A}),Y=(E==null?void 0:E.data)||[],ae=(V==null?void 0:V.data)||[],R=Y.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())||b.description.toLowerCase().includes(a.toLowerCase())||b.category.toLowerCase().includes(a.toLowerCase())),re=async b=>{try{const Q=await Mr(b.template_id);n(Q.data),O(!1)}catch(Q){console.error("Error using template:",Q)}},de=b=>({Business:"bg-blue-100 text-blue-800",Sales:"bg-green-100 text-green-800",Support:"bg-purple-100 text-purple-800",Scheduling:"bg-orange-100 text-orange-800",General:"bg-gray-100 text-gray-800"})[b]||"bg-gray-100 text-gray-800";return e.jsx(Ee,{open:A,onOpenChange:O,children:e.jsxs(Fe,{className:"max-w-7xl min-h-[700px] overflow-hidden",children:[e.jsx(_e,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),"Choose How to Create Your Assistant"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs($,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 border-blue-200 bg-blue-50",children:[e.jsx(z,{className:"pb-3",children:e.jsxs(K,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(lr,{className:"h-5 w-5"}),"Use Default Template"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"Start with a pre-configured template designed for specific use cases. Perfect for quick setup with proven configurations."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[e.jsx(ir,{className:"h-3 w-3"}),"Recommended for beginners"]})]})]}),e.jsxs($,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 border-gray-200",onClick:()=>{W(),O(!1)},children:[e.jsx(z,{className:"pb-3",children:e.jsxs(K,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(Pe,{className:"h-5 w-5"}),"Create Custom Assistant"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-700 text-sm mb-4",children:"Build your assistant from scratch with full control over all settings. Ideal for specific requirements and advanced users."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(ne,{className:"h-3 w-3"}),"Full customization available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Available Templates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(N,{placeholder:"Search templates...",value:a,onChange:b=>U(b.target.value),className:"pl-10 w-64"})]}),e.jsxs(M,{value:B,onValueChange:w,children:[e.jsxs(S,{className:"w-48",children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),e.jsx(k,{placeholder:"Category"})]}),e.jsxs(T,{children:[e.jsx(d,{value:"all",children:"All Categories"}),ae.map(b=>e.jsxs(d,{value:b.category,children:[b.category," (",b.count,")"]},b.category))]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:f?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((b,Q)=>e.jsxs($,{className:"animate-pulse",children:[e.jsxs(z,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},Q))}):R.length===0?e.jsx($,{children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(ne,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a||B!=="all"?"Try adjusting your search or filter criteria.":"No templates are currently available."}),e.jsx(_,{onClick:()=>{W(),O(!1)},children:"Create Custom Assistant Instead"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(b=>e.jsxs($,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>re(b),children:[e.jsx(z,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(K,{className:"text-base flex items-center gap-2",children:b.name}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx(F,{className:de(b.category),children:b.category})})]}),e.jsx(cr,{className:"h-4 w-4 text-gray-400"})]})}),e.jsxs(L,{className:"pt-0",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:b.description}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:e.jsx(_,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs bg-primary text-white w-full ",children:"Use Template"})})]})]},b.template_id))})})]})]})]})})},Tr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BASE_URL:"https://ai.research-hero.com",VITE_FACEBOOK_REDIRECT_URI:"https://ai.research-hero.com/api/auth/facebook/callback",VITE_FRONTEND_URL:"https://aiagent.research-hero.com",VITE_GMAIL_CLIENT_ID:"686955346191-el9qo3bhbgfo7fk4juanq8bq7g7iis7d.apps.googleusercontent.com",VITE_GMAIL_REDIRECT_URI:"https://ai.research-hero.com/api/gmail/auth/callback",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51S8GFm2MMm3Fy1PB45KAluHAtFTOmAY9qKUE4sITR1TA1zfX97ON36OAcAALplq6LbLgqXaTyY0hRB7ae55LzpBQ00DfkbC8oy",VITE_VAPI_BASE_URL:"https://api.vapi.ai",VITE_VAPI_PUBLIC_KEY:"eb3b26e3-7dbb-4fd6-a545-a954756a43aa"},Qr=()=>{var Le,Ae,qe,ze,Ke,He,We,Ye,Ge,Qe,Je,Xe,Ze,De,es,ss,as,rs,ts,ns,ls,is,os,cs,ds,ms,xs,us,hs,gs,ps,fs,js,vs,bs,ys,Ns,ws,Cs,Is,Ms,Ss,ks,Ts,Ps,Vs,Es,Fs,_s,Os,Us,Bs,Rs,$s,Ls,As,qs,zs,Ks,Hs,Ws,Ys,Gs,Qs,Js,Xs,Zs,Ds,ea,sa,aa,ra,ta,na,la,ia,oa;const[A,O]=y.useState(""),[n,W]=y.useState(null),[a,U]=y.useState(null),[B,w]=y.useState(!1),[E,f]=y.useState(!1),[V,Y]=y.useState(!1),[ae,R]=y.useState(!1),[re,de]=y.useState(!1),[b,Q]=y.useState(null),[J,me]=y.useState(null),[je,ee]=y.useState(!1),[j,xe]=y.useState(null),[X,ue]=y.useState(new Set);console.log("🔍 Environment Debug:"),console.log("- VITE_VAPI_PUBLIC_KEY:",`${"eb3b26e3-7dbb-4fd6-a545-a954756a43aa".substring(0,8)}...`),console.log("- All env vars:",Tr);const[l,se]=y.useState({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"vapi",voiceId:"Cole",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),r=gr(),{user:o}=yr(),{data:C,isLoading:H}=Ve({queryKey:["syncedAgents",o==null?void 0:o.id,A],queryFn:()=>pr(A),staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!(o!=null&&o.id),placeholderData:s=>s,retry:(s,t)=>{var c;return[404,204,402].includes((c=t==null?void 0:t.response)==null?void 0:c.status)?!1:s<2}}),he=Ne({mutationFn:fr,onSuccess:s=>{console.log("✅ Assistant created successfully:",s),h.success(`Assistant "${l.name}" created successfully!`),Y(!1),se({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),r.invalidateQueries({queryKey:["syncedAgents"]}),r.invalidateQueries({queryKey:["agents"]})},onError:s=>{var m,c,u,g,v,p;console.error("❌ Error creating assistant:",s);let t="Failed to create assistant";(c=(m=s.response)==null?void 0:m.data)!=null&&c.message?t=s.response.data.message:(g=(u=s.response)==null?void 0:u.data)!=null&&g.error?t=s.response.data.error:s.message&&(t=s.message),h.error(`Creation failed: ${t}`),console.error("Detailed error:",{status:(v=s.response)==null?void 0:v.status,data:(p=s.response)==null?void 0:p.data,message:s.message})}}),ge=Ne({mutationFn:({id:s,data:t})=>vr(s,t),onSuccess:(s,t)=>{console.log("✅ Assistant updated successfully:",s);const m=Object.keys(t.data)[0];h.success(`${m} updated successfully`),r.invalidateQueries({queryKey:["syncedAgents",o==null?void 0:o.id]}),n&&Re(n.id)},onError:(s,t)=>{var u,g,v,p,I,Z;console.error("❌ Error updating assistant:",s);let m="Failed to update assistant";(g=(u=s.response)==null?void 0:u.data)!=null&&g.message?m=s.response.data.message:(p=(v=s.response)==null?void 0:v.data)!=null&&p.error?m=s.response.data.error:s.message&&(m=s.message);const c=Object.keys(t.data)[0];h.error(`Failed to update ${c}: ${m}`),console.error("Update error details:",{field:c,value:t.data[c],status:(I=s.response)==null?void 0:I.status,data:(Z=s.response)==null?void 0:Z.data,message:s.message})}}),pe=Ne({mutationFn:br,onSuccess:s=>{console.log("✅ Delete success:",s),h.success(`Assistant "${j==null?void 0:j.name}" deleted successfully!`),ee(!1),xe(null),n&&j&&n.id===j.id&&(W(null),U(null)),r.invalidateQueries({queryKey:["syncedAgents",o==null?void 0:o.id]})},onError:s=>{var c,u,g,v,p,I;console.error("❌ Error deleting assistant:",s);let t="Unknown error occurred";(u=(c=s.response)==null?void 0:c.data)!=null&&u.message?t=s.response.data.message:(v=(g=s.response)==null?void 0:g.data)!=null&&v.error?t=s.response.data.error:s.message&&(t=s.message);const m=(j==null?void 0:j.name)||"Assistant";h.error(`Failed to delete ${m}: ${t}`),console.error("Delete error details:",{assistantId:j==null?void 0:j.id,assistantName:j==null?void 0:j.name,status:(p=s.response)==null?void 0:p.status,data:(I=s.response)==null?void 0:I.data,message:s.message})}}),q=(C==null?void 0:C.data)||[],Ue=(o==null?void 0:o.isSuperAdmin)||!1,Be=(C==null?void 0:C.total)||q.length;y.useEffect(()=>{if(q.length>0){console.log("🔍 Agent data structure (first agent):",q[0]),console.log("🔍 Total agents loaded:",q.length),console.log("👑 Pagination disabled (Super Admin):",Ue),console.log("📊 Total assistants available:",Be);const s=new Set;q.forEach((t,m)=>{((t.assistant_data||{}).metadata||{}).published===!0&&s.add(String(t.id)),m<3&&console.log(`🔍 Agent ${m+1}:`,{name:t.name,localId:t.id,assistantId:t.assistant_id,hasAssistantId:!!t.assistant_id,structure:Object.keys(t)})}),ue(s),console.log("📊 Initialized published agents from metadata:",Array.from(s))}},[q]),y.useEffect(()=>{var s,t;q.length>0&&!n&&(console.log("Available agents:",q),console.log("First agent ID:",(s=q[0])==null?void 0:s.id,"Type:",typeof((t=q[0])==null?void 0:t.id)),W(q[0]))},[q,n]),y.useEffect(()=>{if(n&&n.id){const s=n.assistant_id||n.id;console.log("🔍 Loading agent details:",{agentName:n.name,localId:n.id,assistantId:n.assistant_id,usingId:s,idType:n.assistant_id?"VAPI UUID":"Local ID"}),Re(s)}},[n]);const Wa=s=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s),Re=async s=>{var t,m,c,u,g,v,p,I,Z,le,ca,da,ma,xa,ua,ha,ga,pa,fa,ja,va,ba,ya,Na,wa,Ca,Ia,Ma,Sa,ka,Ta,Pa,Va,Ea,Fa,_a,Oa;w(!0);try{const D=String(s);Wa(D)||console.warn("Agent ID is not a valid UUID:",D,"- will try to load details anyway"),console.log("🔍 Fetching complete VAPI details for agent:",D);const be=await jr(D);console.log("📋 Complete VAPI agent details:",be);const i=be.data||be;U({name:i.name||(n==null?void 0:n.name),firstMessage:i.firstMessage||(n==null?void 0:n.firstMessage),firstMessageMode:i.firstMessageMode||"assistant-speaks-first",firstMessageInterruptionsEnabled:i.firstMessageInterruptionsEnabled||!1,model:{provider:((t=i.model)==null?void 0:t.provider)||"openai",model:((m=i.model)==null?void 0:m.model)||"gpt-4",temperature:((c=i.model)==null?void 0:c.temperature)||.7,maxTokens:((u=i.model)==null?void 0:u.maxTokens)||1e3,numFastTurns:((g=i.model)==null?void 0:g.numFastTurns)||0,messages:((v=i.model)==null?void 0:v.messages)||[],tools:((p=i.model)==null?void 0:p.tools)||[],toolIds:((I=i.model)==null?void 0:I.toolIds)||[],knowledgeBase:(Z=i.model)==null?void 0:Z.knowledgeBase,knowledgeBaseId:(le=i.model)==null?void 0:le.knowledgeBaseId,emotionRecognitionEnabled:((ca=i.model)==null?void 0:ca.emotionRecognitionEnabled)||!1,thinking:((da=i.model)==null?void 0:da.thinking)||{type:"disabled"}},voice:{provider:((ma=i.voice)==null?void 0:ma.provider)||"11labs",voiceId:((xa=i.voice)==null?void 0:xa.voiceId)||"21m00Tcm4TlvDq8ikWAM",speed:((ua=i.voice)==null?void 0:ua.speed)||1,stability:(ha=i.voice)==null?void 0:ha.stability,similarityBoost:(ga=i.voice)==null?void 0:ga.similarityBoost,cachingEnabled:((pa=i.voice)==null?void 0:pa.cachingEnabled)||!1,chunkPlan:((fa=i.voice)==null?void 0:fa.chunkPlan)||{enabled:!1},fallbackPlan:(ja=i.voice)==null?void 0:ja.fallbackPlan},transcriber:{provider:((va=i.transcriber)==null?void 0:va.provider)||"deepgram",model:((ba=i.transcriber)==null?void 0:ba.model)||"nova-2",language:((ya=i.transcriber)==null?void 0:ya.language)||"en",confidenceThreshold:((Na=i.transcriber)==null?void 0:Na.confidenceThreshold)||.4,endOfTurnConfidenceThreshold:((wa=i.transcriber)==null?void 0:wa.endOfTurnConfidenceThreshold)||.7,minEndOfTurnSilenceWhenConfident:((Ca=i.transcriber)==null?void 0:Ca.minEndOfTurnSilenceWhenConfident)||160,maxTurnSilence:((Ia=i.transcriber)==null?void 0:Ia.maxTurnSilence)||400,wordFinalizationMaxWaitTime:((Ma=i.transcriber)==null?void 0:Ma.wordFinalizationMaxWaitTime)||160,enableUniversalStreamingApi:((Sa=i.transcriber)==null?void 0:Sa.enableUniversalStreamingApi)||!1,formatTurns:((ka=i.transcriber)==null?void 0:ka.formatTurns)||!1,disablePartialTranscripts:((Ta=i.transcriber)==null?void 0:Ta.disablePartialTranscripts)||!1,keywords:((Pa=i.transcriber)==null?void 0:Pa.keywords)||[],wordBoost:((Va=i.transcriber)==null?void 0:Va.wordBoost)||[]},systemMessage:((_a=(Fa=(Ea=i.model)==null?void 0:Ea.messages)==null?void 0:Fa[0])==null?void 0:_a.content)||i.systemMessage||"You are a helpful AI assistant.",endCallMessage:i.endCallMessage,voicemailMessage:i.voicemailMessage,endCallPhrases:i.endCallPhrases||[],functions:i.functions||[],tools:i.tools||[],customFunctions:i.customFunctions,variableValues:i.variableValues,maxDurationSeconds:i.maxDurationSeconds||600,backgroundSound:i.backgroundSound||"off",modelOutputInMessagesEnabled:i.modelOutputInMessagesEnabled||!1,backgroundDenoisingEnabled:i.backgroundDenoisingEnabled||!1,clientMessages:i.clientMessages,serverMessages:i.serverMessages,transportConfigurations:i.transportConfigurations||[],server:i.server,observabilityPlan:i.observabilityPlan,startSpeakingPlan:i.startSpeakingPlan,stopSpeakingPlan:i.stopSpeakingPlan,credentialIds:i.credentialIds||[],metadata:i.metadata||{},createdAt:i.createdAt,updatedAt:i.updatedAt,_rawVapiData:i})}catch(D){console.error("Error loading agent details:",D),console.error("Error details:",((Oa=D.response)==null?void 0:Oa.data)||D.message),U({model:{provider:"OpenAI",model:"GPT-4"},voice:{provider:"11Labs",voiceId:"Default Voice"},transcriber:{provider:"Deepgram"},systemMessage:"You are a helpful AI assistant."})}finally{w(!1)}},ve=s=>s?s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2):"NA",P=(s,t)=>{if(s.includes(".")){const[m,c]=s.split(".");se(u=>({...u,[m]:{...u[m],[c]:t}}))}else se(m=>({...m,[s]:t}))},Ya=()=>{var t,m,c;const s=[];return(t=l.name)!=null&&t.trim()||s.push("Assistant name is required"),(m=l.firstMessage)!=null&&m.trim()||s.push("First message is required"),(c=l.systemMessage)!=null&&c.trim()||s.push("System message is required"),l.model.provider||s.push("Model provider is required"),l.model.model||s.push("Model selection is required"),(l.model.temperature<0||l.model.temperature>2)&&s.push("Temperature must be between 0 and 2"),(l.model.maxTokens<1||l.model.maxTokens>32e3)&&s.push("Max tokens must be between 1 and 32000"),l.voice.provider||s.push("Voice provider is required"),l.voice.voiceId||s.push("Voice selection is required"),(l.voice.speed<.25||l.voice.speed>4)&&s.push("Voice speed must be between 0.25 and 4"),l.transcriber.provider||s.push("Transcriber provider is required"),l.transcriber.model||s.push("Transcriber model is required"),l.transcriber.language||s.push("Transcriber language is required"),(l.maxDurationSeconds<10||l.maxDurationSeconds>43200)&&s.push("Max duration must be between 10 and 43200 seconds"),s},Ga=()=>{const s=Ya();if(s.length>0){h.error(`Please fix the following errors:
${s.join(`
`)}`);return}if(l.name.length>40){h.error("Assistant name must be 40 characters or less");return}if(l.endCallMessage&&l.endCallMessage.length>1e3){h.error("End call message must be 1000 characters or less");return}if(l.voicemailMessage&&l.voicemailMessage.length>1e3){h.error("Voicemail message must be 1000 characters or less");return}console.log("✅ Form validation passed, creating assistant...");const t={...l,firstMessageMode:l.firstMessageMode,backgroundSound:l.backgroundSound,transcriber:{...l.transcriber,provider:l.transcriber.provider},voice:{...l.voice,provider:l.voice.provider},systemMessage:void 0,model:{...l.model,provider:l.model.provider,messages:[{role:"system",content:l.systemMessage}]}};console.log("🔄 Transformed form data for VAPI:",t),he.mutate(t)},Qa=s=>{var t,m,c,u,g,v,p,I,Z,le;console.log("🎯 Template selected:",s),se({name:s.name||"",firstMessage:s.first_message||"",systemMessage:s.system_message||"You are a helpful AI assistant.",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:s.end_call_message||"",voicemailMessage:"",endCallPhrases:s.end_call_phrases||[],maxDurationSeconds:s.max_duration_seconds||600,backgroundSound:s.background_sound||"off",model:{provider:((t=s.model)==null?void 0:t.provider)||"openai",model:((m=s.model)==null?void 0:m.model)||"gpt-4",temperature:((c=s.model)==null?void 0:c.temperature)||.7,maxTokens:((u=s.model)==null?void 0:u.maxTokens)||1e3,numFastTurns:((g=s.model)==null?void 0:g.numFastTurns)||0},voice:{provider:((v=s.voice)==null?void 0:v.provider)||"vapi",voiceId:((p=s.voice)==null?void 0:p.voiceId)||"Cole",speed:((I=s.voice)==null?void 0:I.speed)||1},transcriber:{provider:((Z=s.transcriber)==null?void 0:Z.provider)||"deepgram",model:"nova-2",language:((le=s.transcriber)==null?void 0:le.language)||"en"}}),Y(!0)},Ja=()=>{se({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"off",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),Y(!0)},$e=(s,t)=>{if(!s)return"";const m=s.toLowerCase().trim();return(t==="model"?{openai:"openai","open-ai":"openai",anthropic:"anthropic",groq:"groq",together:"together",anyscale:"anyscale"}:{"11labs":"11labs",elevenlabs:"11labs","eleven-labs":"11labs",openai:"openai","open-ai":"openai",azure:"azure",playht:"playht","play-ht":"playht",deepgram:"deepgram",cartesia:"cartesia",lmnt:"lmnt"})[m]||m},x=(s,t)=>{if(!n){console.warn("No selected agent for field update");return}console.log("🔄 Field update:",s,"Value:",t,"Type:",typeof t,"Agent ID:",n.id),J&&clearTimeout(J),U(c=>{const u={...c};if(s.includes(".")){const[g,v]=s.split(".");if(u[g]={...u[g],[v]:t},s==="model.provider"){const p=Aa(t);p&&(u.model.model=p,console.log("🤖 Auto-selected model:",p,"for provider:",t))}else if(s==="voice.provider"){const p=qa(t);p&&(u.voice.voiceId=p,console.log("🎤 Auto-selected voice:",p,"for provider:",t))}else if(s==="transcriber.provider"){const p=za(t);p&&(u.transcriber.model=p,console.log("📝 Auto-selected transcriber model:",p,"for provider:",t))}}else u[s]=t;return u});const m=setTimeout(()=>{const c={},u=["status","published","publishedAt","systemMessage"];if(s.includes(".")){const[v,p]=s.split(".");if(u.includes(v)||u.includes(p)){console.log("⚠️ Skipping VAPI update for local-only field:",s);return}if(c[v]={...a[v],[p]:t},s==="model.provider"){const I=Aa(t);I&&(c.model.model=I)}else if(s==="voice.provider"){const I=qa(t);I&&(c.voice.voiceId=I)}else if(s==="transcriber.provider"){const I=za(t);I&&(c.transcriber.model=I)}}else{if(u.includes(s)){console.log("⚠️ Skipping VAPI update for local-only field:",s);return}c[s]=t}console.log("🔄 Auto-saving field:",s,"with value:",t,"updateData:",c);const g=n.assistant_id||n.id;console.log("🔍 Using assistant ID for VAPI:",g,"Type:",typeof g),ge.mutate({id:String(g),data:c})},1e3);me(m)},Xa=s=>{if(!n){console.warn("No selected agent for system message update");return}console.log("🔄 System message update:",s),J&&clearTimeout(J),U(m=>{const c={...m};return c.systemMessage=s,c.model||(c.model={}),c.model.messages||(c.model.messages=[]),c.model.messages.length===0?c.model.messages.push({role:"system",content:s}):c.model.messages[0].role==="system"?c.model.messages[0].content=s:c.model.messages.unshift({role:"system",content:s}),c});const t=setTimeout(()=>{var v;const c=[...((v=a==null?void 0:a.model)==null?void 0:v.messages)||[]];c.length===0?c.push({role:"system",content:s}):c[0].role==="system"?c[0].content=s:c.unshift({role:"system",content:s});const u={model:{...a==null?void 0:a.model,messages:c}};console.log("🔄 Auto-saving system message via model.messages:",u);const g=n.assistant_id||n.id;console.log("🔍 Using assistant ID for system message update:",g),ge.mutate({id:String(g),data:u})},1e3);me(t)};y.useEffect(()=>()=>{J&&clearTimeout(J)},[J]);const Za=s=>{xe(s),ee(!0)},Da=()=>{if(j){const s=j.assistant_id||j.id;console.log("🗑️ Deleting agent:",j.id,j.name,"Using assistant_id:",s),pe.mutate(String(s))}else h.error("No agent selected for deletion")},er=async s=>{var c,u;if(!s||!s.id)return;const t=String(s.id),m=X.has(t);try{console.log(`🔄 ${m?"Unpublishing":"Publishing"} agent:`,s.name);const g={metadata:{...a==null?void 0:a.metadata,published:!m,publishedAt:m?null:new Date().toISOString()}},v=s.assistant_id||s.id;console.log("🔍 Using assistant ID for VAPI publish:",v,"Type:",typeof v),await ge.mutateAsync({id:String(v),data:g});const p=new Set(X);m?(p.delete(t),h.success(`${s.name} unpublished successfully`)):(p.add(t),h.success(`${s.name} published successfully`)),ue(p),n&&n.id===s.id&&U(I=>({...I,metadata:g.metadata}))}catch(g){console.error("❌ Error toggling publish status:",g);let v="Failed to update publish status";(u=(c=g.response)==null?void 0:c.data)!=null&&u.message?v=g.response.data.message:g.message&&(v=g.message),h.error(`Failed to ${m?"unpublish":"publish"} ${s.name}: ${v}`)}};return e.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-white to-gray-50",children:[e.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white/80 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Assistants"}),Ue&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(F,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:[e.jsx(dr,{className:"h-3 w-3 mr-1"}),"Super Admin View"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Showing all ",Be," assistants"]})]})]}),e.jsxs(_,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>R(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Assistant"]}),e.jsx(Ee,{open:V,onOpenChange:Y,children:e.jsxs(Fe,{className:"sm:max-w-[1200px] max-h-[90vh] overflow-y-auto",children:[e.jsx(_e,{children:e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),"Create New Assistant"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name *"}),e.jsx(N,{value:l.name,onChange:s=>P("name",s.target.value),placeholder:"Enter assistant name",className:`mt-1 ${(Le=l.name)!=null&&Le.trim()?"":"border-red-300"}`,maxLength:40}),!((Ae=l.name)!=null&&Ae.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Assistant name is required"}),l.name&&l.name.length>40&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Name must be 40 characters or less"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message *"}),e.jsx(G,{value:l.firstMessage,onChange:s=>P("firstMessage",s.target.value),placeholder:"Hello! How can I help you today?",className:`mt-1 ${(qe=l.firstMessage)!=null&&qe.trim()?"":"border-red-300"}`,rows:3}),!((ze=l.firstMessage)!=null&&ze.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"First message is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message *"}),e.jsx(G,{value:l.systemMessage,onChange:s=>P("systemMessage",s.target.value),placeholder:"You are a helpful AI assistant...",className:`mt-1 ${(Ke=l.systemMessage)!=null&&Ke.trim()?"":"border-red-300"}`,rows:4}),!((He=l.systemMessage)!=null&&He.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"System message is required"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Model Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:l.model.provider,onValueChange:s=>P("model.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:Ra.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(M,{value:l.model.model,onValueChange:s=>P("model.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:Me(l.model.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(N,{type:"number",min:"0",max:"2",step:"0.1",value:l.model.temperature,onChange:s=>P("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(N,{type:"number",min:"1",max:"32000",value:l.model.maxTokens,onChange:s=>P("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(N,{type:"number",min:"0",max:"10",value:l.model.numFastTurns,onChange:s=>P("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Voice Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:l.voice.provider,onValueChange:s=>P("voice.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:ce.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(M,{value:l.voice.voiceId,onValueChange:s=>P("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:Se(l.voice.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(N,{type:"number",min:"0.25",max:"4",step:"0.1",value:l.voice.speed,onChange:s=>P("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Transcriber Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:l.transcriber.provider,onValueChange:s=>P("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:$a.map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(M,{value:l.transcriber.model,onValueChange:s=>P("transcriber.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:La(l.transcriber.provider).map(s=>e.jsx(d,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(M,{value:l.transcriber.language,onValueChange:s=>P("transcriber.language",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"en",children:"English"}),e.jsx(d,{value:"es",children:"Spanish"}),e.jsx(d,{value:"fr",children:"French"}),e.jsx(d,{value:"de",children:"German"}),e.jsx(d,{value:"it",children:"Italian"}),e.jsx(d,{value:"pt",children:"Portuguese"}),e.jsx(d,{value:"ru",children:"Russian"}),e.jsx(d,{value:"ja",children:"Japanese"}),e.jsx(d,{value:"ko",children:"Korean"}),e.jsx(d,{value:"zh",children:"Chinese"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Advanced Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(M,{value:l.firstMessageMode,onValueChange:s=>P("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(d,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(d,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(N,{type:"number",min:"10",max:"43200",value:l.maxDurationSeconds,onChange:s=>P("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(M,{value:l.backgroundSound,onValueChange:s=>P("backgroundSound",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"off",children:"Off"}),e.jsx(d,{value:"office",children:"Office"}),e.jsx(d,{value:"cafe",children:"Cafe"}),e.jsx(d,{value:"nature",children:"Nature"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:l.firstMessageInterruptionsEnabled,onChange:s=>P("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(G,{value:l.endCallMessage,onChange:s=>P("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(G,{value:l.voicemailMessage,onChange:s=>P("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(_,{variant:"outline",onClick:()=>Y(!1),disabled:he.isPending,children:"Cancel"}),e.jsx(_,{onClick:Ga,disabled:he.isPending||!l.name||!l.firstMessage,className:"bg-blue-600 hover:bg-blue-700",children:he.isPending?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Assistant"]})})]})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(N,{placeholder:"Search Assistants",value:A,onChange:s=>O(s.target.value),className:"pl-10 bg-gray-50 border-gray-200"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:H?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(te,{className:"h-6 w-6 animate-spin text-gray-400"})}):e.jsx("div",{className:"p-2",children:q.filter(s=>s&&s.id&&s.name).map(s=>e.jsx("div",{onClick:()=>W(s),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 mb-2 ${(n==null?void 0:n.id)===s.id?"bg-green border border-blue-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ce,{className:"h-10 w-10 bg-gray-600",children:e.jsx(Ie,{className:"text-white bg-green font-medium",children:ve(s.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.name}),X.has(String(s.id))&&e.jsx(F,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs",children:"Published"})]}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:s.assistant_id?`${String(s.assistant_id).substring(0,12)}...`:"No Assistant ID"})]})]})},s.id))})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ce,{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Ie,{className:"text-white bg-green font-medium text-lg",children:ve(n.name)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:n.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx(F,{variant:"secondary",className:"bg-green-100 text-green-700",children:"Active"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",String(n.id).substring(0,12),"..."]}),ge.isPending&&e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(te,{className:"h-3 w-3 mr-1 animate-spin"}),"Auto-saving..."]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(_,{size:"sm",onClick:()=>f(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(mr,{className:"h-4 w-4 mr-2"}),"Talk to Assistant"]}),e.jsx(_,{variant:X.has(String(n.id))?"default":"outline",size:"sm",onClick:()=>er(n),className:X.has(String(n.id))?"bg-green-600 hover:bg-green-700 text-white":"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:X.has(String(n.id))?"Published":"Unpublished"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Za(n),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:e.jsx(Ua,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:B?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(te,{className:"h-8 w-8 animate-spin text-gray-400"})}):e.jsxs(Nr,{defaultValue:"model",className:"w-full",children:[e.jsxs(wr,{className:"grid w-full grid-cols-11 mb-6",children:[e.jsxs(we,{value:"model",className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),"Model"]}),e.jsxs(we,{value:"voice",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Voice"]}),e.jsxs(we,{value:"transcriber",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Transcriber"]})]}),e.jsxs(ie,{value:"model",className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5 text-blue-600"}),"Model Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:$e(((We=a==null?void 0:a.model)==null?void 0:We.provider)||"","model"),onValueChange:s=>x("model.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{placeholder:((Ye=a==null?void 0:a.model)==null?void 0:Ye.provider)||"Select provider"})}),e.jsx(T,{children:Ra.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(F,{variant:"outline",className:"text-xs",children:"API Key"})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(M,{value:((Ge=a==null?void 0:a.model)==null?void 0:Ge.model)||"",onValueChange:s=>x("model.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{placeholder:((Qe=a==null?void 0:a.model)==null?void 0:Qe.model)||"Select model"})}),e.jsxs(T,{children:[Me(((Je=a==null?void 0:a.model)==null?void 0:Je.provider)||"openai").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.supportsTools&&e.jsx(F,{variant:"outline",className:"text-xs",children:"Tools"}),s.supportsVision&&e.jsx(F,{variant:"outline",className:"text-xs",children:"Vision"}),s.costTier&&e.jsx(F,{variant:s.costTier==="low"?"secondary":s.costTier==="medium"?"default":"destructive",className:"text-xs",children:s.costTier})]})]})},s.id)),((Xe=a==null?void 0:a.model)==null?void 0:Xe.model)&&!Me(((Ze=a==null?void 0:a.model)==null?void 0:Ze.provider)||"openai").some(s=>s.id===a.model.model)&&e.jsxs(d,{value:a.model.model,children:[a.model.model," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(N,{type:"number",min:"0",max:"2",step:"0.1",value:((De=a==null?void 0:a.model)==null?void 0:De.temperature)||.7,onChange:s=>x("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(N,{type:"number",min:"1",max:"32000",value:((es=a==null?void 0:a.model)==null?void 0:es.maxTokens)||1e3,onChange:s=>x("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(N,{type:"number",min:"0",max:"10",value:((ss=a==null?void 0:a.model)==null?void 0:ss.numFastTurns)||0,onChange:s=>x("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]})]}),e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-green-600"}),"Messages & Prompts"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message"}),e.jsx(G,{value:(a==null?void 0:a.firstMessage)||(n==null?void 0:n.firstMessage)||"",onChange:s=>x("firstMessage",s.target.value),className:"mt-1",rows:3,placeholder:"Hello! How can I help you today?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(M,{value:(a==null?void 0:a.firstMessageMode)||"assistant-speaks-first",onValueChange:s=>x("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(d,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(d,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:(a==null?void 0:a.firstMessageInterruptionsEnabled)||!1,onChange:s=>x("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message"}),e.jsx(G,{value:((ts=(rs=(as=a==null?void 0:a.model)==null?void 0:as.messages)==null?void 0:rs[0])==null?void 0:ts.content)||(a==null?void 0:a.systemMessage)||"",onChange:s=>Xa(s.target.value),className:"mt-1",rows:6,placeholder:"You are a helpful AI assistant..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(G,{value:(a==null?void 0:a.endCallMessage)||"",onChange:s=>x("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(G,{value:(a==null?void 0:a.voicemailMessage)||"",onChange:s=>x("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Phrases"}),e.jsx(G,{value:((ns=a==null?void 0:a.endCallPhrases)==null?void 0:ns.join(`
`))||"",onChange:s=>x("endCallPhrases",s.target.value.split(`
`).filter(t=>t.trim())),className:"mt-1",rows:3,placeholder:`goodbye
bye
end call
hang up`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Phrases that will trigger the call to end (one per line, case insensitive)"})]})]})]})]}),e.jsx(ie,{value:"voice",className:"space-y-6",children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),"Voice Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:$e(((ls=a==null?void 0:a.voice)==null?void 0:ls.provider)||"","voice"),onValueChange:s=>x("voice.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{placeholder:((is=a==null?void 0:a.voice)==null?void 0:is.provider)||"Select voice provider"})}),e.jsx(T,{children:ce.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(F,{variant:"outline",className:"text-xs",children:"API Key"}),e.jsxs("div",{className:"flex gap-1",children:[s.supportsSpeed&&e.jsx(F,{variant:"secondary",className:"text-xs",children:"Speed"}),s.supportsStability&&e.jsx(F,{variant:"secondary",className:"text-xs",children:"Stability"})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(M,{value:((os=a==null?void 0:a.voice)==null?void 0:os.voiceId)||"",onValueChange:s=>x("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{placeholder:"Select voice..."})}),e.jsxs(T,{children:[Se(((cs=a==null?void 0:a.voice)==null?void 0:cs.provider)||"11labs").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.gender&&e.jsx(F,{variant:"outline",className:"text-xs",children:s.gender}),s.accent&&e.jsx(F,{variant:"secondary",className:"text-xs",children:s.accent})]})]})},s.id)),((ds=a==null?void 0:a.voice)==null?void 0:ds.voiceId)&&!Se(((ms=a==null?void 0:a.voice)==null?void 0:ms.provider)||"11labs").some(s=>s.id===a.voice.voiceId)&&e.jsxs(d,{value:a.voice.voiceId,children:[a.voice.voiceId," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[((xs=ce.find(s=>{var t;return s.id===((t=a==null?void 0:a.voice)==null?void 0:t.provider)}))==null?void 0:xs.supportsSpeed)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(N,{type:"number",min:"0.25",max:"4",step:"0.1",value:((us=a==null?void 0:a.voice)==null?void 0:us.speed)||1,onChange:s=>x("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"0.25x to 4x speed"})]}),((hs=ce.find(s=>{var t;return s.id===((t=a==null?void 0:a.voice)==null?void 0:t.provider)}))==null?void 0:hs.supportsStability)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Stability"}),e.jsx(N,{type:"number",min:"0",max:"1",step:"0.1",value:((gs=a==null?void 0:a.voice)==null?void 0:gs.stability)||.5,onChange:s=>x("voice.stability",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more stable"})]}),((ps=ce.find(s=>{var t;return s.id===((t=a==null?void 0:a.voice)==null?void 0:t.provider)}))==null?void 0:ps.supportsSimilarityBoost)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Similarity Boost"}),e.jsx(N,{type:"number",min:"0",max:"1",step:"0.1",value:((fs=a==null?void 0:a.voice)==null?void 0:fs.similarityBoost)||.5,onChange:s=>x("voice.similarityBoost",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more similar to original"})]})]})]})]})}),e.jsxs(ie,{value:"transcriber",className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-purple-600"}),"Transcriber Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:((js=a==null?void 0:a.transcriber)==null?void 0:js.provider)||"deepgram",onValueChange:s=>x("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:$a.map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(F,{variant:"outline",className:"text-xs",children:"API Key"}),s.supportsLanguages&&e.jsxs(F,{variant:"secondary",className:"text-xs",children:[s.supportsLanguages.length," Languages"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(M,{value:((vs=a==null?void 0:a.transcriber)==null?void 0:vs.language)||"en",onValueChange:s=>x("transcriber.language",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"en",children:"English"}),e.jsx(d,{value:"es",children:"Spanish"}),e.jsx(d,{value:"fr",children:"French"}),e.jsx(d,{value:"de",children:"German"}),e.jsx(d,{value:"it",children:"Italian"}),e.jsx(d,{value:"pt",children:"Portuguese"}),e.jsx(d,{value:"zh",children:"Chinese"}),e.jsx(d,{value:"ja",children:"Japanese"}),e.jsx(d,{value:"ko",children:"Korean"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(M,{value:((bs=a==null?void 0:a.transcriber)==null?void 0:bs.model)||"nova-2",onValueChange:s=>x("transcriber.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsx(T,{children:La(((ys=a==null?void 0:a.transcriber)==null?void 0:ys.provider)||"deepgram").map(s=>e.jsx(d,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.accuracy&&e.jsx(F,{variant:s.accuracy==="premium"?"default":s.accuracy==="enhanced"?"secondary":"outline",className:"text-xs",children:s.accuracy}),s.latency&&e.jsxs(F,{variant:"outline",className:"text-xs",children:[s.latency," latency"]})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Keywords"}),e.jsx(N,{value:((ws=(Ns=a==null?void 0:a.transcriber)==null?void 0:Ns.keywords)==null?void 0:ws.join(", "))||"",onChange:s=>x("transcriber.keywords",s.target.value.split(",").map(t=>t.trim()).filter(t=>t)),className:"mt-1",placeholder:"Enter keywords separated by commas..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confidence Threshold"}),e.jsx(N,{type:"number",min:"0",max:"1",step:"0.1",value:((Cs=a==null?void 0:a.transcriber)==null?void 0:Cs.confidenceThreshold)||.4,onChange:s=>x("transcriber.confidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End of Turn Confidence"}),e.jsx(N,{type:"number",min:"0",max:"1",step:"0.1",value:((Is=a==null?void 0:a.transcriber)==null?void 0:Is.endOfTurnConfidenceThreshold)||.7,onChange:s=>x("transcriber.endOfTurnConfidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Min End Silence (ms)"}),e.jsx(N,{type:"number",min:"0",max:"5000",value:((Ms=a==null?void 0:a.transcriber)==null?void 0:Ms.minEndOfTurnSilenceWhenConfident)||160,onChange:s=>x("transcriber.minEndOfTurnSilenceWhenConfident",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Turn Silence (ms)"}),e.jsx(N,{type:"number",min:"0",max:"10000",value:((Ss=a==null?void 0:a.transcriber)==null?void 0:Ss.maxTurnSilence)||400,onChange:s=>x("transcriber.maxTurnSilence",parseInt(s.target.value)),className:"mt-1",placeholder:"400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Finalization Wait (ms)"}),e.jsx(N,{type:"number",min:"0",max:"5000",value:((ks=a==null?void 0:a.transcriber)==null?void 0:ks.wordFinalizationMaxWaitTime)||160,onChange:s=>x("transcriber.wordFinalizationMaxWaitTime",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enableUniversalStreamingApi",checked:((Ts=a==null?void 0:a.transcriber)==null?void 0:Ts.enableUniversalStreamingApi)||!1,onChange:s=>x("transcriber.enableUniversalStreamingApi",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"enableUniversalStreamingApi",className:"text-sm text-gray-700",children:"Enable Universal Streaming API"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"formatTurns",checked:((Ps=a==null?void 0:a.transcriber)==null?void 0:Ps.formatTurns)||!1,onChange:s=>x("transcriber.formatTurns",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"formatTurns",className:"text-sm text-gray-700",children:"Format Turns"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"disablePartialTranscripts",checked:((Vs=a==null?void 0:a.transcriber)==null?void 0:Vs.disablePartialTranscripts)||!1,onChange:s=>x("transcriber.disablePartialTranscripts",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"disablePartialTranscripts",className:"text-sm text-gray-700",children:"Disable Partial Transcripts"})]})]})]})]}),e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(xr,{className:"h-5 w-5 text-indigo-600"}),"Word Boost & Keywords"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Boost"}),e.jsx(G,{value:((Fs=(Es=a==null?void 0:a.transcriber)==null?void 0:Es.wordBoost)==null?void 0:Fs.join(`
`))||"",onChange:s=>x("transcriber.wordBoost",s.target.value.split(`
`).filter(t=>t.trim())),className:"mt-1",rows:4,placeholder:"Enter words to boost (one per line)..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Words that should be recognized more accurately. One word per line."})]}),((_s=a==null?void 0:a.transcriber)==null?void 0:_s.wordBoost)&&a.transcriber.wordBoost.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Word Boost"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:a.transcriber.wordBoost.map((s,t)=>e.jsx(F,{variant:"outline",className:"mr-2 mb-2",children:s},t))})]})]})]})]}),e.jsxs(ie,{value:"advanced",className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-5 w-5 text-indigo-600"}),"Call Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(N,{type:"number",min:"10",max:"43200",value:(a==null?void 0:a.maxDurationSeconds)||600,onChange:s=>x("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(M,{value:(a==null?void 0:a.backgroundSound)||"off",onValueChange:s=>x("backgroundSound",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"off",children:"Off"}),e.jsx(d,{value:"office",children:"Office"}),e.jsx(d,{value:"cafe",children:"Cafe"}),e.jsx(d,{value:"nature",children:"Nature"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"modelOutputInMessagesEnabled",checked:(a==null?void 0:a.modelOutputInMessagesEnabled)||!1,onChange:s=>x("modelOutputInMessagesEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"modelOutputInMessagesEnabled",className:"text-sm text-gray-700",children:"Model Output in Messages"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"backgroundDenoisingEnabled",checked:(a==null?void 0:a.backgroundDenoisingEnabled)||!1,onChange:s=>x("backgroundDenoisingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"backgroundDenoisingEnabled",className:"text-sm text-gray-700",children:"Background Denoising (Deprecated)"})]})]})]})]}),e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-purple-600"}),"Speech & Interruption Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Start Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Wait Seconds"}),e.jsx(N,{type:"number",min:"0",max:"5",step:"0.1",value:((Os=a==null?void 0:a.startSpeakingPlan)==null?void 0:Os.waitSeconds)||.4,onChange:s=>x("startSpeakingPlan.waitSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("input",{type:"checkbox",id:"smartEndpointingEnabled",checked:((Us=a==null?void 0:a.startSpeakingPlan)==null?void 0:Us.smartEndpointingEnabled)||!1,onChange:s=>x("startSpeakingPlan.smartEndpointingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"smartEndpointingEnabled",className:"text-xs text-gray-700",children:"Smart Endpointing"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Stop Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Num Words"}),e.jsx(N,{type:"number",min:"0",max:"10",value:((Bs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Bs.numWords)||0,onChange:s=>x("stopSpeakingPlan.numWords",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Voice Seconds"}),e.jsx(N,{type:"number",min:"0",max:"2",step:"0.1",value:((Rs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Rs.voiceSeconds)||.2,onChange:s=>x("stopSpeakingPlan.voiceSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Backoff Seconds"}),e.jsx(N,{type:"number",min:"0",max:"5",step:"0.1",value:(($s=a==null?void 0:a.stopSpeakingPlan)==null?void 0:$s.backoffSeconds)||1,onChange:s=>x("stopSpeakingPlan.backoffSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"1"})]})]})]})]})]}),e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"h-5 w-5 text-blue-600"}),"Transport Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(M,{value:((As=(Ls=a==null?void 0:a.transportConfigurations)==null?void 0:Ls[0])==null?void 0:As.provider)||"twilio",onValueChange:s=>x("transportConfigurations.0.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"twilio",children:"Twilio"}),e.jsx(d,{value:"vonage",children:"Vonage"}),e.jsx(d,{value:"vapi",children:"VAPI"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeout (seconds)"}),e.jsx(N,{type:"number",min:"10",max:"300",value:((zs=(qs=a==null?void 0:a.transportConfigurations)==null?void 0:qs[0])==null?void 0:zs.timeout)||60,onChange:s=>x("transportConfigurations.0.timeout",parseInt(s.target.value)),className:"mt-1",placeholder:"60"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:((Hs=(Ks=a==null?void 0:a.transportConfigurations)==null?void 0:Ks[0])==null?void 0:Hs.record)||!1,onChange:s=>x("transportConfigurations.0.record",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"recordEnabled",className:"text-sm text-gray-700",children:"Enable Call Recording"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recording Channels"}),e.jsxs(M,{value:((Ys=(Ws=a==null?void 0:a.transportConfigurations)==null?void 0:Ws[0])==null?void 0:Ys.recordingChannels)||"mono",onValueChange:s=>x("transportConfigurations.0.recordingChannels",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(k,{})}),e.jsxs(T,{children:[e.jsx(d,{value:"mono",children:"Mono"}),e.jsx(d,{value:"dual",children:"Dual"})]})]})]})]})]})]})]}),e.jsx(ie,{value:"debug",className:"space-y-6",children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-red-600"}),"Debug Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assistant ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:n==null?void 0:n.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Organization ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:(a==null?void 0:a.orgId)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Created At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Updated At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.updatedAt?new Date(a.updatedAt).toLocaleString():"N/A"})]})]}),(a==null?void 0:a.metadata)&&Object.keys(a.metadata).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Metadata"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a.metadata,null,2)})})]}),(a==null?void 0:a._rawVapiData)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Raw VAPI Response"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a._rawVapiData,null,2)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("label",{className:"text-xs font-medium text-blue-700",children:"Model Values"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(Gs=a==null?void 0:a.model)==null?void 0:Gs.provider,'" (',typeof((Qs=a==null?void 0:a.model)==null?void 0:Qs.provider),")"]}),e.jsxs("div",{children:['Model: "',(Js=a==null?void 0:a.model)==null?void 0:Js.model,'" (',typeof((Xs=a==null?void 0:a.model)==null?void 0:Xs.model),")"]}),e.jsxs("div",{children:["Temperature: ",(Zs=a==null?void 0:a.model)==null?void 0:Zs.temperature," (",typeof((Ds=a==null?void 0:a.model)==null?void 0:Ds.temperature),")"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"text-xs font-medium text-green-700",children:"Voice Values"}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(ea=a==null?void 0:a.voice)==null?void 0:ea.provider,'" (',typeof((sa=a==null?void 0:a.voice)==null?void 0:sa.provider),")"]}),e.jsxs("div",{children:['Voice ID: "',(aa=a==null?void 0:a.voice)==null?void 0:aa.voiceId,'" (',typeof((ra=a==null?void 0:a.voice)==null?void 0:ra.voiceId),")"]}),e.jsxs("div",{children:["Speed: ",(ta=a==null?void 0:a.voice)==null?void 0:ta.speed," (",typeof((na=a==null?void 0:a.voice)==null?void 0:na.speed),")"]})]})]})]})]})]})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ne,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Assistant Selected"}),e.jsx("p",{className:"text-gray-500",children:"Select an assistant from the list to view details"})]})})}),e.jsx(Ee,{open:je,onOpenChange:ee,children:e.jsxs(Fe,{className:"sm:max-w-[425px]",children:[e.jsx(_e,{children:e.jsxs(Oe,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ye,{className:"h-5 w-5"}),"Delete Assistant"]})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ye,{className:"h-8 w-8 text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this assistant?"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:j==null?void 0:j.name})," will be permanently deleted from both VAPI and your database. This action cannot be undone."]}),e.jsxs("div",{className:"mt-2 text-xs text-red-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Agent ID:"})," ",j==null?void 0:j.id]}),(j==null?void 0:j.assistant_id)&&e.jsxs("p",{children:[e.jsx("strong",{children:"VAPI Assistant ID:"})," ",j.assistant_id]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(_,{variant:"outline",onClick:()=>ee(!1),disabled:pe.isPending,children:"Cancel"}),e.jsx(_,{variant:"destructive",onClick:Da,disabled:pe.isPending,className:"bg-red-600 hover:bg-red-700",children:pe.isPending?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Delete Assistant"]})})]})]})}),E&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:()=>f(!1)}),e.jsxs("div",{className:"ml-auto relative bg-white w-1/2 h-full shadow-2xl border-l border-gray-200 transform transition-transform duration-300 ease-in-out",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ce,{className:"h-10 w-10 bg-gray-100 border border-gray-200",children:e.jsx(Ie,{className:"text-gray-700 font-medium",children:ve((n==null?void 0:n.name)||"")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n==null?void 0:n.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"AI Voice Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{id:"call-button-container",className:"min-w-[100px] min-h-[40px] bg-red-100 border  rounded flex items-center justify-center"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 h-8 w-8 p-0 rounded-full",children:"×"})]})]})}),e.jsx("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:n&&e.jsx(Sr,{agentId:String(n.id),agentName:n.name||"Unknown Agent",agentConfig:{...a,assistant_id:n.assistant_id||(a==null?void 0:a.assistant_id),firstMessage:(a==null?void 0:a.firstMessage)||`Hello! I'm ${n.name}. How can I help you today?`,systemMessage:((oa=(ia=(la=a==null?void 0:a.model)==null?void 0:la.messages)==null?void 0:ia[0])==null?void 0:oa.content)||`You are ${n.name}, a helpful AI assistant.`},onCallStart:()=>{console.log("🎙️ Started call with assistant:",n.name),console.log("🔍 Agent data:",n),console.log("🔍 Agent details:",a),h.success(`Connected to ${n.name}`)},onCallEnd:()=>{console.log("🎙️ Ended call with assistant:",n.name),h.info("Call ended")},onError:s=>{console.error("🎙️ Call error:",s),h.error(`Call error: ${s.message}`)}})})]})]}),e.jsx(kr,{open:ae,onOpenChange:R,onTemplateSelect:Qa,onCreateCustom:Ja})]})};export{Qr as default};
//# sourceMappingURL=VapiStyleAgents-ePNSf6Oq.js.map
