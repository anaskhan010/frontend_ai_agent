import{j as e,a4 as w,D as M,bA as I,bD as K,bl as Q,b3 as H,av as U,b$ as V,X as W,aZ as X,aa as Z,a3 as G,c0 as J,a$ as O}from"./ui-Bcnk-Zux.js";import{r as b}from"./vendor-D6QveUxv.js";import{u as Y,b as j,c}from"./query-CO-DO_55.js";import{t as C,B as n,C as d,l,n as o,k as m,T as _,v as S}from"./index-CBGUjL3x.js";import{S as ee}from"./separator-BptsIzPC.js";import{b as se,c as ae,e as te,u as re,d as ne,a as ie,s as ce,A as de}from"./recordingService-BoQ0z8MI.js";import{P as p}from"./Page-nWNwBMZO.js";import{a as le,u as oe}from"./router-jXXg-8rg.js";import"./slider-69ejy2xl.js";import"./scroll-area-D4vCxucE.js";import"./index-Dd6xZiaQ.js";const be=()=>{const{id:a}=le(),x=oe(),R=Y(),[f,u]=b.useState(!1),[g,h]=b.useState(""),{data:s,isLoading:T,error:D}=j({queryKey:["recording",a],queryFn:()=>se(a),enabled:!!a}),{data:i,isLoading:me}=j({queryKey:["recording-analytics",a],queryFn:()=>ae(a),enabled:!!a}),{data:t,isLoading:k}=j({queryKey:["recording-transcript",a],queryFn:()=>te(a),enabled:!!a}),N=c({mutationFn:r=>re(a,r),onSuccess:()=>{R.invalidateQueries({queryKey:["recording-transcript",a]}),u(!1),C.success("Transcript updated successfully")}}),F=c({mutationFn:()=>ne(a),onSuccess:()=>{C.success("Recording deleted successfully"),x("/recordings")}}),q=c({mutationFn:()=>ie(a,`${s==null?void 0:s.recordingName}.${s==null?void 0:s.format}`)}),A=c({mutationFn:r=>ce(a,r)}),P=()=>{h((t==null?void 0:t.transcript)||""),u(!0)},E=()=>{N.mutate(g)},L=()=>{u(!1),h("")},z=()=>{confirm(`Are you sure you want to delete "${s==null?void 0:s.recordingName}"?`)&&F.mutate()},y=()=>{q.mutate()},v=()=>{A.mutate({expiresIn:"7d"})},B=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=r=>{switch(r){case"Sales":return"default";case"Support":return"secondary";case"Follow-up":return"outline";default:return"secondary"}};return T?e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):D||!s?e.jsx(p,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Recording not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The recording you're looking for doesn't exist or has been deleted."}),e.jsxs(n,{onClick:()=>x("/recordings"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Back to Recordings"]})]})}):e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>x("/recordings"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Back to Recordings"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.recordingName}),e.jsxs("p",{className:"text-muted-foreground",children:["Recording ID: ",s.id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:y,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:v,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(n,{variant:"destructive",size:"sm",onClick:z,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 mr-2"}),"Audio Player"]})}),e.jsx(m,{children:e.jsx(de,{src:`/api/recordings/${s.id}/stream`,title:s.recordingName,duration:s.duration,onDownload:y,onShare:v})})]}),e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center",children:[e.jsx(H,{className:"h-5 w-5 mr-2"}),"Transcript"]}),!f&&e.jsxs(n,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),e.jsx(m,{children:k?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):f?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{value:g,onChange:r=>h(r.target.value),placeholder:"Enter transcript...",rows:10}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{size:"sm",onClick:E,disabled:N.isPending,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"whitespace-pre-wrap",children:(t==null?void 0:t.transcript)||"No transcript available"}),t&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Confidence: ",(t.confidence*100).toFixed(1),"%"]}),e.jsxs("p",{children:["Word count: ",t.wordCount]}),e.jsxs("p",{children:["Language: ",t.language]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(l,{children:e.jsx(o,{children:"Recording Details"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx(S,{variant:$(s.type),children:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(S,{variant:s.status==="completed"?"default":"secondary",children:s.status})]}),e.jsx(ee,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Created"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:B(s.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Duration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.duration})]})]}),s.phoneNumber&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone Number"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.phoneNumber})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Cost"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",s.cost.toFixed(2)]})]})]})]})]})]}),i&&e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Analytics"]})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Play Count"}),e.jsx("span",{className:"text-sm font-medium",children:i.playCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Downloads"}),e.jsx("span",{className:"text-sm font-medium",children:i.downloadCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Shares"}),e.jsx("span",{className:"text-sm font-medium",children:i.shareCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completion Rate"}),e.jsx("span",{className:"text-sm font-medium",children:i.completionRate})]})]})]})]})]})]})};export{be as default};
//# sourceMappingURL=RecordingDetail-Bxsc49IL.js.map
