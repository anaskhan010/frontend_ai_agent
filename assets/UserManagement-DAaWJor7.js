import{j as e,x as Ce,y as ae,aT as q,bl as te,cm as re,S as T,aP as Q,ar as ne,av as le,C as J,al as k,aA as G,bt as Se,H as Ue,T as Ae,D as Fe}from"./ui-U5SHHdCN.js";import{r as x}from"./vendor-DG599jyl.js";import{P as Ee}from"./Page-Bkq40qIk.js";import{H as Me}from"./Header-CgUM4Rd5.js";import{B as L}from"./badge-Cpm2XFEm.js";import{B as b}from"./button-Dzxhr_xW.js";import{C as K,a as Z}from"./card-BJD3nNZo.js";import{A as ie,b as ce,a as me}from"./avatar-BaFmmKaC.js";import{S}from"./skeleton-DJdWQcwr.js";import{c as Ie,u as Pe,d as Le,g as Oe}from"./userService-BpJ-gSo5.js";import{d as Re,t as p}from"./index-E85mAFiC.js";import{P as Te}from"./PermissionRoute-ovYDaLMA.js";import{D as V,a as X,b as H,c as z,d as $}from"./dialog-L06_4tY7.js";import{I as w}from"./input-7y-mQAf4.js";import{L as N}from"./label-pzE6otZi.js";import{S as oe,a as de,b as he,c as xe,d as ue}from"./select-sdth0Nbs.js";import{S as fe}from"./switch-BJ_JyLn0.js";import{A as ke,a as qe,b as Ve,c as Xe,d as He,e as ze,f as $e,g as Be}from"./alert-dialog-Tlhx7pIm.js";import{t as F,c as We,e as Ye,n as pe,a as Qe,g as Je,m as Ge,o as ee,p as se,q as M,f as R}from"./format-C-QuTXqM.js";import"./scroll-area-CZ_bn1oj.js";import"./index-DaFIz4sE.js";import"./index-DVJtLwEJ.js";import"./sheet-DBZCEJU-.js";import"./router-BavLd_S0.js";import"./query-09wH2FJs.js";import"./usePermissions-B9q1vBDx.js";import"./Loading-C5ZaMlhw.js";import"./index-HDeFwIcs.js";function I(r,i){const s=+F(r)-+F(i);return s<0?-1:s>0?1:s}function Ke(r){return We(r,Date.now())}function Ze(r){return i=>{const s=Math.trunc,l=s(i);return l===0?0:l}}function es(r,i){return+F(r)-+F(i)}function ss(r,i){const s=F(r,i==null?void 0:i.in);return s.setHours(23,59,59,999),s}function as(r,i){const s=F(r,i==null?void 0:i.in);return+ss(s,i)==+Ye(s,i)}function ts(r,i,s){const[l,t,u]=pe(s==null?void 0:s.in,r,r,i),f=I(t,u),o=Math.abs(Qe(t,u));if(o<1)return 0;t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-f*o);let d=I(t,u)===-f;as(l)&&o===1&&I(l,u)===1&&(d=!1);const c=f*(o-+d);return c===0?0:c}function rs(r,i,s){const l=es(r,i)/1e3;return Ze()(l)}function ns(r,i,s){const l=Je(),t=(s==null?void 0:s.locale)??l.locale??Ge,u=2520,f=I(r,i);if(isNaN(f))throw new RangeError("Invalid time value");const o=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:f}),[d,c]=pe(s==null?void 0:s.in,...f>0?[i,r]:[r,i]),y=rs(c,d),_=(ee(c)-ee(d))/1e3,h=Math.round((y-_)/60);let v;if(h<2)return s!=null&&s.includeSeconds?y<5?t.formatDistance("lessThanXSeconds",5,o):y<10?t.formatDistance("lessThanXSeconds",10,o):y<20?t.formatDistance("lessThanXSeconds",20,o):y<40?t.formatDistance("halfAMinute",0,o):y<60?t.formatDistance("lessThanXMinutes",1,o):t.formatDistance("xMinutes",1,o):h===0?t.formatDistance("lessThanXMinutes",1,o):t.formatDistance("xMinutes",h,o);if(h<45)return t.formatDistance("xMinutes",h,o);if(h<90)return t.formatDistance("aboutXHours",1,o);if(h<se){const n=Math.round(h/60);return t.formatDistance("aboutXHours",n,o)}else{if(h<u)return t.formatDistance("xDays",1,o);if(h<M){const n=Math.round(h/se);return t.formatDistance("xDays",n,o)}else if(h<M*2)return v=Math.round(h/M),t.formatDistance("aboutXMonths",v,o)}if(v=ts(c,d),v<12){const n=Math.round(h/M);return t.formatDistance("xMonths",n,o)}else{const n=v%12,g=Math.trunc(v/12);return n<3?t.formatDistance("aboutXYears",g,o):n<9?t.formatDistance("overXYears",g,o):t.formatDistance("almostXYears",g+1,o)}}function P(r,i){return ns(r,Ke(r),i)}const B=async()=>{try{const r=await Re.get("/api/roles");if(r.status===200)return r.data;throw new Error("Failed to get roles")}catch(r){throw console.error("Error getting roles:",r),r}},ls=({open:r,onOpenChange:i,onUserCreated:s})=>{const[l,t]=x.useState(!1),[u,f]=x.useState([]),[o,d]=x.useState(!1),[c,y]=x.useState({username:"",email:"",password:"",first_name:"",last_name:"",phone_number:"",role_id:"",is_active:!0});x.useEffect(()=>{r&&_()},[r]);const _=async()=>{try{const m=await B();if(m.success){const j=m.data.filter(D=>D.is_active);f(j)}else p.error("Failed to fetch roles")}catch(m){console.error("Error fetching roles:",m),p.error("Failed to fetch roles")}},h=(m,j)=>{y(D=>({...D,[m]:j}))},v=async m=>{var j,D;if(m.preventDefault(),!c.username||!c.email||!c.password||!c.first_name||!c.last_name||!c.role_id){p.error("Please fill in all required fields");return}if(c.password.length<6){p.error("Password must be at least 6 characters long");return}try{t(!0);const C=await Ie(c);C.success?(p.success("User created successfully"),s(),i(!1),n()):p.error(C.message||"Failed to create user")}catch(C){console.error("Error creating user:",C),p.error(((D=(j=C.response)==null?void 0:j.data)==null?void 0:D.message)||"Failed to create user")}finally{t(!1)}},n=()=>{y({username:"",email:"",password:"",first_name:"",last_name:"",phone_number:"",role_id:"",is_active:!0}),d(!1)},g=()=>{i(!1),n()};return e.jsx(V,{open:r,onOpenChange:g,children:e.jsxs(X,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(z,{children:"Add New User"}),e.jsx($,{children:"Create a new user account with role assignment."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"first_name",className:"text-sm font-medium",children:"First Name *"}),e.jsx(w,{id:"first_name",value:c.first_name,onChange:m=>h("first_name",m.target.value),placeholder:"Enter first name",required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"last_name",className:"text-sm font-medium",children:"Last Name *"}),e.jsx(w,{id:"last_name",value:c.last_name,onChange:m=>h("last_name",m.target.value),placeholder:"Enter last name",required:!0,className:"h-11"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"username",className:"text-sm font-medium",children:"Username *"}),e.jsx(w,{id:"username",value:c.username,onChange:m=>h("username",m.target.value),placeholder:"Enter username",required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"email",className:"text-sm font-medium",children:"Email *"}),e.jsx(w,{id:"email",type:"email",value:c.email,onChange:m=>h("email",m.target.value),placeholder:"Enter email address",required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"password",className:"text-sm font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"password",type:o?"text":"password",value:c.password,onChange:m=>h("password",m.target.value),placeholder:"Enter password (min 6 characters)",required:!0,minLength:6,className:"h-11 pr-10"}),e.jsx(b,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-11 px-3 py-2 hover:bg-transparent",onClick:()=>d(!o),children:o?e.jsx(Ce,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"phone_number",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(w,{id:"phone_number",value:c.phone_number,onChange:m=>h("phone_number",m.target.value),placeholder:"Enter phone number (optional)",className:"h-11"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"role_id",className:"text-sm font-medium",children:"Role *"}),e.jsxs(oe,{value:c.role_id,onValueChange:m=>h("role_id",m),required:!0,children:[e.jsx(de,{className:"h-11",children:e.jsx(he,{placeholder:"Select a role"})}),e.jsx(xe,{children:u.length>0?u.map(m=>e.jsx(ue,{value:m.id.toString(),children:m.display_name},m.id)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No roles available"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 py-2",children:[e.jsx(fe,{id:"is_active",checked:c.is_active,onCheckedChange:m=>h("is_active",m)}),e.jsx(N,{htmlFor:"is_active",className:"text-sm font-medium",children:"Active User"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(b,{type:"button",variant:"outline",onClick:g,disabled:l,className:"h-11 px-6",children:"Cancel"}),e.jsxs(b,{type:"submit",disabled:l,className:"h-11 px-6",children:[l&&e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Create User"]})]})]})]})})},is=({open:r,onOpenChange:i,onUserUpdated:s,user:l})=>{const[t,u]=x.useState(!1),[f,o]=x.useState([]),[d,c]=x.useState({username:"",email:"",first_name:"",last_name:"",phone_number:"",role_id:"",is_active:!0});x.useEffect(()=>{var n;r&&l&&(c({username:l.username||"",email:l.email||"",first_name:l.first_name||"",last_name:l.last_name||"",phone_number:l.phone_number||"",role_id:((n=l.role_id)==null?void 0:n.toString())||"",is_active:l.is_active??!0}),y())},[r,l]);const y=async()=>{try{const n=await B();n.success&&o(n.data.filter(g=>g.is_active))}catch(n){console.error("Error fetching roles:",n),p.error("Failed to fetch roles")}},_=(n,g)=>{c(m=>({...m,[n]:g}))},h=async n=>{var g,m;if(n.preventDefault(),!!l){if(!d.username||!d.email||!d.first_name||!d.last_name||!d.role_id){p.error("Please fill in all required fields");return}try{u(!0);const j=await Pe(l.id,d);j.success?(p.success("User updated successfully"),s(),i(!1)):p.error(j.message||"Failed to update user")}catch(j){console.error("Error updating user:",j),p.error(((m=(g=j.response)==null?void 0:g.data)==null?void 0:m.message)||"Failed to update user")}finally{u(!1)}}},v=()=>{i(!1)};return l?e.jsx(V,{open:r,onOpenChange:v,children:e.jsxs(X,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(z,{children:"Edit User"}),e.jsx($,{children:"Update user information and role assignment."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"first_name",className:"text-sm font-medium",children:"First Name *"}),e.jsx(w,{id:"first_name",value:d.first_name,onChange:n=>_("first_name",n.target.value),placeholder:"Enter first name",required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{htmlFor:"last_name",className:"text-sm font-medium",children:"Last Name *"}),e.jsx(w,{id:"last_name",value:d.last_name,onChange:n=>_("last_name",n.target.value),placeholder:"Enter last name",required:!0,className:"h-11"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"username",children:"Username *"}),e.jsx(w,{id:"username",value:d.username,onChange:n=>_("username",n.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email *"}),e.jsx(w,{id:"email",type:"email",value:d.email,onChange:n=>_("email",n.target.value),placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(w,{id:"phone_number",value:d.phone_number,onChange:n=>_("phone_number",n.target.value),placeholder:"Enter phone number (optional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"role_id",children:"Role *"}),e.jsxs(oe,{value:d.role_id,onValueChange:n=>_("role_id",n),required:!0,children:[e.jsx(de,{children:e.jsx(he,{placeholder:"Select a role"})}),e.jsx(xe,{children:f.map(n=>e.jsx(ue,{value:n.id.toString(),children:n.display_name},n.id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{id:"is_active",checked:d.is_active,onCheckedChange:n=>_("is_active",n)}),e.jsx(N,{htmlFor:"is_active",children:"Active User"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:v,disabled:t,children:"Cancel"}),e.jsxs(b,{type:"submit",disabled:t,children:[t&&e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Update User"]})]})]})]})}):null},cs=({open:r,onOpenChange:i,onUserDeleted:s,user:l})=>{const[t,u]=x.useState(!1),f=async()=>{var o,d;if(l){if(l.is_super_admin){p.error("Cannot delete super admin user");return}try{u(!0);const c=await Le(l.id);c.success?(p.success("User deleted successfully"),s(),i(!1)):p.error(c.message||"Failed to delete user")}catch(c){console.error("Error deleting user:",c),p.error(((d=(o=c.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to delete user")}finally{u(!1)}}};return l?e.jsx(ke,{open:r,onOpenChange:i,children:e.jsxs(qe,{children:[e.jsxs(Ve,{children:[e.jsx(Xe,{children:"Delete User"}),e.jsxs(He,{children:["Are you sure you want to delete ",e.jsxs("strong",{children:[l.first_name," ",l.last_name]})," (",l.email,")?",e.jsx("br",{}),e.jsx("br",{}),"This action cannot be undone. The user will be permanently removed from the system.",l.is_super_admin&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[e.jsx("strong",{children:"Warning:"})," This is a super admin user and cannot be deleted."]})]})]}),e.jsxs(ze,{children:[e.jsx($e,{disabled:t,children:"Cancel"}),e.jsxs(Be,{onClick:f,disabled:t||l.is_super_admin,className:"bg-red-600 hover:bg-red-700",children:[t&&e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete User"]})]})]})}):null},ms=({open:r,onOpenChange:i,user:s})=>{if(!s)return null;const l=t=>t.roles&&t.roles.length>0?t.roles.map(u=>u.display_name).join(", "):t.is_super_admin?"Super Administrator":"No Role";return e.jsx(V,{open:r,onOpenChange:i,children:e.jsxs(X,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(z,{children:"User Details"}),e.jsx($,{children:"View detailed information about this user account."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs(ie,{className:"h-16 w-16",children:[e.jsx(ce,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${s.first_name} ${s.last_name}`}),e.jsxs(me,{className:"text-lg",children:[s.first_name.charAt(0),s.last_name.charAt(0)]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("h3",{className:"text-xl font-semibold",children:[s.first_name," ",s.last_name]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:s.is_active?"default":"secondary",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Inactive"]})}),e.jsxs(L,{variant:"outline",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),l(s)]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Contact Information"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Username"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.username})]})]}),s.phone_number&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(le,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.phone_number})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Account Information"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(k,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Member Since"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[R(new Date(s.created_at),"PPP"),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",P(new Date(s.created_at),{addSuffix:!0}),")"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(k,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[R(new Date(s.updated_at),"PPP"),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",P(new Date(s.updated_at),{addSuffix:!0}),")"]})]})]})]}),s.last_login&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(J,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Login"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[R(new Date(s.last_login),"PPP"),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",P(new Date(s.last_login),{addSuffix:!0}),")"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"System Information"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"User ID"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["#",s.id]})]})}),e.jsx("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Account Status"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.is_active?"Active - Can login and access system":"Inactive - Cannot login to system"})]})}),e.jsx("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Admin Privileges"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.is_super_admin?"Super Administrator - Full system access":"Regular User - Role-based access"})]})})]})]})]})]})})},Ts=()=>{const[r,i]=x.useState([]),[s,l]=x.useState([]),[t,u]=x.useState(!0),[f,o]=x.useState(""),[d,c]=x.useState(null),[y,_]=x.useState(!1),[h,v]=x.useState(!1),[n,g]=x.useState(!1),[m,j]=x.useState(!1),[D,C]=x.useState(!1);x.useEffect(()=>{E(),ge()},[]);const E=async()=>{try{u(!0);const a=await Oe();if(a.success){const A=a.data.map(U=>({...U,username:U.username||U.email||`user_${U.id}`}));i(A)}else p.error("Failed to fetch users")}catch(a){console.error("Error fetching users:",a),p.error("Failed to fetch users")}finally{u(!1)}},ge=async()=>{try{const a=await B();a.success&&l(a.data)}catch(a){console.error("Error fetching roles:",a)}},O=(r||[]).filter(a=>a.username.toLowerCase().includes(f.toLowerCase())||a.email.toLowerCase().includes(f.toLowerCase())||a.first_name.toLowerCase().includes(f.toLowerCase())||a.last_name.toLowerCase().includes(f.toLowerCase())),je=a=>a.roles&&a.roles.length>0?a.roles.map(A=>A.display_name).join(", "):a.role_names?a.role_names.split(",").map(U=>{const Y=(s||[]).find(De=>De.name===U.trim());return Y?Y.display_name:U}).join(", "):a.is_super_admin?"Super Administrator":"No Role",Ne=a=>{c(a),C(!0)},ve=a=>{c(a),g(!0)},ye=a=>{c(a),j(!0)},W=()=>{v(!0)},_e=()=>{E()},we=()=>{E()},be=()=>{E()};return e.jsx(Te,{requireSuperAdmin:!0,children:e.jsxs(Ee,{children:[e.jsx(Me,{title:"User Management",buttonText:"Add User",action:W,filterByName:!0,filterWord:f,onFilterChange:o,useSheet:!1,showViewToggle:!1,showFilters:!1}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-3",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(L,{variant:"secondary",className:"px-3 py-1",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[O.length," Users"]})]})})}),e.jsx("div",{className:"grid gap-4",children:t&&r.length===0?Array.from({length:3}).map((a,A)=>e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(Z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(S,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(S,{className:"h-5 w-48 mb-2"}),e.jsx(S,{className:"h-4 w-32 mb-1"}),e.jsx(S,{className:"h-4 w-24"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-8 w-16"}),e.jsx(S,{className:"h-8 w-8"}),e.jsx(S,{className:"h-8 w-8"}),e.jsx(S,{className:"h-8 w-8"})]})]})})},`skeleton-${A}`)):O.map(a=>e.jsx(K,{className:"hover:shadow-md transition-shadow",children:e.jsx(Z,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(ie,{className:"h-12 w-12",children:[e.jsx(ce,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${a.first_name} ${a.last_name}`}),e.jsxs(me,{children:[a.first_name.charAt(0),a.last_name.charAt(0)]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[a.first_name," ",a.last_name]}),a.is_super_admin&&e.jsx(Se,{className:"h-4 w-4 text-yellow-500"}),e.jsx(L,{variant:a.is_active?"default":"secondary",children:a.is_active?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Inactive"]})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3"}),a.email]}),a.phone_number&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),a.phone_number]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),je(a)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),"Joined ",P(new Date(a.created_at),{addSuffix:!0})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>Ne(a),className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4"}),"View"]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>ve(a),className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>ye(a),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Delete"]})]})]})})},a.id))}),O.length===0&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No users found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:f?"No users match your search criteria.":"No users have been created yet."}),e.jsxs(b,{onClick:W,children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Add First User"]})]}),e.jsx(ls,{open:h,onOpenChange:v,onUserCreated:_e}),e.jsx(is,{open:n,onOpenChange:g,onUserUpdated:we,user:d}),e.jsx(cs,{open:m,onOpenChange:j,onUserDeleted:be,user:d}),e.jsx(ms,{open:D,onOpenChange:C,user:d})]})})};export{Ts as default};
//# sourceMappingURL=UserManagement-DAaWJor7.js.map
