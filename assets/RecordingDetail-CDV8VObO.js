import{j as e,k as w,J as $,a$ as I,b2 as K,aL as Q,ar as H,H as J,bv as U,aI as V,al as W,C as X,aw as G,bw as O,an as Y}from"./ui-S570Xcny.js";import{r as b}from"./vendor-DG599jyl.js";import{u as Z,b as j,c}from"./query-Cab5P5bd.js";import{C as d,b as l,c as o,a as m}from"./card-DMfGhRm1.js";import{B as C}from"./badge-ij7fArnn.js";import{B as n}from"./button-BSd9MMPp.js";import{T as _}from"./textarea-Cw4zrZDH.js";import{S as ee}from"./separator-Wr5jI2gW.js";import{b as se,c as ae,e as te,u as re,d as ne,a as ie,s as ce,A as de}from"./recordingService-BpudyEY3.js";import{P as p}from"./Page-BJWqKr2O.js";import{t as S}from"./index-CVuMn1_A.js";import{d as le,u as oe}from"./router-BavLd_S0.js";import"./slider-DHO3HMwz.js";import"./index-HDeFwIcs.js";import"./dropdown-menu-Bxst4dXB.js";import"./scroll-area-C-pzVjaj.js";import"./index-BHBJ6RT-.js";import"./index-CWMUKvWL.js";const Fe=()=>{const{id:a}=le(),x=oe(),R=Z(),[f,u]=b.useState(!1),[g,h]=b.useState(""),{data:s,isLoading:T,error:D}=j({queryKey:["recording",a],queryFn:()=>se(a),enabled:!!a}),{data:i,isLoading:me}=j({queryKey:["recording-analytics",a],queryFn:()=>ae(a),enabled:!!a}),{data:t,isLoading:k}=j({queryKey:["recording-transcript",a],queryFn:()=>te(a),enabled:!!a}),N=c({mutationFn:r=>re(a,r),onSuccess:()=>{R.invalidateQueries({queryKey:["recording-transcript",a]}),u(!1),S.success("Transcript updated successfully")}}),F=c({mutationFn:()=>ne(a),onSuccess:()=>{S.success("Recording deleted successfully"),x("/recordings")}}),q=c({mutationFn:()=>ie(a,`${s==null?void 0:s.recordingName}.${s==null?void 0:s.format}`)}),L=c({mutationFn:r=>ce(a,r)}),P=()=>{h((t==null?void 0:t.transcript)||""),u(!0)},A=()=>{N.mutate(g)},E=()=>{u(!1),h("")},B=()=>{confirm(`Are you sure you want to delete "${s==null?void 0:s.recordingName}"?`)&&F.mutate()},y=()=>{q.mutate()},v=()=>{L.mutate({expiresIn:"7d"})},z=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),M=r=>{switch(r){case"Sales":return"default";case"Support":return"secondary";case"Follow-up":return"outline";default:return"secondary"}};return T?e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):D||!s?e.jsx(p,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Recording not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The recording you're looking for doesn't exist or has been deleted."}),e.jsxs(n,{onClick:()=>x("/recordings"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Back to Recordings"]})]})}):e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>x("/recordings"),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Back to Recordings"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.recordingName}),e.jsxs("p",{className:"text-muted-foreground",children:["Recording ID: ",s.id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:y,children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:v,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(n,{variant:"destructive",size:"sm",onClick:B,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 mr-2"}),"Audio Player"]})}),e.jsx(m,{children:e.jsx(de,{src:`/api/recordings/${s.id}/stream`,title:s.recordingName,duration:s.duration,onDownload:y,onShare:v})})]}),e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center",children:[e.jsx(H,{className:"h-5 w-5 mr-2"}),"Transcript"]}),!f&&e.jsxs(n,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),e.jsx(m,{children:k?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):f?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{value:g,onChange:r=>h(r.target.value),placeholder:"Enter transcript...",rows:10}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{size:"sm",onClick:A,disabled:N.isPending,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:E,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"whitespace-pre-wrap",children:(t==null?void 0:t.transcript)||"No transcript available"}),t&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Confidence: ",(t.confidence*100).toFixed(1),"%"]}),e.jsxs("p",{children:["Word count: ",t.wordCount]}),e.jsxs("p",{children:["Language: ",t.language]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsx(l,{children:e.jsx(o,{children:"Recording Details"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx(C,{variant:M(s.type),children:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(C,{variant:s.status==="completed"?"default":"secondary",children:s.status})]}),e.jsx(ee,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Created"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:z(s.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Duration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.duration})]})]}),s.phoneNumber&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone Number"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.phoneNumber})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Cost"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",s.cost.toFixed(2)]})]})]})]})]})]}),i&&e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),"Analytics"]})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Play Count"}),e.jsx("span",{className:"text-sm font-medium",children:i.playCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Downloads"}),e.jsx("span",{className:"text-sm font-medium",children:i.downloadCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Shares"}),e.jsx("span",{className:"text-sm font-medium",children:i.shareCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completion Rate"}),e.jsx("span",{className:"text-sm font-medium",children:i.completionRate})]})]})]})]})]})]})};export{Fe as default};
//# sourceMappingURL=RecordingDetail-CDV8VObO.js.map
