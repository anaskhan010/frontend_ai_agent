{"version":3,"file":"FacebookCallback-BJuyvbet.js","sources":["../../src/pages/FacebookCallback.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst FacebookCallback = () => {\n  const [status, setStatus] = useState('processing');\n  const [message, setMessage] = useState('Processing Facebook connection...');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const code = urlParams.get('code');\n        const error = urlParams.get('error');\n\n        if (error) {\n          setStatus('error');\n          setMessage(`Facebook connection failed: ${error}`);\n          setTimeout(() => {\n            window.close();\n          }, 3000);\n          return;\n        }\n\n        if (code) {\n          setStatus('success');\n          setMessage('Facebook connected successfully! Fetching your pages...');\n\n          const response = await fetch('/api/facebook/callback', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ code }),\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            \n            if (window.opener) {\n              window.opener.postMessage({\n                type: 'FACEBOOK_AUTH_SUCCESS',\n                data: data\n              }, window.location.origin);\n            }\n            \n            setMessage('Connection successful! Closing window...');\n            setTimeout(() => {\n              window.close();\n            }, 2000);\n          } else {\n            throw new Error('Failed to process Facebook callback');\n          }\n        } else {\n          setStatus('error');\n          setMessage('No authorization code received from Facebook');\n          setTimeout(() => {\n            window.close();\n          }, 3000);\n        }\n      } catch (error) {\n        console.error('Facebook callback error:', error);\n        setStatus('error');\n        setMessage('Failed to connect Facebook account');\n        setTimeout(() => {\n          window.close();\n        }, 3000);\n      }\n    };\n\n    handleCallback();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-6\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-500 flex items-center justify-center\">\n            {status === 'processing' && (\n              <svg className=\"animate-spin h-8 w-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n            )}\n            {status === 'success' && (\n              <svg className=\"h-8 w-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            )}\n            {status === 'error' && (\n              <svg className=\"h-8 w-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            )}\n          </div>\n          \n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n            {status === 'processing' && 'Connecting Facebook'}\n            {status === 'success' && 'Connection Successful'}\n            {status === 'error' && 'Connection Failed'}\n          </h2>\n          \n          <p className=\"text-gray-600 mb-4\">{message}</p>\n          \n          {status === 'processing' && (\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div className=\"bg-blue-500 h-2 rounded-full animate-pulse\" style={{width: '60%'}}></div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FacebookCallback;\n"],"names":["FacebookCallback","status","setStatus","useState","message","setMessage","useNavigate","useEffect","urlParams","code","error","response","data","jsx","jsxs"],"mappings":"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"}