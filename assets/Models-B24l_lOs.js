import{j as e,aT as A,Z as K,am as j}from"./ui-CNbESIMS.js";import{r as u}from"./vendor-DG599jyl.js";import{u as B,b as L,c as k}from"./query-DFkYe0MV.js";import{C as c,a as l,b as h,c as f,d as H}from"./card-pTI7iGfo.js";import{B as Q}from"./button-BpHONB4D.js";import{B as Z}from"./badge-DO_1G0Ng.js";import{D as $,a as U,b as V,c as z,d as G}from"./dialog-MmBhddhZ.js";import{T as J,a as W,b as E,c as F}from"./tabs-DYmQtUUn.js";import{d as p,t as i,u as X}from"./index-CvuFKe2_.js";import{P as I}from"./Page-B106cZ-W.js";import"./router-BavLd_S0.js";import"./scroll-area-CQNQHAmm.js";import"./index-DklBfCbe.js";import"./index-U78YeT7B.js";async function Y(){try{return(await p.get("/api/models/available")).data}catch(t){throw console.error("Error fetching available models:",t),i.error("Failed to fetch available models"),t}}async function _(t){var d,m;try{const r=await p.post("/api/models/config",t);return i.success("Model configuration created successfully"),r.data}catch(r){console.error("Error creating model config:",r);const g=((m=(d=r.response)==null?void 0:d.data)==null?void 0:m.message)||"Failed to create model configuration";throw i.error(g),r}}async function ee(t){var d,m;try{const r=await p.post("/api/models/test",t);return i.success("Model test completed successfully"),r.data}catch(r){console.error("Error testing model:",r);const g=((m=(d=r.response)==null?void 0:d.data)==null?void 0:m.message)||"Failed to test model";throw i.error(g),r}}async function se(){try{return(await p.get("/api/models/stats")).data}catch(t){throw console.error("Error fetching model stats:",t),i.error("Failed to fetch model statistics"),t}}const ve=()=>{var b,w,C,M,T,S;const[t,d]=u.useState(""),[m,r]=u.useState(""),[g,te]=u.useState("Hello, how are you?"),[re,ae]=u.useState(.7),[ne,oe]=u.useState(!1),[q,N]=u.useState(!1),O=B(),{user:x}=X(),{data:y,isLoading:P,error:R}=L({queryKey:["models","available",x==null?void 0:x.id],queryFn:Y,retry:1,enabled:!!(x!=null&&x.id),staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:n=>n}),{data:a,isLoading:D}=L({queryKey:["models","stats"],queryFn:se,retry:1});k({mutationFn:ee,onSuccess:n=>{i.success("Model test completed successfully"),console.log("Test result:",n)},onError:n=>{var o,s;console.error("Model test failed:",n),i.error(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||"Model test failed")}}),k({mutationFn:_,onSuccess:()=>{O.invalidateQueries({queryKey:["models"]}),N(!1),i.success("Model configuration created successfully")},onError:n=>{var o,s;i.error(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to create model configuration")}});const v=(y==null?void 0:y.data)||{};return R?e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and configure AI models from different providers"})]}),e.jsx(c,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to connect to the backend API. Please ensure the backend server is running."}),e.jsx(Q,{onClick:()=>window.location.reload(),children:"Retry Connection"})]})})})]})}):e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and configure AI models from different providers"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx($,{open:q,onOpenChange:N,children:e.jsxs(U,{children:[e.jsxs(V,{children:[e.jsx(z,{children:"Create Model Configuration"}),e.jsx(G,{children:"Create a new model configuration for your assistants"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Model configuration form will be implemented here."})})]})})})]}),e.jsxs(J,{defaultValue:"providers",className:"space-y-4",children:[e.jsxs(W,{children:[e.jsx(E,{value:"providers",children:"Available Models"}),e.jsx(E,{value:"stats",children:"Statistics"})]}),e.jsx(F,{value:"providers",className:"space-y-4",children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"grid gap-6",children:Object.keys(v).length===0?e.jsx(c,{children:e.jsx(l,{className:"pt-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No models available. Please check your backend configuration."})})})}):Object.entries(v).map(([n,o])=>e.jsxs(c,{children:[e.jsxs(h,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),n]}),e.jsxs(H,{children:[Array.isArray(o)?o.length:0," models available"]})]}),e.jsx(l,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.isArray(o)&&o.map(s=>e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx(Z,{variant:"secondary",children:s.provider||n})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),s.contextLength&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Context: ",s.contextLength.toLocaleString()," tokens"]}),s.pricing&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Input: $",s.pricing.input,"/1K â€¢ Output: $",s.pricing.output,"/1K"]})]})},s.id||s.name))})})]},n))})}),e.jsx(F,{value:"stats",className:"space-y-4",children:D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(A,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:((w=(b=a==null?void 0:a.data)==null?void 0:b.totalRequests)==null?void 0:w.toLocaleString())||0})})]}),e.jsxs(c,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Tokens"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:((M=(C=a==null?void 0:a.data)==null?void 0:C.totalTokens)==null?void 0:M.toLocaleString())||0})})]}),e.jsxs(c,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Avg Latency"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((T=a==null?void 0:a.data)==null?void 0:T.averageLatency)||0,"ms"]})})]}),e.jsxs(c,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Error Rate"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((((S=a==null?void 0:a.data)==null?void 0:S.errorRate)||0)*100).toFixed(1),"%"]})})]})]})})]})]})})};export{ve as default};
//# sourceMappingURL=Models-B24l_lOs.js.map
