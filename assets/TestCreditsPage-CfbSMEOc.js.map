{"version":3,"file":"TestCreditsPage-CfbSMEOc.js","sources":["../../src/pages/Credits/TestCreditsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { CreditCard, Plus, CheckCircle, AlertCircle } from 'lucide-react';\nimport { toast } from 'sonner';\nimport axiosInstance from '@/api/axios/axiosInstance';\n\nconst TestCreditsPage = () => {\n  const [loading, setLoading] = useState(true);\n  const [creditData, setCreditData] = useState(null);\n  const [packages, setPackages] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchCreditData();\n  }, []);\n\n  const fetchCreditData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      console.log('üîç Testing credit system endpoints...');\n      \n      // Test credit balance\n      const balanceRes = await axiosInstance.get('/api/credits/balance');\n      console.log('‚úÖ Credit balance:', balanceRes.data);\n      setCreditData(balanceRes.data.data);\n      \n      // Test credit packages\n      const packagesRes = await axiosInstance.get('/api/credits/packages');\n      console.log('‚úÖ Credit packages:', packagesRes.data);\n      setPackages(packagesRes.data.data || []);\n      \n      toast.success('Credit system loaded successfully!');\n    } catch (error) {\n      console.error('‚ùå Error fetching credit data:', error);\n      setError(error.response?.data?.message || error.message);\n      toast.error('Failed to load credit system');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const testPaymentIntent = async (packageId) => {\n    try {\n      console.log('üîç Testing payment intent creation...');\n      const response = await axiosInstance.post('/api/credits/purchase', {\n        packageId: packageId\n      });\n      console.log('‚úÖ Payment intent created:', response.data);\n      toast.success('Payment intent created successfully!');\n    } catch (error) {\n      console.error('‚ùå Payment intent error:', error);\n      toast.error('Payment intent failed: ' + (error.response?.data?.message || error.message));\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p>Loading credit system...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Credit System Test</h1>\n        <Button onClick={fetchCreditData} variant=\"outline\">\n          Refresh Data\n        </Button>\n      </div>\n\n      {error && (\n        <Card className=\"border-red-200 bg-red-50\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center space-x-2\">\n              <AlertCircle className=\"h-5 w-5 text-red-600\" />\n              <span className=\"text-red-800\">Error: {error}</span>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Credit Balance */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            <span>Credit Balance</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {creditData ? (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span>Available Credits:</span>\n                <Badge variant={creditData.isSuperAdmin ? \"default\" : \"secondary\"}>\n                  {creditData.available_credits}\n                </Badge>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span>Total Credits:</span>\n                <span>{creditData.total_credits}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span>Used Credits:</span>\n                <span>{creditData.used_credits}</span>\n              </div>\n              {creditData.isSuperAdmin && (\n                <div className=\"flex items-center space-x-2 text-green-600\">\n                  <CheckCircle className=\"h-4 w-4\" />\n                  <span>Super Admin - Unlimited Credits</span>\n                </div>\n              )}\n            </div>\n          ) : (\n            <p>No credit data available</p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Credit Packages */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Plus className=\"h-5 w-5\" />\n            <span>Available Credit Packages</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {packages.length > 0 ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {packages.map((pkg) => (\n                <Card key={pkg.id} className=\"border-2 hover:border-blue-300 transition-colors\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <h3 className=\"font-semibold\">{pkg.name}</h3>\n                        {pkg.is_popular && (\n                          <Badge variant=\"default\">Popular</Badge>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600\">{pkg.description}</p>\n                      <div className=\"space-y-1\">\n                        <div className=\"flex justify-between\">\n                          <span>Credits:</span>\n                          <span>{pkg.total_credits}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Price:</span>\n                          <span className=\"font-semibold\">${pkg.price_dollars}</span>\n                        </div>\n                        {pkg.bonus_credits > 0 && (\n                          <div className=\"flex justify-between text-green-600\">\n                            <span>Bonus:</span>\n                            <span>+{pkg.bonus_credits} credits</span>\n                          </div>\n                        )}\n                      </div>\n                      <Button \n                        onClick={() => testPaymentIntent(pkg.package_id)}\n                        className=\"w-full mt-2\"\n                        size=\"sm\"\n                      >\n                        Test Purchase\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : (\n            <p>No credit packages available</p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default TestCreditsPage;\n"],"names":["TestCreditsPage","loading","setLoading","useState","creditData","setCreditData","packages","setPackages","error","setError","useEffect","fetchCreditData","balanceRes","axiosInstance","packagesRes","toast","testPaymentIntent","packageId","response","jsxs","jsx","Button","Card","CardContent","AlertCircle","CardHeader","CardTitle","CreditCard","Badge","CheckCircle","Plus","pkg"],"mappings":"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"}