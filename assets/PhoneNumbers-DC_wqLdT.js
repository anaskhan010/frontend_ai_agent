import{j as e,aS as F,aG as Ce,aC as Z,ci as Pe,bI as xe,aI as _e,cj as Ae,ba as Se,K as Ie,X as Ue,ck as Fe,N as qe,T as ke}from"./ui-CZ40mCLE.js";import{r as f,b as me}from"./vendor-DG599jyl.js";import{u as ue,b as A,c as H}from"./query-Dkjx6fBT.js";import{t as N,a as z,C as U,b as T,c as V,d as Q,e as je,n as d,B as $,q as G,r as Y,s as W,v as X,x as J,S as ne,f as ae,g as ie,h as re,i as M,z as De,L as R,I as se}from"./index-gfvc66g_.js";import{T as E,a as K,b as g,c as r,d as B,e as i}from"./table-UuQdjaS_.js";import{C as Le}from"./CreatePhoneNumberForm-DXz1SNao.js";import{a as Me,b as Te,u as Ee,g as Ke,s as Be,d as Oe,e as Re,f as Ve}from"./phoneNumberService-BSrQtccz.js";import{g as Qe}from"./userService-DAB7-tTf.js";import{u as ge}from"./usePermissions-BgIk0RMx.js";import{a as $e}from"./agentService-Csug9cM-.js";import"./router-BnJytTjr.js";import"./CreditGuard-72Zq1Vxt.js";const He=()=>{const[o,m]=f.useState(null),[v,q]=f.useState(""),[b,C]=f.useState(!1),P=ue(),{data:l,isLoading:O,error:k}=A({queryKey:["admin-vapi-phone-numbers"],queryFn:()=>Me(),retry:1}),{data:u,isLoading:S}=A({queryKey:["all-users"],queryFn:()=>Qe(),retry:1}),j=H({mutationFn:({phoneNumberId:n,userId:h,vapiId:x})=>x?z.post(`/api/phone-numbers/${x}/assign`,{user_id:h,vapi_id:x}):Te(n,h),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-vapi-phone-numbers"]}),P.invalidateQueries({queryKey:["admin-phone-numbers"]}),N.success("Phone number assigned successfully!"),C(!1),m(null),q("")},onError:n=>{var h,x;N.error("Failed to assign phone number: "+(((x=(h=n.response)==null?void 0:h.data)==null?void 0:x.message)||n.message))}}),y=H({mutationFn:n=>Ee(n),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-vapi-phone-numbers"]}),P.invalidateQueries({queryKey:["admin-phone-numbers"]}),N.success("Phone number unassigned successfully!")},onError:n=>{var h,x;N.error("Failed to unassign phone number: "+(((x=(h=n.response)==null?void 0:h.data)==null?void 0:x.message)||n.message))}}),_=n=>{m(n),C(!0)},D=()=>{if(!o||!v){N.error("Please select a user to assign the phone number to.");return}j.mutate({phoneNumberId:o.local_id||o.id,userId:v,vapiId:o.vapi_id||o.id})},c=n=>{if(!n.local_id){N.error("Cannot unassign phone number that is not in local database.");return}window.confirm(`Are you sure you want to unassign phone number ${n.number}?`)&&y.mutate(n.local_id)},I=(l==null?void 0:l.data)||[],w=(u==null?void 0:u.data)||[];return O?e.jsx(U,{children:e.jsx(T,{className:"flex items-center justify-center h-32",children:e.jsx(F,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(U,{children:[e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-600"}),e.jsx(Q,{children:"Super Admin - Phone Number Management"})]}),e.jsx(je,{children:"Manage phone number assignments for all users. Shows all VAPI phone numbers including Twilio numbers. Assign any available phone number to specific users to control access."}),(l==null?void 0:l.debug_info)&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-900",children:"Total VAPI Numbers:"}),e.jsx("div",{className:"text-blue-700",children:l.debug_info.total_vapi_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-900",children:"Assigned:"}),e.jsx("div",{className:"text-green-700",children:l.debug_info.assigned_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-orange-900",children:"Available:"}),e.jsx("div",{className:"text-orange-700",children:l.debug_info.unassigned_numbers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-900",children:"In Local DB:"}),e.jsx("div",{className:"text-purple-700",children:l.debug_info.in_local_db})]})]})})]}),e.jsx(T,{children:I.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No phone numbers found"}),e.jsx("p",{className:"text-muted-foreground",children:"No phone numbers are available for assignment."})]}):e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(g,{children:[e.jsx(r,{children:"Phone Number"}),e.jsx(r,{children:"Provider"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Assigned User"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(B,{children:I.map(n=>{var h;return e.jsxs(g,{children:[e.jsx(i,{className:"font-mono",children:n.number||"Unknown"}),e.jsx(i,{children:e.jsx(d,{variant:"outline",className:n.provider==="vapi"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700",children:((h=n.provider)==null?void 0:h.toUpperCase())||"VAPI"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[n.is_assigned?e.jsx(d,{variant:"default",className:"bg-green-100 text-green-800",children:"Assigned"}):e.jsx(d,{variant:"outline",className:"text-orange-600",children:"Available"}),n.is_in_local_db?e.jsx(d,{variant:"secondary",className:"text-xs",children:"In DB"}):e.jsx(d,{variant:"outline",className:"text-xs text-blue-600",children:"VAPI Only"})]})}),e.jsx(i,{children:n.user_name?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:n.user_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n.user_email})]}):e.jsx(d,{variant:"outline",className:"text-orange-600",children:"Unassigned"})}),e.jsx(i,{children:e.jsx("div",{className:"flex gap-2",children:n.is_assigned?e.jsxs($,{size:"sm",variant:"outline",onClick:()=>c(n),disabled:y.isPending||!n.is_in_local_db,title:n.is_in_local_db?"":"Cannot unassign phone number not in local database",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Unassign"]}):e.jsxs($,{size:"sm",variant:"outline",onClick:()=>_(n),disabled:j.isPending,children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"Assign"]})})})]},n.id)})})]})})]}),e.jsx(G,{open:b,onOpenChange:C,children:e.jsxs(Y,{children:[e.jsxs(W,{children:[e.jsx(X,{children:"Assign Phone Number"}),e.jsxs(J,{children:["Assign phone number ",o==null?void 0:o.number," to a user. Only the assigned user will be able to see and use this phone number."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select User"}),e.jsxs(ne,{value:v,onValueChange:q,children:[e.jsx(ae,{children:e.jsx(ie,{placeholder:"Choose a user to assign the phone number to"})}),e.jsx(re,{children:w.map(n=>e.jsx(M,{value:n.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[n.first_name||""," ",n.last_name||""]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.email})]})]})},n.id))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx($,{onClick:D,disabled:!v||j.isPending,children:j.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}),"Assigning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Assign Phone Number"]})})]})]})]})})]})},ze=()=>{var S,j,y,_,D,c,I,w,n,h,x,L;const{isSuperAdmin:o}=ge(),{data:m,isLoading:v,refetch:q}=A({queryKey:["debug-assignments"],queryFn:async()=>(await z.get("/api/phone-numbers/debug/assignments")).data,retry:1}),{data:b,isLoading:C,refetch:P}=A({queryKey:["debug-user-numbers"],queryFn:async()=>(await z.get("/api/phone-numbers/debug/user-numbers")).data,retry:1}),{data:l,isLoading:O,refetch:k}=A({queryKey:["regular-phone-numbers"],queryFn:async()=>(await z.get("/api/phone-numbers")).data,retry:1}),u=()=>{q(),P(),k()};return v||C||O?e.jsx(U,{children:e.jsx(T,{className:"flex items-center justify-center h-32",children:e.jsx(F,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(U,{children:e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-orange-600"}),e.jsx(Q,{children:"Phone Number Assignment Debug"})]}),e.jsx($,{onClick:u,variant:"outline",size:"sm",children:"Refresh All"})]}),e.jsx(je,{children:"Debug information for phone number assignments. This helps identify why assigned phone numbers might not be showing up for users."})]})}),e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Current User Debug Info"]})}),e.jsx(T,{children:b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"User ID:"})," ",(S=b.debug_info)==null?void 0:S.user_id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Is Super Admin:"})," ",(j=b.debug_info)!=null&&j.is_super_admin?"Yes":"No"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone Count:"})," ",(y=b.debug_info)==null?void 0:y.phone_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Is Super Admin (Hook):"})," ",o?"Yes":"No"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone Number IDs:"}),e.jsx("div",{className:"mt-2",children:((D=(_=b.debug_info)==null?void 0:_.phone_number_ids)==null?void 0:D.length)>0?b.debug_info.phone_number_ids.map(a=>e.jsx(d,{variant:"outline",className:"mr-2 mb-2",children:a},a)):e.jsx(d,{variant:"destructive",children:"No phone number IDs found"})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"User's Phone Numbers:"}),((c=b.data)==null?void 0:c.length)>0?e.jsxs(E,{className:"mt-2",children:[e.jsx(K,{children:e.jsxs(g,{children:[e.jsx(r,{children:"DB ID"}),e.jsx(r,{children:"Phone Number ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"User ID"})]})}),e.jsx(B,{children:b.data.map(a=>e.jsxs(g,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.phone_number_id||"N/A"}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.user_id})]},a.id))})]}):e.jsx(d,{variant:"destructive",className:"mt-2",children:"No phone numbers found for user"})]})]})})]}),o&&e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"All Phone Number Assignments"]})}),e.jsx(T,{children:m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Total:"})," ",(I=m.debug_info)==null?void 0:I.total_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned:"})," ",(w=m.debug_info)==null?void 0:w.assigned_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Unassigned:"})," ",(n=m.debug_info)==null?void 0:n.unassigned_count]})]}),((h=m.data)==null?void 0:h.length)>0?e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(g,{children:[e.jsx(r,{children:"DB ID"}),e.jsx(r,{children:"Phone Number ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Assigned User"}),e.jsx(r,{children:"User ID"})]})}),e.jsx(B,{children:m.data.map(a=>e.jsxs(g,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.phone_number_id||"N/A"}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.user_name?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.user_name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.user_email})]}):e.jsx(d,{variant:"outline",children:"Unassigned"})}),e.jsx(i,{children:a.user_id||"NULL"})]},a.id))})]}):e.jsx(d,{variant:"destructive",children:"No phone numbers found in database"})]})})]}),e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Regular Phone Numbers API Response"]})}),e.jsx(T,{children:l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Success:"})," ",l.success?"Yes":"No"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Count:"})," ",((x=l.data)==null?void 0:x.length)||0]}),((L=l.data)==null?void 0:L.length)>0?e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(g,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Number"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Created By"})]})}),e.jsx(B,{children:l.data.map(a=>e.jsxs(g,{children:[e.jsx(i,{children:a.id}),e.jsx(i,{children:a.number||"N/A"}),e.jsx(i,{children:a.status||"N/A"}),e.jsx(i,{children:a.created_by||a.user_name||"N/A"})]},a.id))})]}):e.jsx(d,{variant:"destructive",children:"No phone numbers returned by regular API"})]})})]})]})},ts=()=>{var le,de,ce,oe;const[o,m]=f.useState({country:"US",limit:10}),[v,q]=f.useState(null),[b,C]=f.useState(!1),[P,l]=f.useState(!1),[O,k]=f.useState(!1),[u,S]=f.useState("user"),[j,y]=f.useState({friendlyName:"",assistantId:""}),_=ue(),{isSuperAdmin:D}=ge(),{data:c,isLoading:I,error:w}=A({queryKey:["phoneNumbers"],queryFn:()=>Ke(),retry:1});me.useEffect(()=>{var s;c&&(console.log("Phone numbers data received:",c),((s=c==null?void 0:c.data)==null?void 0:s.length)>0&&console.log("First phone number structure:",c.data[0]))},[c]),me.useEffect(()=>{w&&console.error("Phone numbers fetch error:",w)},[w]);const{data:n,isLoading:h,refetch:x}=A({queryKey:["phoneNumbers","available",o],queryFn:()=>Be(o),enabled:!1}),{data:L}=A({queryKey:["assistants"],queryFn:()=>$e(1,""),retry:1}),a=H({mutationFn:Oe,onSuccess:()=>{_.invalidateQueries({queryKey:["phoneNumbers"]}),N.success("Phone number purchased successfully")},onError:s=>{var t,p;N.error(((p=(t=s.response)==null?void 0:t.data)==null?void 0:p.message)||"Failed to purchase phone number")}}),ee=H({mutationFn:({id:s,data:t})=>Re(s,t),onSuccess:()=>{_.invalidateQueries({queryKey:["phoneNumbers"]}),l(!1),N.success("Phone number updated successfully")},onError:s=>{var t,p;N.error(((p=(t=s.response)==null?void 0:t.data)==null?void 0:p.message)||"Failed to update phone number")}}),te=H({mutationFn:Ve,onSuccess:()=>{_.invalidateQueries({queryKey:["phoneNumbers"]}),N.success("Phone number deleted successfully")},onError:s=>{var t,p;N.error(((p=(t=s.response)==null?void 0:t.data)==null?void 0:p.message)||"Failed to delete phone number")}}),be=()=>{x()},Ne=s=>{a.mutate({number:s.number,friendlyName:s.friendlyName})},pe=s=>{q(s),y({friendlyName:s.friendlyName||"",assistantId:s.assistantId||"unassigned"}),l(!0)},fe=()=>{v&&ee.mutate({id:v.id,data:{...j,assistantId:j.assistantId==="unassigned"?"":j.assistantId}})},ve=s=>{confirm("Are you sure you want to delete this phone number?")&&te.mutate(s)},ye=s=>{const t={active:"default",inactive:"secondary",pending:"outline"};return e.jsx(d,{variant:t[s]||"outline",children:s})},we=((le=L==null?void 0:L.data)==null?void 0:le.assistants)||[];return w?e.jsx("div",{className:"app-shell-bg min-h-screen p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Phone Numbers"}),e.jsx("p",{className:"text-white/65",children:"Manage your phone numbers and purchase new ones"})]}),e.jsx("div",{className:"neo-card p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/65 mb-4",children:"Unable to connect to the backend API. Please ensure the backend server is running."}),e.jsx("button",{className:"neo-btn",onClick:()=>window.location.reload(),children:"Retry Connection"})]})})]})}):e.jsx("div",{className:"app-shell-bg min-h-screen",children:e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Phone Numbers"}),e.jsx("p",{className:"text-white/65",children:u==="admin"?"Manage phone number assignments for all users":"Get free AI CRUITMENT phone numbers."})]}),D&&e.jsxs("div",{className:"flex gap-2 mr-4",children:[e.jsx("button",{className:u==="user"?"neo-btn":"neo-topbar-btn px-4 py-2 rounded-lg text-white",onClick:()=>S("user"),children:"User View"}),e.jsx("button",{className:u==="admin"?"neo-btn":"neo-topbar-btn px-4 py-2 rounded-lg text-white",onClick:()=>S("admin"),children:"Admin Management"}),e.jsx("button",{className:u==="debug"?"neo-btn":"neo-topbar-btn px-4 py-2 rounded-lg text-white",onClick:()=>S("debug"),children:"Debug"})]}),u==="user"&&e.jsxs(G,{open:O,onOpenChange:k,children:[e.jsx(De,{asChild:!0,children:e.jsxs("button",{className:"neo-btn flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Create Phone Number"]})}),e.jsxs(Y,{className:"max-w-7xl max-h-[90vh] overflow-y-auto bg-[#0b0f2e] border border-white/10",children:[e.jsxs(W,{children:[e.jsx(X,{className:"text-white",children:"Create New Phone Number"}),e.jsx(J,{className:"text-white/65",children:"Get a free AI CRUITMENT phone number."})]}),e.jsx(Le,{onSuccess:()=>k(!1),onCancel:()=>k(!1)})]})]})]}),u==="admin"?e.jsx(He,{}):u==="debug"?e.jsx(ze,{}):e.jsxs(e.Fragment,{children:[e.jsx(G,{open:b,onOpenChange:C,children:e.jsxs(Y,{className:"max-w-4xl bg-[#0b0f2e] border border-white/10",children:[e.jsxs(W,{children:[e.jsx(X,{className:"text-white",children:"Search & Buy Phone Numbers"}),e.jsx(J,{className:"text-white/65",children:"Search for available phone numbers to purchase"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"country",className:"text-white",children:"Country"}),e.jsxs(ne,{value:o.country,onValueChange:s=>m(t=>({...t,country:s})),children:[e.jsx(ae,{children:e.jsx(ie,{})}),e.jsxs(re,{children:[e.jsx(M,{value:"US",children:"United States"}),e.jsx(M,{value:"CA",children:"Canada"}),e.jsx(M,{value:"GB",children:"United Kingdom"})]})]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"areaCode",className:"text-white",children:"Area Code"}),e.jsx(se,{id:"areaCode",value:o.areaCode||"",onChange:s=>m(t=>({...t,areaCode:s.target.value})),placeholder:"e.g., 415"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"contains",className:"text-white",children:"Contains"}),e.jsx(se,{id:"contains",value:o.contains||"",onChange:s=>m(t=>({...t,contains:s.target.value})),placeholder:"e.g., 1234"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:be,disabled:h,className:"neo-btn w-full flex items-center justify-center",children:[h?e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Search"]})})]}),n&&e.jsx("div",{className:"neo-card p-4 mt-4",children:e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(g,{className:"border-white/10",children:[e.jsx(r,{className:"text-white",children:"Number"}),e.jsx(r,{className:"text-white",children:"Location"}),e.jsx(r,{className:"text-white",children:"Capabilities"}),e.jsx(r,{className:"text-white",children:"Price/Month"}),e.jsx(r,{className:"text-white",children:"Action"})]})}),e.jsx(B,{children:(de=n.data)==null?void 0:de.map(s=>{var t,p,he;return e.jsxs(g,{className:"border-white/10",children:[e.jsx(i,{className:"font-mono text-white",children:s.number}),e.jsx(i,{className:"text-white",children:s.locality&&s.region?`${s.locality}, ${s.region}`:s.locality||s.region||"Unknown Location"}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-1",children:[((t=s.capabilities)==null?void 0:t.voice)&&e.jsx(d,{variant:"outline",children:"Voice"}),((p=s.capabilities)==null?void 0:p.sms)&&e.jsx(d,{variant:"outline",children:"SMS"}),((he=s.capabilities)==null?void 0:he.mms)&&e.jsx(d,{variant:"outline",children:"MMS"}),!s.capabilities&&e.jsx(d,{variant:"outline",children:"Unknown"})]})}),e.jsx(i,{className:"text-white",children:s.monthlyPrice!==void 0?`$${s.monthlyPrice}`:"Contact for pricing"}),e.jsx(i,{children:e.jsxs("button",{className:"neo-btn text-sm py-1 px-3 flex items-center",onClick:()=>Ne(s),disabled:a.isPending,children:[a.isPending?e.jsx(F,{className:"h-3 w-3 mr-1 animate-spin"}):e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Buy"]})})]},s.number)})})]})})]})]})}),e.jsxs("div",{className:"neo-card",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-white",children:[e.jsx(Z,{className:"h-5 w-5"}),"Your Phone Numbers"]}),e.jsx("p",{className:"text-white/65 mt-1",children:"Manage your purchased phone numbers and their assignments"})]}),e.jsx("div",{className:"p-6",children:I?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(F,{className:"h-8 w-8 animate-spin text-white"})}):e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(g,{className:"border-white/10",children:[e.jsx(r,{className:"text-white",children:"Number"}),e.jsx(r,{className:"text-white",children:"Created By"}),e.jsx(r,{className:"text-white",children:"Status"}),e.jsx(r,{className:"text-white",children:"Assigned Assistant"}),e.jsx(r,{className:"text-white",children:"Actions"})]})}),e.jsx(B,{children:((ce=c==null?void 0:c.data)==null?void 0:ce.length)===0?e.jsx(g,{className:"border-white/10",children:e.jsx(i,{colSpan:6,className:"text-center text-white/65",children:"No phone numbers found. Purchase your first number to get started."})}):(oe=c==null?void 0:c.data)==null?void 0:oe.map(s=>e.jsxs(g,{className:"border-white/10",children:[e.jsx(i,{className:"font-mono text-white",children:s.number||"Unknown"}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-white",children:s.created_by||s.user_name||"Unknown User"}),s.user_email&&e.jsx("span",{className:"text-xs text-white/65",children:s.user_email})]})}),e.jsx(i,{children:ye(s.status||"inactive")}),e.jsx(i,{children:s.assistantId?e.jsx(d,{variant:"secondary",children:"Assigned"}):e.jsx(d,{variant:"outline",children:"Unassigned"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"neo-topbar-btn px-3 py-1 rounded-lg text-white flex items-center",onClick:()=>pe(s),children:e.jsx(qe,{className:"h-3 w-3"})}),e.jsx("button",{className:"neo-topbar-btn px-3 py-1 rounded-lg text-white flex items-center",onClick:()=>ve(s.id),disabled:te.isPending,children:e.jsx(ke,{className:"h-3 w-3"})})]})})]},s.id))})]})})]}),e.jsx(G,{open:P,onOpenChange:l,children:e.jsxs(Y,{className:"bg-[#0b0f2e] border border-white/10",children:[e.jsxs(W,{children:[e.jsx(X,{className:"text-white",children:"Edit Phone Number"}),e.jsx(J,{className:"text-white/65",children:"Update the phone number settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"friendlyName",className:"text-white",children:"Friendly Name"}),e.jsx(se,{id:"friendlyName",value:j.friendlyName,onChange:s=>y(t=>({...t,friendlyName:s.target.value})),placeholder:"Enter a friendly name..."})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"assistantId",className:"text-white",children:"Assign to Assistant"}),e.jsxs(ne,{value:j.assistantId,onValueChange:s=>y(t=>({...t,assistantId:s})),children:[e.jsx(ae,{children:e.jsx(ie,{placeholder:"Select an assistant"})}),e.jsxs(re,{children:[e.jsx(M,{value:"unassigned",children:"Unassigned"}),we.map(s=>e.jsx(M,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("button",{onClick:fe,disabled:ee.isPending,className:"neo-btn w-full flex items-center justify-center",children:[ee.isPending&&e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}),"Update Phone Number"]})]})]})})]})]})})};export{ts as default};
//# sourceMappingURL=PhoneNumbers-DC_wqLdT.js.map
