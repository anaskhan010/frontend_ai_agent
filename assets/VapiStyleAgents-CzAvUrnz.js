import{j as e,br as ar,M as pe,as as Me,av as Ka,aT as ae,bs as rr,b5 as ke,a5 as re,aP as tr,bp as nr,ah as Oa,D as Te,N as Wa,K as ir,i as lr,aA as or,bt as cr,bu as dr,T as Ba,B as La,O as mr,bv as xr,aQ as be}from"./ui-U5SHHdCN.js";import{r as v,a as ur}from"./vendor-DG599jyl.js";import{b as Pe,u as hr,c as ye}from"./query-09wH2FJs.js";import{a as gr,c as pr,b as jr,u as fr,d as vr}from"./agentService-BdRWa5p6.js";import{t as N,u as br}from"./index-E85mAFiC.js";import{B as V}from"./button-Dzxhr_xW.js";import{I as b}from"./input-7y-mQAf4.js";import{B as P}from"./badge-Cpm2XFEm.js";import{C as B,b as $,c as A,a as L}from"./card-BJD3nNZo.js";import{T as yr,a as Nr,b as Ne,c as ne}from"./tabs-D83kt50N.js";import{A as we,a as Ce}from"./avatar-BaFmmKaC.js";import{_ as ie}from"./vapi-CWmUDqtF.js";import{D as Ve,a as Ee,b as Fe,c as _e}from"./dialog-L06_4tY7.js";import{S as I,a as S,b as M,c as k,d as c}from"./select-sdth0Nbs.js";import{g as wr,a as Cr,u as Ir}from"./defaultAssistantTemplateService-PYlacF1G.js";import{M as Ra,g as Ie,V as le,a as Se,T as Ua,b as $a,c as qa,d as Aa,e as za}from"./vapiProviders-0ZVktlER.js";import{T as H}from"./textarea-CDKN19yq.js";import"./router-BavLd_S0.js";import"./index-HDeFwIcs.js";const Sr=({agentId:R,agentName:E="AI Assistant",agentConfig:n,onCallStart:z,onCallEnd:a,onError:q})=>{const F="eb3b26e3-7dbb-4fd6-a545-a954756a43aa",w=v.useRef(null),[y,O]=v.useState({isConnected:!1,isConnecting:!1,isMuted:!1,volumeLevel:0,callDuration:0,status:"idle"}),[J,K]=v.useState([]),W=v.useRef(null),Y=F!=="your-vapi-public-key-here";console.log("ðŸ” VAPI Debug Info:"),console.log("- Vapi class available:",typeof ie),console.log("- Public API Key:",`${F.substring(0,8)}...`),console.log("- Is configured:",Y),v.useEffect(()=>{console.log("ðŸ”§ Initializing VAPI for agent:",R),console.log("ðŸ”‘ Public API Key:",`${F.substring(0,8)}...`),console.log("âœ… Is VAPI Configured:",Y);try{console.log("ðŸ§ª Testing VAPI import..."),console.log("- Vapi constructor:",ie),console.log("- typeof Vapi:",typeof ie),typeof ie=="function"?console.log("âœ… VAPI import successful"):console.error("âŒ VAPI import failed - not a constructor")}catch(t){console.error("âŒ VAPI import test failed:",t)}try{w.current=new ie(F),console.log("âœ… VAPI instance created successfully"),oe()}catch(t){console.error("âŒ Failed to initialize VAPI:",t),N.error("Failed to initialize VAPI. Please check your API key.")}return()=>{w.current&&w.current.stop(),W.current&&clearInterval(W.current)}},[F,R]);const oe=()=>{w.current&&(w.current.on("call-start",()=>{console.log("ðŸŽ™ï¸ VAPI call started"),O(t=>({...t,isConnected:!0,isConnecting:!1,status:"connected"})),ce(),N.success("Call connected! You can now speak."),z==null||z()}),w.current.on("call-end",()=>{console.log("ðŸ“ž VAPI call ended"),O(t=>({...t,isConnected:!1,isConnecting:!1,status:"ended"})),W.current&&(clearInterval(W.current),W.current=null),N.info("Call ended"),a==null||a()}),w.current.on("speech-start",()=>{console.log("ðŸ—£ï¸ Speech started")}),w.current.on("speech-end",()=>{console.log("ðŸ¤ Speech ended")}),w.current.on("volume-level",t=>{O(x=>({...x,volumeLevel:t}))}),w.current.on("message",t=>{if(console.log("ðŸ“¨ VAPI message:",t),t.type==="transcript"&&t.transcript){const x={role:t.role||"assistant",content:t.transcript,timestamp:new Date,type:"transcript"};K(i=>[...i,x])}}),w.current.on("error",t=>{console.error("âŒ VAPI error:",t),O(i=>({...i,isConnected:!1,isConnecting:!1,status:"error"}));let x="Unknown error";t.message&&(x=t.message,t.message.includes("assistant")&&t.message.includes("not found")?x="Assistant not found in VAPI. Please ensure the agent is properly synced with VAPI dashboard.":t.message.includes("unauthorized")||t.message.includes("401")?x="Unauthorized access. Please check your VAPI API key configuration.":(t.message.includes("microphone")||t.message.includes("permission"))&&(x="Microphone permission denied. Please allow microphone access and try again.")),N.error(`Call error: ${x}`),q==null||q(t)}))},ce=()=>{W.current=setInterval(()=>{O(t=>({...t,callDuration:t.callDuration+1}))},1e3)},j=t=>{const x=Math.floor(t/60),i=t%60;return`${x}:${i.toString().padStart(2,"0")}`},G=()=>{const t={name:E,firstMessage:(n==null?void 0:n.firstMessage)||`Hello! I'm ${E}. How can I help you today?`,model:{provider:"openai",model:"gpt-4",temperature:.7,messages:[{role:"system",content:(n==null?void 0:n.systemMessage)||`You are ${E}, a helpful AI assistant. Keep responses conversational and under 30 words when possible.`}]},voice:{provider:"vapi",voiceId:(n==null?void 0:n.voiceId)||"Cole"}};return console.log("ðŸ“‹ Assistant config created:",t),t},Q=async()=>{if(console.log("ðŸš€ Starting VAPI agent call for:",R),console.log("ðŸ”‘ VAPI Public Key:",`${F.substring(0,8)}...`),console.log("ðŸ¤– Agent Config:",n),!w.current){N.error("VAPI not initialized. Please check your API key configuration.");return}try{O(x=>({...x,isConnecting:!0,status:"connecting",callDuration:0})),K([]);const t=(n==null?void 0:n.assistant_id)||(n==null?void 0:n.assistantId);if(t){console.log("ðŸ“ž Using existing assistant ID from database:",t);const x={metadata:{portalAgentId:R,agentName:E,initiatedFrom:"portal"}};console.log("ðŸ“‹ Starting call with assistant ID:",t),console.log("ðŸ“‹ Assistant overrides:",x),await w.current.start(t,x)}else{console.log("ðŸ”„ Creating assistant configuration...");const x=G();console.log("ðŸ“ž Starting agent call with assistant config"),console.log("ðŸ¤– Agent Name:",E);const i=x;console.log("ðŸ“‹ Call config:",i),await new Promise(D=>setTimeout(D,100)),await w.current.start(i)}}catch(t){console.error("âŒ Error starting agent call:",t),O(i=>({...i,isConnecting:!1,status:"error"}));let x="Failed to start call";t.message?(x=t.message,t.message.includes("Authentication")||t.message.includes("401")?x="Authentication failed. Please check your VAPI API key.":t.message.includes("assistant")||t.message.includes("404")?x="Assistant not found. The assistant may not exist in VAPI.":t.message.includes("permission")||t.message.includes("microphone")?x="Microphone permission denied. Please allow microphone access.":(t.message.includes("network")||t.message.includes("fetch"))&&(x="Network error. Please check your internet connection.")):t.code?x=`Error code: ${t.code}`:typeof t=="string"&&(x=t),N.error(`Failed to start call: ${x}`),console.error("ðŸ“‹ Full error details:",t)}},de=()=>{console.log("ðŸ›‘ Stopping VAPI agent call..."),w.current&&w.current.stop()},je=()=>{if(w.current){const t=!y.isMuted;w.current.setMuted(t),O(x=>({...x,isMuted:t})),N.info(t?"Microphone muted":"Microphone unmuted")}},ee=()=>{const t=document.getElementById("call-button-container");return console.log("ðŸŽ¯ Looking for call-button-container:",t),t?(console.log("ðŸŽ¯ Rendering call button, call state:",y),ur.createPortal(e.jsxs("div",{className:"flex items-center gap-2",children:[y.isConnected&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-mono font-semibold text-gray-800 bg-white px-3 py-1 rounded-md border border-gray-200",children:j(y.callDuration)}),e.jsx(V,{onClick:je,variant:"outline",size:"sm",className:`border-gray-300 ${y.isMuted?"bg-red-50  text-red-700 hover:bg-red-100":"bg-white hover:bg-gray-50 text-gray-700"}`,children:y.isMuted?e.jsx(ar,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(V,{variant:"outline",size:"sm",className:"border-gray-300 bg-white hover:bg-gray-50 text-gray-700",children:e.jsx(Me,{className:"h-4 w-4"})})]}),!y.isConnected&&!y.isConnecting?e.jsxs(V,{onClick:Q,size:"sm",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Call"]}):y.isConnecting?e.jsxs(V,{size:"sm",className:"px-4 py-2 bg-amber-500 text-white text-sm font-medium rounded-md",disabled:!0,children:[e.jsx(ae,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting"]}):e.jsxs(V,{onClick:de,size:"sm",className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-all duration-200",children:[e.jsx(rr,{className:"h-4 w-4 mr-2"}),"End Call"]})]}),t)):(console.warn("âš ï¸ call-button-container not found!"),null)};console.log("ðŸŽ¯ VapiAgentCall render - isVapiConfigured:",Y),console.log("ðŸŽ¯ VapiAgentCall render - callState:",y),console.log("ðŸŽ¯ VapiAgentCall render - agentId:",R),console.log("ðŸŽ¯ VapiAgentCall render - agentName:",E);const[f,me]=v.useState(!1);return v.useEffect(()=>{const t=()=>document.getElementById("call-button-container")?(console.log("âœ… Found call-button-container"),me(!0),!0):(console.warn("âŒ call-button-container not found"),!1);if(t())return;const x=setInterval(()=>{t()&&clearInterval(x)},100);return()=>{clearInterval(x)}},[]),e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[ee(),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Conversation"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:J.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ke,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-center text-sm",children:y.isConnected?"Conversation will appear here...":"Start a call to begin the conversation"})]}):e.jsx("div",{className:"space-y-6",children:J.map((t,x)=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role==="assistant"&&e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(re,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:`max-w-[75%] ${t.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 border border-gray-200"} rounded-lg px-4 py-3`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${t.role==="user"?"text-blue-100":"text-gray-500"}`,children:t.role==="user"?"You":E}),e.jsx("span",{className:`text-xs ${t.role==="user"?"text-blue-200":"text-gray-400"}`,children:t.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.content})]}),t.role==="user"&&e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(tr,{className:"h-4 w-4 text-blue-600"})})]},x))})})]}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Assistant"}),e.jsx("p",{className:"font-medium text-gray-900",children:E})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wide mb-1",children:"Connection"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${y.status==="connected"?"bg-green-500":y.status==="connecting"?"bg-amber-500 animate-pulse":y.status==="error"?"bg-red-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-gray-700 capitalize",children:y.status==="idle"?"Ready":y.status==="connecting"?"Connecting":y.status==="connected"?"Active":y.status==="ended"?"Ended":"Error"})]})]})]})})]})},Mr=({open:R,onOpenChange:E,onTemplateSelect:n,onCreateCustom:z})=>{const[a,q]=v.useState(""),[F,w]=v.useState("all"),{data:y,isLoading:O}=Pe({queryKey:["defaultAssistantTemplates",{category:F!=="all"?F:void 0}],queryFn:()=>{const j={is_active:!0};return F!=="all"&&(j.category=F),wr(j)},enabled:R}),{data:J}=Pe({queryKey:["templateCategories"],queryFn:Cr,enabled:R}),K=(y==null?void 0:y.data)||[],W=(J==null?void 0:J.data)||[],Y=K.filter(j=>j.name.toLowerCase().includes(a.toLowerCase())||j.description.toLowerCase().includes(a.toLowerCase())||j.category.toLowerCase().includes(a.toLowerCase())),oe=async j=>{try{const G=await Ir(j.template_id);n(G.data),E(!1)}catch(G){console.error("Error using template:",G)}},ce=j=>({Business:"bg-blue-100 text-blue-800",Sales:"bg-green-100 text-green-800",Support:"bg-purple-100 text-purple-800",Scheduling:"bg-orange-100 text-orange-800",General:"bg-gray-100 text-gray-800"})[j]||"bg-gray-100 text-gray-800";return e.jsx(Ve,{open:R,onOpenChange:E,children:e.jsxs(Ee,{className:"max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsx(Fe,{children:e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),"Choose How to Create Your Assistant"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(B,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 border-blue-200 bg-blue-50",children:[e.jsx($,{className:"pb-3",children:e.jsxs(A,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(nr,{className:"h-5 w-5"}),"Use Default Template"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"Start with a pre-configured template designed for specific use cases. Perfect for quick setup with proven configurations."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[e.jsx(Oa,{className:"h-3 w-3"}),"Recommended for beginners"]})]})]}),e.jsxs(B,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 border-gray-200",onClick:()=>{z(),E(!1)},children:[e.jsx($,{className:"pb-3",children:e.jsxs(A,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(Te,{className:"h-5 w-5"}),"Create Custom Assistant"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-700 text-sm mb-4",children:"Build your assistant from scratch with full control over all settings. Ideal for specific requirements and advanced users."}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(re,{className:"h-3 w-3"}),"Full customization available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Available Templates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(b,{placeholder:"Search templates...",value:a,onChange:j=>q(j.target.value),className:"pl-10 w-64"})]}),e.jsxs(I,{value:F,onValueChange:w,children:[e.jsxs(S,{className:"w-48",children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),e.jsx(M,{placeholder:"Category"})]}),e.jsxs(k,{children:[e.jsx(c,{value:"all",children:"All Categories"}),W.map(j=>e.jsxs(c,{value:j.category,children:[j.category," (",j.count,")"]},j.category))]})]})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:O?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((j,G)=>e.jsxs(B,{className:"animate-pulse",children:[e.jsxs($,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},G))}):Y.length===0?e.jsx(B,{children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(re,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a||F!=="all"?"Try adjusting your search or filter criteria.":"No templates are currently available."}),e.jsx(V,{onClick:()=>{z(),E(!1)},children:"Create Custom Assistant Instead"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(j=>e.jsxs(B,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>oe(j),children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(A,{className:"text-base flex items-center gap-2",children:[j.is_featured&&e.jsx(Oa,{className:"h-4 w-4 text-yellow-500 fill-current"}),j.name]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx(P,{className:ce(j.category),children:j.category})})]}),e.jsx(lr,{className:"h-4 w-4 text-gray-400"})]})}),e.jsxs(L,{className:"pt-0",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:j.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(or,{className:"h-3 w-3"}),j.usage_count||0," uses"]}),e.jsx(V,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs",children:"Use Template"})]})]})]},j.template_id))})})]})]})]})})},kr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BASE_URL:"https://ai.research-hero.com",VITE_FACEBOOK_REDIRECT_URI:"https://ai.research-hero.com/api/auth/facebook/callback",VITE_FRONTEND_URL:"https://aiagent.research-hero.com",VITE_GMAIL_CLIENT_ID:"686955346191-el9qo3bhbgfo7fk4juanq8bq7g7iis7d.apps.googleusercontent.com",VITE_GMAIL_REDIRECT_URI:"https://ai.research-hero.com/api/gmail/auth/callback",VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51S8GFm2MMm3Fy1PB45KAluHAtFTOmAY9qKUE4sITR1TA1zfX97ON36OAcAALplq6LbLgqXaTyY0hRB7ae55LzpBQ00DfkbC8oy",VITE_VAPI_BASE_URL:"https://api.vapi.ai",VITE_VAPI_PUBLIC_KEY:"eb3b26e3-7dbb-4fd6-a545-a954756a43aa"},Gr=()=>{var Ue,$e,qe,Ae,ze,Ke,We,He,Ye,Ge,Qe,Je,Xe,Ze,De,es,ss,as,rs,ts,ns,is,ls,os,cs,ds,ms,xs,us,hs,gs,ps,js,fs,vs,bs,ys,Ns,ws,Cs,Is,Ss,Ms,ks,Ts,Ps,Vs,Es,Fs,_s,Os,Bs,Ls,Rs,Us,$s,qs,As,zs,Ks,Ws,Hs,Ys,Gs,Qs,Js,Xs,Zs,Ds,ea,sa,aa,ra,ta,na,ia,la;const[R,E]=v.useState(""),[n,z]=v.useState(null),[a,q]=v.useState(null),[F,w]=v.useState(!1),[y,O]=v.useState(!1),[J,K]=v.useState(!1),[W,Y]=v.useState(!1),[oe,ce]=v.useState(!1),[j,G]=v.useState(null),[Q,de]=v.useState(null),[je,ee]=v.useState(!1),[f,me]=v.useState(null),[t,x]=v.useState(new Set);console.log("ðŸ” Environment Debug:"),console.log("- VITE_VAPI_PUBLIC_KEY:",`${"eb3b26e3-7dbb-4fd6-a545-a954756a43aa".substring(0,8)}...`),console.log("- All env vars:",kr);const[i,D]=v.useState({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"vapi",voiceId:"Cole",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),xe=hr(),{user:_}=br(),{data:se,isLoading:Ha}=Pe({queryKey:["syncedAgents",_==null?void 0:_.id,R],queryFn:()=>gr(R),staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!(_!=null&&_.id),placeholderData:s=>s,retry:(s,r)=>{var o;return[404,204,402].includes((o=r==null?void 0:r.response)==null?void 0:o.status)?!1:s<2}}),ue=ye({mutationFn:pr,onSuccess:s=>{console.log("âœ… Assistant created successfully:",s),N.success(`Assistant "${i.name}" created successfully!`),K(!1),D({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"office",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),xe.invalidateQueries({queryKey:["syncedAgents"]}),xe.invalidateQueries({queryKey:["agents"]})},onError:s=>{var d,o,u,h,p,g;console.error("âŒ Error creating assistant:",s);let r="Failed to create assistant";(o=(d=s.response)==null?void 0:d.data)!=null&&o.message?r=s.response.data.message:(h=(u=s.response)==null?void 0:u.data)!=null&&h.error?r=s.response.data.error:s.message&&(r=s.message),N.error(`Creation failed: ${r}`),console.error("Detailed error:",{status:(p=s.response)==null?void 0:p.status,data:(g=s.response)==null?void 0:g.data,message:s.message})}}),he=ye({mutationFn:({id:s,data:r})=>fr(s,r),onSuccess:(s,r)=>{console.log("âœ… Assistant updated successfully:",s);const d=Object.keys(r.data)[0];N.success(`${d} updated successfully`),xe.invalidateQueries({queryKey:["syncedAgents",_==null?void 0:_.id]}),n&&Le(n.id)},onError:(s,r)=>{var u,h,p,g,C,X;console.error("âŒ Error updating assistant:",s);let d="Failed to update assistant";(h=(u=s.response)==null?void 0:u.data)!=null&&h.message?d=s.response.data.message:(g=(p=s.response)==null?void 0:p.data)!=null&&g.error?d=s.response.data.error:s.message&&(d=s.message);const o=Object.keys(r.data)[0];N.error(`Failed to update ${o}: ${d}`),console.error("Update error details:",{field:o,value:r.data[o],status:(C=s.response)==null?void 0:C.status,data:(X=s.response)==null?void 0:X.data,message:s.message})}}),ge=ye({mutationFn:vr,onSuccess:s=>{console.log("âœ… Delete success:",s),N.success(`Assistant "${f==null?void 0:f.name}" deleted successfully!`),ee(!1),me(null),n&&f&&n.id===f.id&&(z(null),q(null)),xe.invalidateQueries({queryKey:["syncedAgents",_==null?void 0:_.id]})},onError:s=>{var o,u,h,p,g,C;console.error("âŒ Error deleting assistant:",s);let r="Unknown error occurred";(u=(o=s.response)==null?void 0:o.data)!=null&&u.message?r=s.response.data.message:(p=(h=s.response)==null?void 0:h.data)!=null&&p.error?r=s.response.data.error:s.message&&(r=s.message);const d=(f==null?void 0:f.name)||"Assistant";N.error(`Failed to delete ${d}: ${r}`),console.error("Delete error details:",{assistantId:f==null?void 0:f.id,assistantName:f==null?void 0:f.name,status:(g=s.response)==null?void 0:g.status,data:(C=s.response)==null?void 0:C.data,message:s.message})}}),U=(se==null?void 0:se.data)||[],Oe=(_==null?void 0:_.isSuperAdmin)||!1,Be=(se==null?void 0:se.total)||U.length;v.useEffect(()=>{if(U.length>0){console.log("ðŸ” Agent data structure (first agent):",U[0]),console.log("ðŸ” Total agents loaded:",U.length),console.log("ðŸ‘‘ Pagination disabled (Super Admin):",Oe),console.log("ðŸ“Š Total assistants available:",Be);const s=new Set;U.forEach((r,d)=>{((r.assistant_data||{}).metadata||{}).published===!0&&s.add(String(r.id)),d<3&&console.log(`ðŸ” Agent ${d+1}:`,{name:r.name,localId:r.id,assistantId:r.assistant_id,hasAssistantId:!!r.assistant_id,structure:Object.keys(r)})}),x(s),console.log("ðŸ“Š Initialized published agents from metadata:",Array.from(s))}},[U]),v.useEffect(()=>{var s,r;U.length>0&&!n&&(console.log("Available agents:",U),console.log("First agent ID:",(s=U[0])==null?void 0:s.id,"Type:",typeof((r=U[0])==null?void 0:r.id)),z(U[0]))},[U,n]),v.useEffect(()=>{if(n&&n.id){const s=n.assistant_id||n.id;console.log("ðŸ” Loading agent details:",{agentName:n.name,localId:n.id,assistantId:n.assistant_id,usingId:s,idType:n.assistant_id?"VAPI UUID":"Local ID"}),Le(s)}},[n]);const Ya=s=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s),Le=async s=>{var r,d,o,u,h,p,g,C,X,te,oa,ca,da,ma,xa,ua,ha,ga,pa,ja,fa,va,ba,ya,Na,wa,Ca,Ia,Sa,Ma,ka,Ta,Pa,Va,Ea,Fa,_a;w(!0);try{const Z=String(s);Ya(Z)||console.warn("Agent ID is not a valid UUID:",Z,"- will try to load details anyway"),console.log("ðŸ” Fetching complete VAPI details for agent:",Z);const ve=await jr(Z);console.log("ðŸ“‹ Complete VAPI agent details:",ve);const l=ve.data||ve;q({name:l.name||(n==null?void 0:n.name),firstMessage:l.firstMessage||(n==null?void 0:n.firstMessage),firstMessageMode:l.firstMessageMode||"assistant-speaks-first",firstMessageInterruptionsEnabled:l.firstMessageInterruptionsEnabled||!1,model:{provider:((r=l.model)==null?void 0:r.provider)||"openai",model:((d=l.model)==null?void 0:d.model)||"gpt-4",temperature:((o=l.model)==null?void 0:o.temperature)||.7,maxTokens:((u=l.model)==null?void 0:u.maxTokens)||1e3,numFastTurns:((h=l.model)==null?void 0:h.numFastTurns)||0,messages:((p=l.model)==null?void 0:p.messages)||[],tools:((g=l.model)==null?void 0:g.tools)||[],toolIds:((C=l.model)==null?void 0:C.toolIds)||[],knowledgeBase:(X=l.model)==null?void 0:X.knowledgeBase,knowledgeBaseId:(te=l.model)==null?void 0:te.knowledgeBaseId,emotionRecognitionEnabled:((oa=l.model)==null?void 0:oa.emotionRecognitionEnabled)||!1,thinking:((ca=l.model)==null?void 0:ca.thinking)||{type:"disabled"}},voice:{provider:((da=l.voice)==null?void 0:da.provider)||"11labs",voiceId:((ma=l.voice)==null?void 0:ma.voiceId)||"21m00Tcm4TlvDq8ikWAM",speed:((xa=l.voice)==null?void 0:xa.speed)||1,stability:(ua=l.voice)==null?void 0:ua.stability,similarityBoost:(ha=l.voice)==null?void 0:ha.similarityBoost,cachingEnabled:((ga=l.voice)==null?void 0:ga.cachingEnabled)||!1,chunkPlan:((pa=l.voice)==null?void 0:pa.chunkPlan)||{enabled:!1},fallbackPlan:(ja=l.voice)==null?void 0:ja.fallbackPlan},transcriber:{provider:((fa=l.transcriber)==null?void 0:fa.provider)||"deepgram",model:((va=l.transcriber)==null?void 0:va.model)||"nova-2",language:((ba=l.transcriber)==null?void 0:ba.language)||"en",confidenceThreshold:((ya=l.transcriber)==null?void 0:ya.confidenceThreshold)||.4,endOfTurnConfidenceThreshold:((Na=l.transcriber)==null?void 0:Na.endOfTurnConfidenceThreshold)||.7,minEndOfTurnSilenceWhenConfident:((wa=l.transcriber)==null?void 0:wa.minEndOfTurnSilenceWhenConfident)||160,maxTurnSilence:((Ca=l.transcriber)==null?void 0:Ca.maxTurnSilence)||400,wordFinalizationMaxWaitTime:((Ia=l.transcriber)==null?void 0:Ia.wordFinalizationMaxWaitTime)||160,enableUniversalStreamingApi:((Sa=l.transcriber)==null?void 0:Sa.enableUniversalStreamingApi)||!1,formatTurns:((Ma=l.transcriber)==null?void 0:Ma.formatTurns)||!1,disablePartialTranscripts:((ka=l.transcriber)==null?void 0:ka.disablePartialTranscripts)||!1,keywords:((Ta=l.transcriber)==null?void 0:Ta.keywords)||[],wordBoost:((Pa=l.transcriber)==null?void 0:Pa.wordBoost)||[]},systemMessage:((Fa=(Ea=(Va=l.model)==null?void 0:Va.messages)==null?void 0:Ea[0])==null?void 0:Fa.content)||l.systemMessage||"You are a helpful AI assistant.",endCallMessage:l.endCallMessage,voicemailMessage:l.voicemailMessage,endCallPhrases:l.endCallPhrases||[],functions:l.functions||[],tools:l.tools||[],customFunctions:l.customFunctions,variableValues:l.variableValues,maxDurationSeconds:l.maxDurationSeconds||600,backgroundSound:l.backgroundSound||"off",modelOutputInMessagesEnabled:l.modelOutputInMessagesEnabled||!1,backgroundDenoisingEnabled:l.backgroundDenoisingEnabled||!1,clientMessages:l.clientMessages,serverMessages:l.serverMessages,transportConfigurations:l.transportConfigurations||[],server:l.server,observabilityPlan:l.observabilityPlan,startSpeakingPlan:l.startSpeakingPlan,stopSpeakingPlan:l.stopSpeakingPlan,credentialIds:l.credentialIds||[],metadata:l.metadata||{},createdAt:l.createdAt,updatedAt:l.updatedAt,_rawVapiData:l})}catch(Z){console.error("Error loading agent details:",Z),console.error("Error details:",((_a=Z.response)==null?void 0:_a.data)||Z.message),q({model:{provider:"OpenAI",model:"GPT-4"},voice:{provider:"11Labs",voiceId:"Default Voice"},transcriber:{provider:"Deepgram"},systemMessage:"You are a helpful AI assistant."})}finally{w(!1)}},fe=s=>s?s.split(" ").map(r=>r.charAt(0)).join("").toUpperCase().substring(0,2):"NA",T=(s,r)=>{if(s.includes(".")){const[d,o]=s.split(".");D(u=>({...u,[d]:{...u[d],[o]:r}}))}else D(d=>({...d,[s]:r}))},Ga=()=>{var r,d,o;const s=[];return(r=i.name)!=null&&r.trim()||s.push("Assistant name is required"),(d=i.firstMessage)!=null&&d.trim()||s.push("First message is required"),(o=i.systemMessage)!=null&&o.trim()||s.push("System message is required"),i.model.provider||s.push("Model provider is required"),i.model.model||s.push("Model selection is required"),(i.model.temperature<0||i.model.temperature>2)&&s.push("Temperature must be between 0 and 2"),(i.model.maxTokens<1||i.model.maxTokens>32e3)&&s.push("Max tokens must be between 1 and 32000"),i.voice.provider||s.push("Voice provider is required"),i.voice.voiceId||s.push("Voice selection is required"),(i.voice.speed<.25||i.voice.speed>4)&&s.push("Voice speed must be between 0.25 and 4"),i.transcriber.provider||s.push("Transcriber provider is required"),i.transcriber.model||s.push("Transcriber model is required"),i.transcriber.language||s.push("Transcriber language is required"),(i.maxDurationSeconds<10||i.maxDurationSeconds>43200)&&s.push("Max duration must be between 10 and 43200 seconds"),s},Qa=()=>{const s=Ga();if(s.length>0){N.error(`Please fix the following errors:
${s.join(`
`)}`);return}if(i.name.length>40){N.error("Assistant name must be 40 characters or less");return}if(i.endCallMessage&&i.endCallMessage.length>1e3){N.error("End call message must be 1000 characters or less");return}if(i.voicemailMessage&&i.voicemailMessage.length>1e3){N.error("Voicemail message must be 1000 characters or less");return}console.log("âœ… Form validation passed, creating assistant...");const r={...i,firstMessageMode:i.firstMessageMode,backgroundSound:i.backgroundSound,transcriber:{...i.transcriber,provider:i.transcriber.provider},voice:{...i.voice,provider:i.voice.provider},systemMessage:void 0,model:{...i.model,provider:i.model.provider,messages:[{role:"system",content:i.systemMessage}]}};console.log("ðŸ”„ Transformed form data for VAPI:",r),ue.mutate(r)},Ja=s=>{var r,d,o,u,h,p,g,C,X,te;console.log("ðŸŽ¯ Template selected:",s),D({name:s.name||"",firstMessage:s.first_message||"",systemMessage:s.system_message||"You are a helpful AI assistant.",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:s.end_call_message||"",voicemailMessage:"",endCallPhrases:s.end_call_phrases||[],maxDurationSeconds:s.max_duration_seconds||600,backgroundSound:s.background_sound||"off",model:{provider:((r=s.model)==null?void 0:r.provider)||"openai",model:((d=s.model)==null?void 0:d.model)||"gpt-4",temperature:((o=s.model)==null?void 0:o.temperature)||.7,maxTokens:((u=s.model)==null?void 0:u.maxTokens)||1e3,numFastTurns:((h=s.model)==null?void 0:h.numFastTurns)||0},voice:{provider:((p=s.voice)==null?void 0:p.provider)||"vapi",voiceId:((g=s.voice)==null?void 0:g.voiceId)||"Cole",speed:((C=s.voice)==null?void 0:C.speed)||1},transcriber:{provider:((X=s.transcriber)==null?void 0:X.provider)||"deepgram",model:"nova-2",language:((te=s.transcriber)==null?void 0:te.language)||"en"}}),K(!0)},Xa=()=>{D({name:"",firstMessage:"",systemMessage:"",firstMessageMode:"assistant-speaks-first",firstMessageInterruptionsEnabled:!1,endCallMessage:"",voicemailMessage:"",endCallPhrases:[],maxDurationSeconds:600,backgroundSound:"off",model:{provider:"openai",model:"gpt-4",temperature:.7,maxTokens:1e3,numFastTurns:0},voice:{provider:"11labs",voiceId:"21m00Tcm4TlvDq8ikWAM",speed:1},transcriber:{provider:"deepgram",model:"nova-2",language:"en"}}),K(!0)},Re=(s,r)=>{if(!s)return"";const d=s.toLowerCase().trim();return(r==="model"?{openai:"openai","open-ai":"openai",anthropic:"anthropic",groq:"groq",together:"together",anyscale:"anyscale"}:{"11labs":"11labs",elevenlabs:"11labs","eleven-labs":"11labs",openai:"openai","open-ai":"openai",azure:"azure",playht:"playht","play-ht":"playht",deepgram:"deepgram",cartesia:"cartesia",lmnt:"lmnt"})[d]||d},m=(s,r)=>{if(!n){console.warn("No selected agent for field update");return}console.log("ðŸ”„ Field update:",s,"Value:",r,"Type:",typeof r,"Agent ID:",n.id),Q&&clearTimeout(Q),q(o=>{const u={...o};if(s.includes(".")){const[h,p]=s.split(".");if(u[h]={...u[h],[p]:r},s==="model.provider"){const g=qa(r);g&&(u.model.model=g,console.log("ðŸ¤– Auto-selected model:",g,"for provider:",r))}else if(s==="voice.provider"){const g=Aa(r);g&&(u.voice.voiceId=g,console.log("ðŸŽ¤ Auto-selected voice:",g,"for provider:",r))}else if(s==="transcriber.provider"){const g=za(r);g&&(u.transcriber.model=g,console.log("ðŸ“ Auto-selected transcriber model:",g,"for provider:",r))}}else u[s]=r;return u});const d=setTimeout(()=>{const o={},u=["status","published","publishedAt","systemMessage"];if(s.includes(".")){const[p,g]=s.split(".");if(u.includes(p)||u.includes(g)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}if(o[p]={...a[p],[g]:r},s==="model.provider"){const C=qa(r);C&&(o.model.model=C)}else if(s==="voice.provider"){const C=Aa(r);C&&(o.voice.voiceId=C)}else if(s==="transcriber.provider"){const C=za(r);C&&(o.transcriber.model=C)}}else{if(u.includes(s)){console.log("âš ï¸ Skipping VAPI update for local-only field:",s);return}o[s]=r}console.log("ðŸ”„ Auto-saving field:",s,"with value:",r,"updateData:",o);const h=n.assistant_id||n.id;console.log("ðŸ” Using assistant ID for VAPI:",h,"Type:",typeof h),he.mutate({id:String(h),data:o})},1e3);de(d)},Za=s=>{if(!n){console.warn("No selected agent for system message update");return}console.log("ðŸ”„ System message update:",s),Q&&clearTimeout(Q),q(d=>{const o={...d};return o.systemMessage=s,o.model||(o.model={}),o.model.messages||(o.model.messages=[]),o.model.messages.length===0?o.model.messages.push({role:"system",content:s}):o.model.messages[0].role==="system"?o.model.messages[0].content=s:o.model.messages.unshift({role:"system",content:s}),o});const r=setTimeout(()=>{var p;const o=[...((p=a==null?void 0:a.model)==null?void 0:p.messages)||[]];o.length===0?o.push({role:"system",content:s}):o[0].role==="system"?o[0].content=s:o.unshift({role:"system",content:s});const u={model:{...a==null?void 0:a.model,messages:o}};console.log("ðŸ”„ Auto-saving system message via model.messages:",u);const h=n.assistant_id||n.id;console.log("ðŸ” Using assistant ID for system message update:",h),he.mutate({id:String(h),data:u})},1e3);de(r)};v.useEffect(()=>()=>{Q&&clearTimeout(Q)},[Q]);const Da=s=>{me(s),ee(!0)},er=()=>{if(f){const s=f.assistant_id||f.id;console.log("ðŸ—‘ï¸ Deleting agent:",f.id,f.name,"Using assistant_id:",s),ge.mutate(String(s))}else N.error("No agent selected for deletion")},sr=async s=>{var o,u;if(!s||!s.id)return;const r=String(s.id),d=t.has(r);try{console.log(`ðŸ”„ ${d?"Unpublishing":"Publishing"} agent:`,s.name);const h={metadata:{...a==null?void 0:a.metadata,published:!d,publishedAt:d?null:new Date().toISOString()}},p=s.assistant_id||s.id;console.log("ðŸ” Using assistant ID for VAPI publish:",p,"Type:",typeof p),await he.mutateAsync({id:String(p),data:h});const g=new Set(t);d?(g.delete(r),N.success(`${s.name} unpublished successfully`)):(g.add(r),N.success(`${s.name} published successfully`)),x(g),n&&n.id===s.id&&q(C=>({...C,metadata:h.metadata}))}catch(h){console.error("âŒ Error toggling publish status:",h);let p="Failed to update publish status";(u=(o=h.response)==null?void 0:o.data)!=null&&u.message?p=h.response.data.message:h.message&&(p=h.message),N.error(`Failed to ${d?"unpublish":"publish"} ${s.name}: ${p}`)}};return e.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-white to-gray-50",children:[e.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white/80 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Assistants"}),Oe&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(P,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:[e.jsx(cr,{className:"h-3 w-3 mr-1"}),"Super Admin View"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Showing all ",Be," assistants"]})]})]}),e.jsxs(V,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>Y(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Assistant"]}),e.jsx(Ve,{open:J,onOpenChange:K,children:e.jsxs(Ee,{className:"sm:max-w-[1200px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Fe,{children:e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),"Create New Assistant"]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name *"}),e.jsx(b,{value:i.name,onChange:s=>T("name",s.target.value),placeholder:"Enter assistant name",className:`mt-1 ${(Ue=i.name)!=null&&Ue.trim()?"":"border-red-300"}`,maxLength:40}),!(($e=i.name)!=null&&$e.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Assistant name is required"}),i.name&&i.name.length>40&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Name must be 40 characters or less"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message *"}),e.jsx(H,{value:i.firstMessage,onChange:s=>T("firstMessage",s.target.value),placeholder:"Hello! How can I help you today?",className:`mt-1 ${(qe=i.firstMessage)!=null&&qe.trim()?"":"border-red-300"}`,rows:3}),!((Ae=i.firstMessage)!=null&&Ae.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"First message is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message *"}),e.jsx(H,{value:i.systemMessage,onChange:s=>T("systemMessage",s.target.value),placeholder:"You are a helpful AI assistant...",className:`mt-1 ${(ze=i.systemMessage)!=null&&ze.trim()?"":"border-red-300"}`,rows:4}),!((Ke=i.systemMessage)!=null&&Ke.trim())&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"System message is required"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Model Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:i.model.provider,onValueChange:s=>T("model.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:Ra.map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(I,{value:i.model.model,onValueChange:s=>T("model.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:Ie(i.model.provider).map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(b,{type:"number",min:"0",max:"2",step:"0.1",value:i.model.temperature,onChange:s=>T("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(b,{type:"number",min:"1",max:"32000",value:i.model.maxTokens,onChange:s=>T("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(b,{type:"number",min:"0",max:"10",value:i.model.numFastTurns,onChange:s=>T("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Voice Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:i.voice.provider,onValueChange:s=>T("voice.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:le.map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(I,{value:i.voice.voiceId,onValueChange:s=>T("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:Se(i.voice.provider).map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(b,{type:"number",min:"0.25",max:"4",step:"0.1",value:i.voice.speed,onChange:s=>T("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Transcriber Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:i.transcriber.provider,onValueChange:s=>T("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:Ua.map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(I,{value:i.transcriber.model,onValueChange:s=>T("transcriber.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:$a(i.transcriber.provider).map(s=>e.jsx(c,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(I,{value:i.transcriber.language,onValueChange:s=>T("transcriber.language",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"en",children:"English"}),e.jsx(c,{value:"es",children:"Spanish"}),e.jsx(c,{value:"fr",children:"French"}),e.jsx(c,{value:"de",children:"German"}),e.jsx(c,{value:"it",children:"Italian"}),e.jsx(c,{value:"pt",children:"Portuguese"}),e.jsx(c,{value:"ru",children:"Russian"}),e.jsx(c,{value:"ja",children:"Japanese"}),e.jsx(c,{value:"ko",children:"Korean"}),e.jsx(c,{value:"zh",children:"Chinese"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Advanced Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(I,{value:i.firstMessageMode,onValueChange:s=>T("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(c,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(c,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(b,{type:"number",min:"10",max:"43200",value:i.maxDurationSeconds,onChange:s=>T("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(I,{value:i.backgroundSound,onValueChange:s=>T("backgroundSound",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"off",children:"Off"}),e.jsx(c,{value:"office",children:"Office"}),e.jsx(c,{value:"cafe",children:"Cafe"}),e.jsx(c,{value:"nature",children:"Nature"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:i.firstMessageInterruptionsEnabled,onChange:s=>T("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(H,{value:i.endCallMessage,onChange:s=>T("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(H,{value:i.voicemailMessage,onChange:s=>T("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(V,{variant:"outline",onClick:()=>K(!1),disabled:ue.isPending,children:"Cancel"}),e.jsx(V,{onClick:Qa,disabled:ue.isPending||!i.name||!i.firstMessage,className:"bg-blue-600 hover:bg-blue-700",children:ue.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Assistant"]})})]})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(b,{placeholder:"Search Assistants",value:R,onChange:s=>E(s.target.value),className:"pl-10 bg-gray-50 border-gray-200"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Ha?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(ae,{className:"h-6 w-6 animate-spin text-gray-400"})}):e.jsx("div",{className:"p-2",children:U.filter(s=>s&&s.id&&s.name).map(s=>e.jsx("div",{onClick:()=>z(s),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 mb-2 ${(n==null?void 0:n.id)===s.id?"bg-green border border-blue-200":"hover:bg-gray-50 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(we,{className:"h-10 w-10 bg-gray-600",children:e.jsx(Ce,{className:"text-white bg-green font-medium",children:fe(s.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.name}),t.has(String(s.id))&&e.jsx(P,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs",children:"Published"})]}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:s.assistant_id?`${String(s.assistant_id).substring(0,12)}...`:"No Assistant ID"})]})]})},s.id))})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(we,{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Ce,{className:"text-white bg-green font-medium text-lg",children:fe(n.name)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:n.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx(P,{variant:"secondary",className:"bg-green-100 text-green-700",children:"Active"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",String(n.id).substring(0,12),"..."]}),he.isPending&&e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ae,{className:"h-3 w-3 mr-1 animate-spin"}),"Auto-saving..."]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(V,{size:"sm",onClick:()=>O(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),"Talk to Assistant"]}),e.jsx(V,{variant:t.has(String(n.id))?"default":"outline",size:"sm",onClick:()=>sr(n),className:t.has(String(n.id))?"bg-green-600 hover:bg-green-700 text-white":"text-gray-600 hover:text-gray-700 hover:bg-gray-50",children:t.has(String(n.id))?"Published":"Unpublished"}),e.jsx(V,{variant:"outline",size:"sm",onClick:()=>Da(n),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:e.jsx(Ba,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:F?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ae,{className:"h-8 w-8 animate-spin text-gray-400"})}):e.jsxs(yr,{defaultValue:"model",className:"w-full",children:[e.jsxs(Nr,{className:"grid w-full grid-cols-11 mb-6",children:[e.jsxs(Ne,{value:"model",className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4"}),"Model"]}),e.jsxs(Ne,{value:"voice",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Voice"]}),e.jsxs(Ne,{value:"transcriber",className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Transcriber"]})]}),e.jsxs(ne,{value:"model",className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5 text-blue-600"}),"Model Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:Re(((We=a==null?void 0:a.model)==null?void 0:We.provider)||"","model"),onValueChange:s=>m("model.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{placeholder:((He=a==null?void 0:a.model)==null?void 0:He.provider)||"Select provider"})}),e.jsx(k,{children:Ra.map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(P,{variant:"outline",className:"text-xs",children:"API Key"})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(I,{value:((Ye=a==null?void 0:a.model)==null?void 0:Ye.model)||"",onValueChange:s=>m("model.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{placeholder:((Ge=a==null?void 0:a.model)==null?void 0:Ge.model)||"Select model"})}),e.jsxs(k,{children:[Ie(((Qe=a==null?void 0:a.model)==null?void 0:Qe.provider)||"openai").map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.supportsTools&&e.jsx(P,{variant:"outline",className:"text-xs",children:"Tools"}),s.supportsVision&&e.jsx(P,{variant:"outline",className:"text-xs",children:"Vision"}),s.costTier&&e.jsx(P,{variant:s.costTier==="low"?"secondary":s.costTier==="medium"?"default":"destructive",className:"text-xs",children:s.costTier})]})]})},s.id)),((Je=a==null?void 0:a.model)==null?void 0:Je.model)&&!Ie(((Xe=a==null?void 0:a.model)==null?void 0:Xe.provider)||"openai").some(s=>s.id===a.model.model)&&e.jsxs(c,{value:a.model.model,children:[a.model.model," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),e.jsx(b,{type:"number",min:"0",max:"2",step:"0.1",value:((Ze=a==null?void 0:a.model)==null?void 0:Ze.temperature)||.7,onChange:s=>m("model.temperature",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Tokens"}),e.jsx(b,{type:"number",min:"1",max:"32000",value:((De=a==null?void 0:a.model)==null?void 0:De.maxTokens)||1e3,onChange:s=>m("model.maxTokens",parseInt(s.target.value)),className:"mt-1",placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fast Turns"}),e.jsx(b,{type:"number",min:"0",max:"10",value:((es=a==null?void 0:a.model)==null?void 0:es.numFastTurns)||0,onChange:s=>m("model.numFastTurns",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]})]})]})]}),e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),"Messages & Prompts"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message"}),e.jsx(H,{value:(a==null?void 0:a.firstMessage)||(n==null?void 0:n.firstMessage)||"",onChange:s=>m("firstMessage",s.target.value),className:"mt-1",rows:3,placeholder:"Hello! How can I help you today?"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"First Message Mode"}),e.jsxs(I,{value:(a==null?void 0:a.firstMessageMode)||"assistant-speaks-first",onValueChange:s=>m("firstMessageMode",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"assistant-speaks-first",children:"Assistant Speaks First"}),e.jsx(c,{value:"assistant-waits-for-user",children:"Assistant Waits for User"}),e.jsx(c,{value:"assistant-speaks-first-with-model-generated-message",children:"Model Generated First Message"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"firstMessageInterruptions",checked:(a==null?void 0:a.firstMessageInterruptionsEnabled)||!1,onChange:s=>m("firstMessageInterruptionsEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"firstMessageInterruptions",className:"text-sm text-gray-700",children:"Allow First Message Interruptions"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Message"}),e.jsx(H,{value:((rs=(as=(ss=a==null?void 0:a.model)==null?void 0:ss.messages)==null?void 0:as[0])==null?void 0:rs.content)||(a==null?void 0:a.systemMessage)||"",onChange:s=>Za(s.target.value),className:"mt-1",rows:6,placeholder:"You are a helpful AI assistant..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Message"}),e.jsx(H,{value:(a==null?void 0:a.endCallMessage)||"",onChange:s=>m("endCallMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Thank you for calling. Goodbye!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voicemail Message"}),e.jsx(H,{value:(a==null?void 0:a.voicemailMessage)||"",onChange:s=>m("voicemailMessage",s.target.value),className:"mt-1",rows:2,placeholder:"Please leave a message after the beep."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Call Phrases"}),e.jsx(H,{value:((ts=a==null?void 0:a.endCallPhrases)==null?void 0:ts.join(`
`))||"",onChange:s=>m("endCallPhrases",s.target.value.split(`
`).filter(r=>r.trim())),className:"mt-1",rows:3,placeholder:`goodbye
bye
end call
hang up`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Phrases that will trigger the call to end (one per line, case insensitive)"})]})]})]})]}),e.jsx(ne,{value:"voice",className:"space-y-6",children:e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),"Voice Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:Re(((ns=a==null?void 0:a.voice)==null?void 0:ns.provider)||"","voice"),onValueChange:s=>m("voice.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{placeholder:((is=a==null?void 0:a.voice)==null?void 0:is.provider)||"Select voice provider"})}),e.jsx(k,{children:le.map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(P,{variant:"outline",className:"text-xs",children:"API Key"}),e.jsxs("div",{className:"flex gap-1",children:[s.supportsSpeed&&e.jsx(P,{variant:"secondary",className:"text-xs",children:"Speed"}),s.supportsStability&&e.jsx(P,{variant:"secondary",className:"text-xs",children:"Stability"})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Voice"}),e.jsxs(I,{value:((ls=a==null?void 0:a.voice)==null?void 0:ls.voiceId)||"",onValueChange:s=>m("voice.voiceId",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{placeholder:"Select voice..."})}),e.jsxs(k,{children:[Se(((os=a==null?void 0:a.voice)==null?void 0:os.provider)||"11labs").map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.gender&&e.jsx(P,{variant:"outline",className:"text-xs",children:s.gender}),s.accent&&e.jsx(P,{variant:"secondary",className:"text-xs",children:s.accent})]})]})},s.id)),((cs=a==null?void 0:a.voice)==null?void 0:cs.voiceId)&&!Se(((ds=a==null?void 0:a.voice)==null?void 0:ds.provider)||"11labs").some(s=>s.id===a.voice.voiceId)&&e.jsxs(c,{value:a.voice.voiceId,children:[a.voice.voiceId," (Current)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[((ms=le.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:ms.supportsSpeed)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Speed"}),e.jsx(b,{type:"number",min:"0.25",max:"4",step:"0.1",value:((xs=a==null?void 0:a.voice)==null?void 0:xs.speed)||1,onChange:s=>m("voice.speed",parseFloat(s.target.value)),className:"mt-1",placeholder:"1.0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"0.25x to 4x speed"})]}),((us=le.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:us.supportsStability)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Stability"}),e.jsx(b,{type:"number",min:"0",max:"1",step:"0.1",value:((hs=a==null?void 0:a.voice)==null?void 0:hs.stability)||.5,onChange:s=>m("voice.stability",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more stable"})]}),((gs=le.find(s=>{var r;return s.id===((r=a==null?void 0:a.voice)==null?void 0:r.provider)}))==null?void 0:gs.supportsSimilarityBoost)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Similarity Boost"}),e.jsx(b,{type:"number",min:"0",max:"1",step:"0.1",value:((ps=a==null?void 0:a.voice)==null?void 0:ps.similarityBoost)||.5,onChange:s=>m("voice.similarityBoost",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher = more similar to original"})]})]})]})]})}),e.jsxs(ne,{value:"transcriber",className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-purple-600"}),"Transcriber Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:((js=a==null?void 0:a.transcriber)==null?void 0:js.provider)||"deepgram",onValueChange:s=>m("transcriber.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:Ua.map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.requiresApiKey&&e.jsx(P,{variant:"outline",className:"text-xs",children:"API Key"}),s.supportsLanguages&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:[s.supportsLanguages.length," Languages"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),e.jsxs(I,{value:((fs=a==null?void 0:a.transcriber)==null?void 0:fs.language)||"en",onValueChange:s=>m("transcriber.language",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"en",children:"English"}),e.jsx(c,{value:"es",children:"Spanish"}),e.jsx(c,{value:"fr",children:"French"}),e.jsx(c,{value:"de",children:"German"}),e.jsx(c,{value:"it",children:"Italian"}),e.jsx(c,{value:"pt",children:"Portuguese"}),e.jsx(c,{value:"zh",children:"Chinese"}),e.jsx(c,{value:"ja",children:"Japanese"}),e.jsx(c,{value:"ko",children:"Korean"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(I,{value:((vs=a==null?void 0:a.transcriber)==null?void 0:vs.model)||"nova-2",onValueChange:s=>m("transcriber.model",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsx(k,{children:$a(((bs=a==null?void 0:a.transcriber)==null?void 0:bs.provider)||"deepgram").map(s=>e.jsx(c,{value:s.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.description&&e.jsx("span",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.accuracy&&e.jsx(P,{variant:s.accuracy==="premium"?"default":s.accuracy==="enhanced"?"secondary":"outline",className:"text-xs",children:s.accuracy}),s.latency&&e.jsxs(P,{variant:"outline",className:"text-xs",children:[s.latency," latency"]})]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Keywords"}),e.jsx(b,{value:((Ns=(ys=a==null?void 0:a.transcriber)==null?void 0:ys.keywords)==null?void 0:Ns.join(", "))||"",onChange:s=>m("transcriber.keywords",s.target.value.split(",").map(r=>r.trim()).filter(r=>r)),className:"mt-1",placeholder:"Enter keywords separated by commas..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confidence Threshold"}),e.jsx(b,{type:"number",min:"0",max:"1",step:"0.1",value:((ws=a==null?void 0:a.transcriber)==null?void 0:ws.confidenceThreshold)||.4,onChange:s=>m("transcriber.confidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End of Turn Confidence"}),e.jsx(b,{type:"number",min:"0",max:"1",step:"0.1",value:((Cs=a==null?void 0:a.transcriber)==null?void 0:Cs.endOfTurnConfidenceThreshold)||.7,onChange:s=>m("transcriber.endOfTurnConfidenceThreshold",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.7"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Min End Silence (ms)"}),e.jsx(b,{type:"number",min:"0",max:"5000",value:((Is=a==null?void 0:a.transcriber)==null?void 0:Is.minEndOfTurnSilenceWhenConfident)||160,onChange:s=>m("transcriber.minEndOfTurnSilenceWhenConfident",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Turn Silence (ms)"}),e.jsx(b,{type:"number",min:"0",max:"10000",value:((Ss=a==null?void 0:a.transcriber)==null?void 0:Ss.maxTurnSilence)||400,onChange:s=>m("transcriber.maxTurnSilence",parseInt(s.target.value)),className:"mt-1",placeholder:"400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Finalization Wait (ms)"}),e.jsx(b,{type:"number",min:"0",max:"5000",value:((Ms=a==null?void 0:a.transcriber)==null?void 0:Ms.wordFinalizationMaxWaitTime)||160,onChange:s=>m("transcriber.wordFinalizationMaxWaitTime",parseInt(s.target.value)),className:"mt-1",placeholder:"160"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enableUniversalStreamingApi",checked:((ks=a==null?void 0:a.transcriber)==null?void 0:ks.enableUniversalStreamingApi)||!1,onChange:s=>m("transcriber.enableUniversalStreamingApi",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"enableUniversalStreamingApi",className:"text-sm text-gray-700",children:"Enable Universal Streaming API"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"formatTurns",checked:((Ts=a==null?void 0:a.transcriber)==null?void 0:Ts.formatTurns)||!1,onChange:s=>m("transcriber.formatTurns",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"formatTurns",className:"text-sm text-gray-700",children:"Format Turns"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"disablePartialTranscripts",checked:((Ps=a==null?void 0:a.transcriber)==null?void 0:Ps.disablePartialTranscripts)||!1,onChange:s=>m("transcriber.disablePartialTranscripts",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"disablePartialTranscripts",className:"text-sm text-gray-700",children:"Disable Partial Transcripts"})]})]})]})]}),e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-5 w-5 text-indigo-600"}),"Word Boost & Keywords"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Word Boost"}),e.jsx(H,{value:((Es=(Vs=a==null?void 0:a.transcriber)==null?void 0:Vs.wordBoost)==null?void 0:Es.join(`
`))||"",onChange:s=>m("transcriber.wordBoost",s.target.value.split(`
`).filter(r=>r.trim())),className:"mt-1",rows:4,placeholder:"Enter words to boost (one per line)..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Words that should be recognized more accurately. One word per line."})]}),((Fs=a==null?void 0:a.transcriber)==null?void 0:Fs.wordBoost)&&a.transcriber.wordBoost.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Word Boost"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:a.transcriber.wordBoost.map((s,r)=>e.jsx(P,{variant:"outline",className:"mr-2 mb-2",children:s},r))})]})]})]})]}),e.jsxs(ne,{value:"advanced",className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(xr,{className:"h-5 w-5 text-indigo-600"}),"Call Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Duration (seconds)"}),e.jsx(b,{type:"number",min:"10",max:"43200",value:(a==null?void 0:a.maxDurationSeconds)||600,onChange:s=>m("maxDurationSeconds",parseInt(s.target.value)),className:"mt-1",placeholder:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Background Sound"}),e.jsxs(I,{value:(a==null?void 0:a.backgroundSound)||"off",onValueChange:s=>m("backgroundSound",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"off",children:"Off"}),e.jsx(c,{value:"office",children:"Office"}),e.jsx(c,{value:"cafe",children:"Cafe"}),e.jsx(c,{value:"nature",children:"Nature"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"modelOutputInMessagesEnabled",checked:(a==null?void 0:a.modelOutputInMessagesEnabled)||!1,onChange:s=>m("modelOutputInMessagesEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"modelOutputInMessagesEnabled",className:"text-sm text-gray-700",children:"Model Output in Messages"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"backgroundDenoisingEnabled",checked:(a==null?void 0:a.backgroundDenoisingEnabled)||!1,onChange:s=>m("backgroundDenoisingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"backgroundDenoisingEnabled",className:"text-sm text-gray-700",children:"Background Denoising (Deprecated)"})]})]})]})]}),e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-purple-600"}),"Speech & Interruption Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Start Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Wait Seconds"}),e.jsx(b,{type:"number",min:"0",max:"5",step:"0.1",value:((_s=a==null?void 0:a.startSpeakingPlan)==null?void 0:_s.waitSeconds)||.4,onChange:s=>m("startSpeakingPlan.waitSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.4"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("input",{type:"checkbox",id:"smartEndpointingEnabled",checked:((Os=a==null?void 0:a.startSpeakingPlan)==null?void 0:Os.smartEndpointingEnabled)||!1,onChange:s=>m("startSpeakingPlan.smartEndpointingEnabled",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"smartEndpointingEnabled",className:"text-xs text-gray-700",children:"Smart Endpointing"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Stop Speaking Plan"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Num Words"}),e.jsx(b,{type:"number",min:"0",max:"10",value:((Bs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Bs.numWords)||0,onChange:s=>m("stopSpeakingPlan.numWords",parseInt(s.target.value)),className:"mt-1",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Voice Seconds"}),e.jsx(b,{type:"number",min:"0",max:"2",step:"0.1",value:((Ls=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Ls.voiceSeconds)||.2,onChange:s=>m("stopSpeakingPlan.voiceSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"0.2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Backoff Seconds"}),e.jsx(b,{type:"number",min:"0",max:"5",step:"0.1",value:((Rs=a==null?void 0:a.stopSpeakingPlan)==null?void 0:Rs.backoffSeconds)||1,onChange:s=>m("stopSpeakingPlan.backoffSeconds",parseFloat(s.target.value)),className:"mt-1",placeholder:"1"})]})]})]})]})]}),e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"h-5 w-5 text-blue-600"}),"Transport Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider"}),e.jsxs(I,{value:(($s=(Us=a==null?void 0:a.transportConfigurations)==null?void 0:Us[0])==null?void 0:$s.provider)||"twilio",onValueChange:s=>m("transportConfigurations.0.provider",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"twilio",children:"Twilio"}),e.jsx(c,{value:"vonage",children:"Vonage"}),e.jsx(c,{value:"vapi",children:"VAPI"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timeout (seconds)"}),e.jsx(b,{type:"number",min:"10",max:"300",value:((As=(qs=a==null?void 0:a.transportConfigurations)==null?void 0:qs[0])==null?void 0:As.timeout)||60,onChange:s=>m("transportConfigurations.0.timeout",parseInt(s.target.value)),className:"mt-1",placeholder:"60"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"recordEnabled",checked:((Ks=(zs=a==null?void 0:a.transportConfigurations)==null?void 0:zs[0])==null?void 0:Ks.record)||!1,onChange:s=>m("transportConfigurations.0.record",s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"recordEnabled",className:"text-sm text-gray-700",children:"Enable Call Recording"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recording Channels"}),e.jsxs(I,{value:((Hs=(Ws=a==null?void 0:a.transportConfigurations)==null?void 0:Ws[0])==null?void 0:Hs.recordingChannels)||"mono",onValueChange:s=>m("transportConfigurations.0.recordingChannels",s),children:[e.jsx(S,{className:"mt-1",children:e.jsx(M,{})}),e.jsxs(k,{children:[e.jsx(c,{value:"mono",children:"Mono"}),e.jsx(c,{value:"dual",children:"Dual"})]})]})]})]})]})]})]}),e.jsx(ne,{value:"debug",className:"space-y-6",children:e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5 text-red-600"}),"Debug Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assistant ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:n==null?void 0:n.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Organization ID"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg font-mono text-sm",children:(a==null?void 0:a.orgId)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Created At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Updated At"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg text-sm",children:a!=null&&a.updatedAt?new Date(a.updatedAt).toLocaleString():"N/A"})]})]}),(a==null?void 0:a.metadata)&&Object.keys(a.metadata).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Metadata"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a.metadata,null,2)})})]}),(a==null?void 0:a._rawVapiData)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Raw VAPI Response"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(a._rawVapiData,null,2)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("label",{className:"text-xs font-medium text-blue-700",children:"Model Values"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(Ys=a==null?void 0:a.model)==null?void 0:Ys.provider,'" (',typeof((Gs=a==null?void 0:a.model)==null?void 0:Gs.provider),")"]}),e.jsxs("div",{children:['Model: "',(Qs=a==null?void 0:a.model)==null?void 0:Qs.model,'" (',typeof((Js=a==null?void 0:a.model)==null?void 0:Js.model),")"]}),e.jsxs("div",{children:["Temperature: ",(Xs=a==null?void 0:a.model)==null?void 0:Xs.temperature," (",typeof((Zs=a==null?void 0:a.model)==null?void 0:Zs.temperature),")"]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"text-xs font-medium text-green-700",children:"Voice Values"}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[e.jsxs("div",{children:['Provider: "',(Ds=a==null?void 0:a.voice)==null?void 0:Ds.provider,'" (',typeof((ea=a==null?void 0:a.voice)==null?void 0:ea.provider),")"]}),e.jsxs("div",{children:['Voice ID: "',(sa=a==null?void 0:a.voice)==null?void 0:sa.voiceId,'" (',typeof((aa=a==null?void 0:a.voice)==null?void 0:aa.voiceId),")"]}),e.jsxs("div",{children:["Speed: ",(ra=a==null?void 0:a.voice)==null?void 0:ra.speed," (",typeof((ta=a==null?void 0:a.voice)==null?void 0:ta.speed),")"]})]})]})]})]})]})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(re,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Assistant Selected"}),e.jsx("p",{className:"text-gray-500",children:"Select an assistant from the list to view details"})]})})}),e.jsx(Ve,{open:je,onOpenChange:ee,children:e.jsxs(Ee,{className:"sm:max-w-[425px]",children:[e.jsx(Fe,{children:e.jsxs(_e,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(be,{className:"h-5 w-5"}),"Delete Assistant"]})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(be,{className:"h-8 w-8 text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Are you sure you want to delete this assistant?"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:f==null?void 0:f.name})," will be permanently deleted from both VAPI and your database. This action cannot be undone."]}),e.jsxs("div",{className:"mt-2 text-xs text-red-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Agent ID:"})," ",f==null?void 0:f.id]}),(f==null?void 0:f.assistant_id)&&e.jsxs("p",{children:[e.jsx("strong",{children:"VAPI Assistant ID:"})," ",f.assistant_id]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(V,{variant:"outline",onClick:()=>ee(!1),disabled:ge.isPending,children:"Cancel"}),e.jsx(V,{variant:"destructive",onClick:er,disabled:ge.isPending,className:"bg-red-600 hover:bg-red-700",children:ge.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Delete Assistant"]})})]})]})}),y&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm transition-opacity",onClick:()=>O(!1)}),e.jsxs("div",{className:"ml-auto relative bg-white w-1/2 h-full shadow-2xl border-l border-gray-200 transform transition-transform duration-300 ease-in-out",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(we,{className:"h-10 w-10 bg-gray-100 border border-gray-200",children:e.jsx(Ce,{className:"text-gray-700 font-medium",children:fe((n==null?void 0:n.name)||"")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n==null?void 0:n.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:"AI Voice Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{id:"call-button-container",className:"min-w-[100px] min-h-[40px] bg-red-100 border  rounded flex items-center justify-center"}),e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 h-8 w-8 p-0 rounded-full",children:"Ã—"})]})]})}),e.jsx("div",{className:"flex flex-col h-[calc(100vh-80px)]",children:n&&e.jsx(Sr,{agentId:String(n.id),agentName:n.name||"Unknown Agent",agentConfig:{...a,assistant_id:n.assistant_id||(a==null?void 0:a.assistant_id),firstMessage:(a==null?void 0:a.firstMessage)||`Hello! I'm ${n.name}. How can I help you today?`,systemMessage:((la=(ia=(na=a==null?void 0:a.model)==null?void 0:na.messages)==null?void 0:ia[0])==null?void 0:la.content)||`You are ${n.name}, a helpful AI assistant.`},onCallStart:()=>{console.log("ðŸŽ™ï¸ Started call with assistant:",n.name),console.log("ðŸ” Agent data:",n),console.log("ðŸ” Agent details:",a),N.success(`Connected to ${n.name}`)},onCallEnd:()=>{console.log("ðŸŽ™ï¸ Ended call with assistant:",n.name),N.info("Call ended")},onError:s=>{console.error("ðŸŽ™ï¸ Call error:",s),N.error(`Call error: ${s.message}`)}})})]})]}),e.jsx(Mr,{open:W,onOpenChange:Y,onTemplateSelect:Ja,onCreateCustom:Xa})]})};export{Gr as default};
//# sourceMappingURL=VapiStyleAgents-CzAvUrnz.js.map
