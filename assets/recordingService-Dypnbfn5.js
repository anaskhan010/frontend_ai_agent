import{j as e,bi as $,bh as F,b as K,J as P,a_ as Q,ce as W,cf as Y,cb as Z,as as ee}from"./ui-BZ34e_bG.js";import{r as g}from"./vendor-DG599jyl.js";import{B as p,c as D}from"./button-Cm3qqFtR.js";import{S as U}from"./slider-sBISlhuE.js";import{D as re,a as se,b as ae,e as V}from"./dropdown-menu-DvTkgNmQ.js";import{d as h,t as d}from"./index-DWPNxztX.js";const le=({src:a,title:o="Audio Recording",duration:t="00:00",className:r,onPlay:s,onPause:c,onDownload:l,onShare:R,showControls:x=!0,autoPlay:z=!1,compact:A=!1})=>{const n=g.useRef(null),[f,w]=g.useState(!1),[b,v]=g.useState(0),[u,B]=g.useState(0),[N,I]=g.useState(1),[E,S]=g.useState(!1),[j,k]=g.useState(!1),y=i=>{const m=Math.floor(i/60),H=Math.floor(i%60);return`${m.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`},T=async()=>{if(n.current)try{f?(n.current.pause(),w(!1),c==null||c()):(k(!0),await n.current.play(),w(!0),s==null||s())}catch(i){console.error("Error playing audio:",i),w(!1)}finally{k(!1)}},C=()=>{n.current&&v(n.current.currentTime)},L=()=>{n.current&&B(n.current.duration)},O=i=>{if(n.current){const m=i[0]/100*u;n.current.currentTime=m,v(m)}},_=i=>{const m=i[0]/100;I(m),n.current&&(n.current.volume=m),S(m===0)},J=()=>{n.current&&(E?(n.current.volume=N,S(!1)):(n.current.volume=0,S(!0)))},X=()=>{n.current&&(n.current.currentTime=Math.min(n.current.currentTime+10,u))},q=()=>{n.current&&(n.current.currentTime=Math.max(n.current.currentTime-10,0))},M=()=>{w(!1),v(0)};g.useEffect(()=>{const i=n.current;if(i)return i.addEventListener("timeupdate",C),i.addEventListener("loadedmetadata",L),i.addEventListener("ended",M),()=>{i.removeEventListener("timeupdate",C),i.removeEventListener("loadedmetadata",L),i.removeEventListener("ended",M)}},[]);const G=u>0?b/u*100:0;return A?e.jsxs("div",{className:D("flex items-center space-x-2",r),children:[e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full hover:bg-primary/10",onClick:T,disabled:!a||j,children:j?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):f?e.jsx($,{className:"h-4 w-4 text-primary"}):e.jsx(F,{className:"h-4 w-4 text-primary"})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[y(b)," / ",u>0?y(u):t]}),a&&e.jsx("audio",{ref:n,src:a,preload:"metadata"})]}):e.jsxs("div",{className:D("bg-card border rounded-lg p-4 space-y-4",r),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-foreground truncate",children:o}),x&&e.jsxs(re,{children:[e.jsx(se,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsxs(ae,{align:"end",children:[e.jsxs(V,{onClick:l,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(V,{onClick:R,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{value:[G],onValueChange:O,max:100,step:.1,className:"w-full",disabled:!a||u===0}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:y(b)}),e.jsx("span",{children:u>0?y(u):t})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{variant:"ghost",size:"sm",onClick:q,disabled:!a||!f,children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"lg",onClick:T,disabled:!a||j,className:"h-10 w-10 rounded-full bg-primary/10 hover:bg-primary/20",children:j?e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"}):f?e.jsx($,{className:"h-5 w-5 text-primary"}):e.jsx(F,{className:"h-5 w-5 text-primary"})}),e.jsx(p,{variant:"ghost",size:"sm",onClick:X,disabled:!a||!f,children:e.jsx(Y,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{variant:"ghost",size:"sm",onClick:J,disabled:!a,children:E||N===0?e.jsx(Z,{className:"h-4 w-4"}):e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(U,{value:[E?0:N*100],onValueChange:_,max:100,step:1,className:"w-20",disabled:!a})]})]}),a&&e.jsx("audio",{ref:n,src:a,preload:"metadata",autoPlay:z}),!a&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx("p",{className:"text-sm",children:"No audio source available"}),e.jsx("p",{className:"text-xs",children:"Upload or select a recording to play"})]})]})};async function ue(a=1,o=10,t={}){var r,s;try{const c=new URLSearchParams({page:a.toString(),limit:o.toString(),...Object.fromEntries(Object.entries(t).filter(([R,x])=>x!==void 0&&x!==""))});return(await h.get(`/api/recordings?${c.toString()}`)).data.data}catch(c){console.error("Error fetching recordings:",c);const l=((s=(r=c.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch recordings";throw d.error(l),c}}async function me(a){var o,t;try{return(await h.get(`/api/recordings/${a}`)).data.data}catch(r){console.error("Error fetching recording:",r);const s=((t=(o=r.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch recording";throw d.error(s),r}}async function ge(a){var o,t;try{await h.delete(`/api/recordings/${a}`),d.success("Recording deleted successfully")}catch(r){console.error("Error deleting recording:",r);const s=((t=(o=r.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to delete recording";throw d.error(s),r}}async function he(a,o){var t,r;try{const s=await h.get(`/api/recordings/${a}/download`,{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([s.data])),l=document.createElement("a");return l.href=c,l.setAttribute("download",o||`recording-${a}.mp3`),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(c),d.success("Recording downloaded successfully"),s.data}catch(s){console.error("Error downloading recording:",s);const c=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to download recording";throw d.error(c),s}}async function pe(a){var o,t;try{return(await h.get(`/api/recordings/${a}/transcript`)).data.data}catch(r){console.error("Error fetching transcript:",r);const s=((t=(o=r.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch transcript";throw d.error(s),r}}async function fe(a,o){var t,r;try{const s=await h.patch(`/api/recordings/${a}/transcript`,{transcript:o});return d.success("Transcript updated successfully"),s.data.data}catch(s){console.error("Error updating transcript:",s);const c=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update transcript";throw d.error(c),s}}async function xe(a){var o,t;try{return(await h.get(`/api/recordings/${a}/analytics`)).data.data}catch(r){console.error("Error fetching recording analytics:",r);const s=((t=(o=r.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch analytics";throw d.error(s),r}}async function we(a,o){var t,r;try{const s=await h.post(`/api/recordings/${a}/share`,o);return d.success("Recording shared successfully"),s.data.data}catch(s){console.error("Error sharing recording:",s);const c=((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to share recording";throw d.error(c),s}}export{le as A,he as a,me as b,xe as c,ge as d,pe as e,ue as g,we as s,fe as u};
//# sourceMappingURL=recordingService-Dypnbfn5.js.map
